var Cm=h=>{throw TypeError(h)};var Th=(h,t,e)=>t.has(h)||Cm("Cannot "+e);var Qt=(h,t,e)=>(Th(h,t,"read from private field"),e?e.call(h):t.get(h)),Ji=(h,t,e)=>t.has(h)?Cm("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,e),ii=(h,t,e,s)=>(Th(h,t,"write to private field"),s?s.call(h,e):t.set(h,e),e),tn=(h,t,e)=>(Th(h,t,"access private method"),e);var Tm=(h,t,e,s)=>({set _(a){ii(h,t,a,e)},get _(){return Qt(h,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function Tb(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var xh={exports:{}},Or={};var xm;function $0(){if(xm)return Or;xm=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:h,type:s,key:c,ref:a!==void 0?a:null,props:o}}return Or.Fragment=t,Or.jsx=e,Or.jsxs=e,Or}var Dm;function Q0(){return Dm||(Dm=1,xh.exports=$0()),xh.exports}var et=Q0(),Dh={exports:{}},mt={};var Mm;function W0(){if(Mm)return mt;Mm=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),y=Symbol.iterator;function A(D){return D===null||typeof D!="object"?null:(D=y&&D[y]||D["@@iterator"],typeof D=="function"?D:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function E(D,F,K){this.props=D,this.context=F,this.refs=C,this.updater=K||w}E.prototype.isReactComponent={},E.prototype.setState=function(D,F){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,F,"setState")},E.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function x(){}x.prototype=E.prototype;function T(D,F,K){this.props=D,this.context=F,this.refs=C,this.updater=K||w}var O=T.prototype=new x;O.constructor=T,S(O,E.prototype),O.isPureReactComponent=!0;var R=Array.isArray;function L(){}var k={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function X(D,F,K){var J=K.ref;return{$$typeof:h,type:D,key:F,ref:J!==void 0?J:null,props:K}}function Z(D,F){return X(D.type,F,D.props)}function Q(D){return typeof D=="object"&&D!==null&&D.$$typeof===h}function at(D){var F={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(K){return F[K]})}var pt=/\/+/g;function lt(D,F){return typeof D=="object"&&D!==null&&D.key!=null?at(""+D.key):F.toString(36)}function St(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(L,L):(D.status="pending",D.then(function(F){D.status==="pending"&&(D.status="fulfilled",D.value=F)},function(F){D.status==="pending"&&(D.status="rejected",D.reason=F)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function B(D,F,K,J,ct){var ot=typeof D;(ot==="undefined"||ot==="boolean")&&(D=null);var ut=!1;if(D===null)ut=!0;else switch(ot){case"bigint":case"string":case"number":ut=!0;break;case"object":switch(D.$$typeof){case h:case t:ut=!0;break;case p:return ut=D._init,B(ut(D._payload),F,K,J,ct)}}if(ut)return ct=ct(D),ut=J===""?"."+lt(D,0):J,R(ct)?(K="",ut!=null&&(K=ut.replace(pt,"$&/")+"/"),B(ct,F,K,"",function(Tt){return Tt})):ct!=null&&(Q(ct)&&(ct=Z(ct,K+(ct.key==null||D&&D.key===ct.key?"":(""+ct.key).replace(pt,"$&/")+"/")+ut)),F.push(ct)),1;ut=0;var Ft=J===""?".":J+":";if(R(D))for(var Et=0;Et<D.length;Et++)J=D[Et],ot=Ft+lt(J,Et),ut+=B(J,F,K,ot,ct);else if(Et=A(D),typeof Et=="function")for(D=Et.call(D),Et=0;!(J=D.next()).done;)J=J.value,ot=Ft+lt(J,Et++),ut+=B(J,F,K,ot,ct);else if(ot==="object"){if(typeof D.then=="function")return B(St(D),F,K,J,ct);throw F=String(D),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return ut}function P(D,F,K){if(D==null)return D;var J=[],ct=0;return B(D,J,"","",function(ot){return F.call(K,ot,ct++)}),J}function W(D){if(D._status===-1){var F=D._result;F=F(),F.then(function(K){(D._status===0||D._status===-1)&&(D._status=1,D._result=K)},function(K){(D._status===0||D._status===-1)&&(D._status=2,D._result=K)}),D._status===-1&&(D._status=0,D._result=F)}if(D._status===1)return D._result.default;throw D._result}var tt=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},ft={map:P,forEach:function(D,F,K){P(D,function(){F.apply(this,arguments)},K)},count:function(D){var F=0;return P(D,function(){F++}),F},toArray:function(D){return P(D,function(F){return F})||[]},only:function(D){if(!Q(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return mt.Activity=b,mt.Children=ft,mt.Component=E,mt.Fragment=e,mt.Profiler=a,mt.PureComponent=T,mt.StrictMode=s,mt.Suspense=d,mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,mt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return k.H.useMemoCache(D)}},mt.cache=function(D){return function(){return D.apply(null,arguments)}},mt.cacheSignal=function(){return null},mt.cloneElement=function(D,F,K){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var J=S({},D.props),ct=D.key;if(F!=null)for(ot in F.key!==void 0&&(ct=""+F.key),F)!q.call(F,ot)||ot==="key"||ot==="__self"||ot==="__source"||ot==="ref"&&F.ref===void 0||(J[ot]=F[ot]);var ot=arguments.length-2;if(ot===1)J.children=K;else if(1<ot){for(var ut=Array(ot),Ft=0;Ft<ot;Ft++)ut[Ft]=arguments[Ft+2];J.children=ut}return X(D.type,ct,J)},mt.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:o,_context:D},D},mt.createElement=function(D,F,K){var J,ct={},ot=null;if(F!=null)for(J in F.key!==void 0&&(ot=""+F.key),F)q.call(F,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(ct[J]=F[J]);var ut=arguments.length-2;if(ut===1)ct.children=K;else if(1<ut){for(var Ft=Array(ut),Et=0;Et<ut;Et++)Ft[Et]=arguments[Et+2];ct.children=Ft}if(D&&D.defaultProps)for(J in ut=D.defaultProps,ut)ct[J]===void 0&&(ct[J]=ut[J]);return X(D,ot,ct)},mt.createRef=function(){return{current:null}},mt.forwardRef=function(D){return{$$typeof:u,render:D}},mt.isValidElement=Q,mt.lazy=function(D){return{$$typeof:p,_payload:{_status:-1,_result:D},_init:W}},mt.memo=function(D,F){return{$$typeof:f,type:D,compare:F===void 0?null:F}},mt.startTransition=function(D){var F=k.T,K={};k.T=K;try{var J=D(),ct=k.S;ct!==null&&ct(K,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(L,tt)}catch(ot){tt(ot)}finally{F!==null&&K.types!==null&&(F.types=K.types),k.T=F}},mt.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},mt.use=function(D){return k.H.use(D)},mt.useActionState=function(D,F,K){return k.H.useActionState(D,F,K)},mt.useCallback=function(D,F){return k.H.useCallback(D,F)},mt.useContext=function(D){return k.H.useContext(D)},mt.useDebugValue=function(){},mt.useDeferredValue=function(D,F){return k.H.useDeferredValue(D,F)},mt.useEffect=function(D,F){return k.H.useEffect(D,F)},mt.useEffectEvent=function(D){return k.H.useEffectEvent(D)},mt.useId=function(){return k.H.useId()},mt.useImperativeHandle=function(D,F,K){return k.H.useImperativeHandle(D,F,K)},mt.useInsertionEffect=function(D,F){return k.H.useInsertionEffect(D,F)},mt.useLayoutEffect=function(D,F){return k.H.useLayoutEffect(D,F)},mt.useMemo=function(D,F){return k.H.useMemo(D,F)},mt.useOptimistic=function(D,F){return k.H.useOptimistic(D,F)},mt.useReducer=function(D,F,K){return k.H.useReducer(D,F,K)},mt.useRef=function(D){return k.H.useRef(D)},mt.useState=function(D){return k.H.useState(D)},mt.useSyncExternalStore=function(D,F,K){return k.H.useSyncExternalStore(D,F,K)},mt.useTransition=function(){return k.H.useTransition()},mt.version="19.2.3",mt}var Rm;function ud(){return Rm||(Rm=1,Dh.exports=W0()),Dh.exports}var j=ud();const Zt=Tb(j);var Mh={exports:{}},Lr={},Rh={exports:{}},Oh={};var Om;function Z0(){return Om||(Om=1,(function(h){function t(B,P){var W=B.length;B.push(P);t:for(;0<W;){var tt=W-1>>>1,ft=B[tt];if(0<a(ft,P))B[tt]=P,B[W]=ft,W=tt;else break t}}function e(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var P=B[0],W=B.pop();if(W!==P){B[0]=W;t:for(var tt=0,ft=B.length,D=ft>>>1;tt<D;){var F=2*(tt+1)-1,K=B[F],J=F+1,ct=B[J];if(0>a(K,W))J<ft&&0>a(ct,K)?(B[tt]=ct,B[J]=W,tt=J):(B[tt]=K,B[F]=W,tt=F);else if(J<ft&&0>a(ct,W))B[tt]=ct,B[J]=W,tt=J;else break t}}return P}function a(B,P){var W=B.sortIndex-P.sortIndex;return W!==0?W:B.id-P.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;h.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();h.unstable_now=function(){return c.now()-u}}var d=[],f=[],p=1,b=null,y=3,A=!1,w=!1,S=!1,C=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function O(B){for(var P=e(f);P!==null;){if(P.callback===null)s(f);else if(P.startTime<=B)s(f),P.sortIndex=P.expirationTime,t(d,P);else break;P=e(f)}}function R(B){if(S=!1,O(B),!w)if(e(d)!==null)w=!0,L||(L=!0,at());else{var P=e(f);P!==null&&St(R,P.startTime-B)}}var L=!1,k=-1,q=5,X=-1;function Z(){return C?!0:!(h.unstable_now()-X<q)}function Q(){if(C=!1,L){var B=h.unstable_now();X=B;var P=!0;try{t:{w=!1,S&&(S=!1,x(k),k=-1),A=!0;var W=y;try{e:{for(O(B),b=e(d);b!==null&&!(b.expirationTime>B&&Z());){var tt=b.callback;if(typeof tt=="function"){b.callback=null,y=b.priorityLevel;var ft=tt(b.expirationTime<=B);if(B=h.unstable_now(),typeof ft=="function"){b.callback=ft,O(B),P=!0;break e}b===e(d)&&s(d),O(B)}else s(d);b=e(d)}if(b!==null)P=!0;else{var D=e(f);D!==null&&St(R,D.startTime-B),P=!1}}break t}finally{b=null,y=W,A=!1}P=void 0}}finally{P?at():L=!1}}}var at;if(typeof T=="function")at=function(){T(Q)};else if(typeof MessageChannel<"u"){var pt=new MessageChannel,lt=pt.port2;pt.port1.onmessage=Q,at=function(){lt.postMessage(null)}}else at=function(){E(Q,0)};function St(B,P){k=E(function(){B(h.unstable_now())},P)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(B){B.callback=null},h.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<B?Math.floor(1e3/B):5},h.unstable_getCurrentPriorityLevel=function(){return y},h.unstable_next=function(B){switch(y){case 1:case 2:case 3:var P=3;break;default:P=y}var W=y;y=P;try{return B()}finally{y=W}},h.unstable_requestPaint=function(){C=!0},h.unstable_runWithPriority=function(B,P){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var W=y;y=B;try{return P()}finally{y=W}},h.unstable_scheduleCallback=function(B,P,W){var tt=h.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?tt+W:tt):W=tt,B){case 1:var ft=-1;break;case 2:ft=250;break;case 5:ft=1073741823;break;case 4:ft=1e4;break;default:ft=5e3}return ft=W+ft,B={id:p++,callback:P,priorityLevel:B,startTime:W,expirationTime:ft,sortIndex:-1},W>tt?(B.sortIndex=W,t(f,B),e(d)===null&&B===e(f)&&(S?(x(k),k=-1):S=!0,St(R,W-tt))):(B.sortIndex=ft,t(d,B),w||A||(w=!0,L||(L=!0,at()))),B},h.unstable_shouldYield=Z,h.unstable_wrapCallback=function(B){var P=y;return function(){var W=y;y=P;try{return B.apply(this,arguments)}finally{y=W}}}})(Oh)),Oh}var Lm;function J0(){return Lm||(Lm=1,Rh.exports=Z0()),Rh.exports}var Lh={exports:{}},Fe={};var Nm;function tA(){if(Nm)return Fe;Nm=1;var h=ud();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,f,p){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:d,containerInfo:f,implementation:p}}var c=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Fe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Fe.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,p)},Fe.flushSync=function(d){var f=c.T,p=s.p;try{if(c.T=null,s.p=2,d)return d()}finally{c.T=f,s.p=p,s.d.f()}},Fe.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(d,f))},Fe.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Fe.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,b=u(p,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?s.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:y,fetchPriority:A}):p==="script"&&s.d.X(d,{crossOrigin:b,integrity:y,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Fe.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);s.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(d)},Fe.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,b=u(p,f.crossOrigin);s.d.L(d,p,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Fe.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=u(f.as,f.crossOrigin);s.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(d)},Fe.requestFormReset=function(d){s.d.r(d)},Fe.unstable_batchedUpdates=function(d,f){return d(f)},Fe.useFormState=function(d,f,p){return c.H.useFormState(d,f,p)},Fe.useFormStatus=function(){return c.H.useHostTransitionStatus()},Fe.version="19.2.3",Fe}var km;function xb(){if(km)return Lh.exports;km=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),Lh.exports=tA(),Lh.exports}var Bm;function eA(){if(Bm)return Lr;Bm=1;var h=J0(),t=ud(),e=xb();function s(i){var n="https://react.dev/errors/"+i;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+i+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var n=i,r=i;if(i.alternate)for(;n.return;)n=n.return;else{i=n;do n=i,(n.flags&4098)!==0&&(r=n.return),i=n.return;while(i)}return n.tag===3?r:null}function c(i){if(i.tag===13){var n=i.memoizedState;if(n===null&&(i=i.alternate,i!==null&&(n=i.memoizedState)),n!==null)return n.dehydrated}return null}function u(i){if(i.tag===31){var n=i.memoizedState;if(n===null&&(i=i.alternate,i!==null&&(n=i.memoizedState)),n!==null)return n.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(s(188))}function f(i){var n=i.alternate;if(!n){if(n=o(i),n===null)throw Error(s(188));return n!==i?null:i}for(var r=i,l=n;;){var g=r.return;if(g===null)break;var m=g.alternate;if(m===null){if(l=g.return,l!==null){r=l;continue}break}if(g.child===m.child){for(m=g.child;m;){if(m===r)return d(g),i;if(m===l)return d(g),n;m=m.sibling}throw Error(s(188))}if(r.return!==l.return)r=g,l=m;else{for(var v=!1,_=g.child;_;){if(_===r){v=!0,r=g,l=m;break}if(_===l){v=!0,l=g,r=m;break}_=_.sibling}if(!v){for(_=m.child;_;){if(_===r){v=!0,r=m,l=g;break}if(_===l){v=!0,l=m,r=g;break}_=_.sibling}if(!v)throw Error(s(189))}}if(r.alternate!==l)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?i:n}function p(i){var n=i.tag;if(n===5||n===26||n===27||n===6)return i;for(i=i.child;i!==null;){if(n=p(i),n!==null)return n;i=i.sibling}return null}var b=Object.assign,y=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),T=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function at(i){return i===null||typeof i!="object"?null:(i=Q&&i[Q]||i["@@iterator"],typeof i=="function"?i:null)}var pt=Symbol.for("react.client.reference");function lt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===pt?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case E:return"Profiler";case C:return"StrictMode";case R:return"Suspense";case L:return"SuspenseList";case X:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case w:return"Portal";case T:return i.displayName||"Context";case x:return(i._context.displayName||"Context")+".Consumer";case O:var n=i.render;return i=i.displayName,i||(i=n.displayName||n.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case k:return n=i.displayName||null,n!==null?n:lt(i.type)||"Memo";case q:n=i._payload,i=i._init;try{return lt(i(n))}catch{}}return null}var St=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},tt=[],ft=-1;function D(i){return{current:i}}function F(i){0>ft||(i.current=tt[ft],tt[ft]=null,ft--)}function K(i,n){ft++,tt[ft]=i.current,i.current=n}var J=D(null),ct=D(null),ot=D(null),ut=D(null);function Ft(i,n){switch(K(ot,n),K(ct,i),K(J,null),n.nodeType){case 9:case 11:i=(i=n.documentElement)&&(i=i.namespaceURI)?Kp(i):0;break;default:if(i=n.tagName,n=n.namespaceURI)n=Kp(n),i=$p(n,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}F(J),K(J,i)}function Et(){F(J),F(ct),F(ot)}function Tt(i){i.memoizedState!==null&&K(ut,i);var n=J.current,r=$p(n,i.type);n!==r&&(K(ct,i),K(J,r))}function Ve(i){ct.current===i&&(F(J),F(ct)),ut.current===i&&(F(ut),xr._currentValue=W)}var Se,mi;function pe(i){if(Se===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Se=n&&n[1]||"",mi=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Se+i+mi}var Xi=!1;function Yi(i,n){if(!i||Xi)return"";Xi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(G){var H=G}Reflect.construct(i,[],$)}else{try{$.call()}catch(G){H=G}i.call($.prototype)}}else{try{throw Error()}catch(G){H=G}($=i())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(G){if(G&&H&&typeof G.stack=="string")return[G.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),v=m[0],_=m[1];if(v&&_){var M=v.split(`
`),I=_.split(`
`);for(g=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;g<I.length&&!I[g].includes("DetermineComponentFrameRoot");)g++;if(l===M.length||g===I.length)for(l=M.length-1,g=I.length-1;1<=l&&0<=g&&M[l]!==I[g];)g--;for(;1<=l&&0<=g;l--,g--)if(M[l]!==I[g]){if(l!==1||g!==1)do if(l--,g--,0>g||M[l]!==I[g]){var V=`
`+M[l].replace(" at new "," at ");return i.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",i.displayName)),V}while(1<=l&&0<=g);break}}}finally{Xi=!1,Error.prepareStackTrace=r}return(r=i?i.displayName||i.name:"")?pe(r):""}function fo(i,n){switch(i.tag){case 26:case 27:case 5:return pe(i.type);case 16:return pe("Lazy");case 13:return i.child!==n&&n!==null?pe("Suspense Fallback"):pe("Suspense");case 19:return pe("SuspenseList");case 0:case 15:return Yi(i.type,!1);case 11:return Yi(i.type.render,!1);case 1:return Yi(i.type,!0);case 31:return pe("Activity");default:return""}}function Ia(i){try{var n="",r=null;do n+=fo(i,r),r=i,i=i.return;while(i);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ls=Object.prototype.hasOwnProperty,bi=h.unstable_scheduleCallback,On=h.unstable_cancelCallback,zs=h.unstable_shouldYield,go=h.unstable_requestPaint,Be=h.unstable_now,gc=h.unstable_getCurrentPriorityLevel,po=h.unstable_ImmediatePriority,on=h.unstable_UserBlockingPriority,Pi=h.unstable_NormalPriority,cs=h.unstable_LowPriority,Ha=h.unstable_IdlePriority,Ki=h.log,mo=h.unstable_setDisableYieldValue,us=null,Ue=null;function yi(i){if(typeof Ki=="function"&&mo(i),Ue&&typeof Ue.setStrictMode=="function")try{Ue.setStrictMode(us,i)}catch{}}var ze=Math.clz32?Math.clz32:mc,pc=Math.log,bo=Math.LN2;function mc(i){return i>>>=0,i===0?32:31-(pc(i)/bo|0)|0}var Ps=256,Fs=262144,se=4194304;function ae(i){var n=i&42;if(n!==0)return n;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function we(i,n,r){var l=i.pendingLanes;if(l===0)return 0;var g=0,m=i.suspendedLanes,v=i.pingedLanes;i=i.warmLanes;var _=l&134217727;return _!==0?(l=_&~m,l!==0?g=ae(l):(v&=_,v!==0?g=ae(v):r||(r=_&~i,r!==0&&(g=ae(r))))):(_=l&~m,_!==0?g=ae(_):v!==0?g=ae(v):r||(r=l&~i,r!==0&&(g=ae(r)))),g===0?0:n!==0&&n!==g&&(n&m)===0&&(m=g&-g,r=n&-n,m>=r||m===32&&(r&4194048)!==0)?n:g}function Xe(i,n){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&n)===0}function Ye(i,n){switch(i){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pe(){var i=se;return se<<=1,(se&62914560)===0&&(se=4194304),i}function Ke(i){for(var n=[],r=0;31>r;r++)n.push(i);return n}function vi(i,n){i.pendingLanes|=n,n!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function me(i,n,r,l,g,m){var v=i.pendingLanes;i.pendingLanes=r,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=r,i.entangledLanes&=r,i.errorRecoveryDisabledLanes&=r,i.shellSuspendCounter=0;var _=i.entanglements,M=i.expirationTimes,I=i.hiddenUpdates;for(r=v&~r;0<r;){var V=31-ze(r),$=1<<V;_[V]=0,M[V]=-1;var H=I[V];if(H!==null)for(I[V]=null,V=0;V<H.length;V++){var G=H[V];G!==null&&(G.lane&=-536870913)}r&=~$}l!==0&&Fi(i,l,0),m!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=m&~(v&~n))}function Fi(i,n,r){i.pendingLanes|=n,i.suspendedLanes&=~n;var l=31-ze(n);i.entangledLanes|=n,i.entanglements[l]=i.entanglements[l]|1073741824|r&261930}function ai(i,n){var r=i.entangledLanes|=n;for(i=i.entanglements;r;){var l=31-ze(r),g=1<<l;g&n|i[l]&n&&(i[l]|=n),r&=~g}}function Ai(i,n){var r=n&-n;return r=(r&42)!==0?1:ln(r),(r&(i.suspendedLanes|n))!==0?0:r}function ln(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function cn(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ui(){var i=P.p;return i!==0?i:(i=window.event,i===void 0?32:ym(i.type))}function Ln(i,n){var r=P.p;try{return P.p=i,n()}finally{P.p=r}}var Si=Math.random().toString(36).slice(2),De="__reactFiber$"+Si,$e="__reactProps$"+Si,Us="__reactContainer$"+Si,bc="__reactEvents$"+Si,Fy="__reactListeners$"+Si,Uy="__reactHandles$"+Si,kd="__reactResources$"+Si,ja="__reactMarker$"+Si;function yc(i){delete i[De],delete i[$e],delete i[bc],delete i[Fy],delete i[Uy]}function Is(i){var n=i[De];if(n)return n;for(var r=i.parentNode;r;){if(n=r[Us]||r[De]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(i=im(i);i!==null;){if(r=i[De])return r;i=im(i)}return n}i=r,r=i.parentNode}return null}function Hs(i){if(i=i[De]||i[Us]){var n=i.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return i}return null}function Ga(i){var n=i.tag;if(n===5||n===26||n===27||n===6)return i.stateNode;throw Error(s(33))}function js(i){var n=i[kd];return n||(n=i[kd]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ee(i){i[ja]=!0}var Bd=new Set,zd={};function hs(i,n){Gs(i,n),Gs(i+"Capture",n)}function Gs(i,n){for(zd[i]=n,i=0;i<n.length;i++)Bd.add(n[i])}var Iy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pd={},Fd={};function Hy(i){return ls.call(Fd,i)?!0:ls.call(Pd,i)?!1:Iy.test(i)?Fd[i]=!0:(Pd[i]=!0,!1)}function yo(i,n,r){if(Hy(n))if(r===null)i.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":i.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){i.removeAttribute(n);return}}i.setAttribute(n,""+r)}}function vo(i,n,r){if(r===null)i.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(n);return}i.setAttribute(n,""+r)}}function un(i,n,r,l){if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttributeNS(n,r,""+l)}}function wi(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ud(i){var n=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function jy(i,n,r){var l=Object.getOwnPropertyDescriptor(i.constructor.prototype,n);if(!i.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,m=l.set;return Object.defineProperty(i,n,{configurable:!0,get:function(){return g.call(this)},set:function(v){r=""+v,m.call(this,v)}}),Object.defineProperty(i,n,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){i._valueTracker=null,delete i[n]}}}}function vc(i){if(!i._valueTracker){var n=Ud(i)?"checked":"value";i._valueTracker=jy(i,n,""+i[n])}}function Id(i){if(!i)return!1;var n=i._valueTracker;if(!n)return!0;var r=n.getValue(),l="";return i&&(l=Ud(i)?i.checked?"true":"false":i.value),i=l,i!==r?(n.setValue(i),!0):!1}function Ao(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Gy=/[\n"\\]/g;function Ei(i){return i.replace(Gy,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ac(i,n,r,l,g,m,v,_){i.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?i.type=v:i.removeAttribute("type"),n!=null?v==="number"?(n===0&&i.value===""||i.value!=n)&&(i.value=""+wi(n)):i.value!==""+wi(n)&&(i.value=""+wi(n)):v!=="submit"&&v!=="reset"||i.removeAttribute("value"),n!=null?Sc(i,v,wi(n)):r!=null?Sc(i,v,wi(r)):l!=null&&i.removeAttribute("value"),g==null&&m!=null&&(i.defaultChecked=!!m),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.name=""+wi(_):i.removeAttribute("name")}function Hd(i,n,r,l,g,m,v,_){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(i.type=m),n!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){vc(i);return}r=r!=null?""+wi(r):"",n=n!=null?""+wi(n):r,_||n===i.value||(i.value=n),i.defaultValue=n}l=l??g,l=typeof l!="function"&&typeof l!="symbol"&&!!l,i.checked=_?i.checked:!!l,i.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.name=v),vc(i)}function Sc(i,n,r){n==="number"&&Ao(i.ownerDocument)===i||i.defaultValue===""+r||(i.defaultValue=""+r)}function qs(i,n,r,l){if(i=i.options,n){n={};for(var g=0;g<r.length;g++)n["$"+r[g]]=!0;for(r=0;r<i.length;r++)g=n.hasOwnProperty("$"+i[r].value),i[r].selected!==g&&(i[r].selected=g),g&&l&&(i[r].defaultSelected=!0)}else{for(r=""+wi(r),n=null,g=0;g<i.length;g++){if(i[g].value===r){i[g].selected=!0,l&&(i[g].defaultSelected=!0);return}n!==null||i[g].disabled||(n=i[g])}n!==null&&(n.selected=!0)}}function jd(i,n,r){if(n!=null&&(n=""+wi(n),n!==i.value&&(i.value=n),r==null)){i.defaultValue!==n&&(i.defaultValue=n);return}i.defaultValue=r!=null?""+wi(r):""}function Gd(i,n,r,l){if(n==null){if(l!=null){if(r!=null)throw Error(s(92));if(St(l)){if(1<l.length)throw Error(s(93));l=l[0]}r=l}r==null&&(r=""),n=r}r=wi(n),i.defaultValue=r,l=i.textContent,l===r&&l!==""&&l!==null&&(i.value=l),vc(i)}function Vs(i,n){if(n){var r=i.firstChild;if(r&&r===i.lastChild&&r.nodeType===3){r.nodeValue=n;return}}i.textContent=n}var qy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qd(i,n,r){var l=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?i.setProperty(n,""):n==="float"?i.cssFloat="":i[n]="":l?i.setProperty(n,r):typeof r!="number"||r===0||qy.has(n)?n==="float"?i.cssFloat=r:i[n]=(""+r).trim():i[n]=r+"px"}function Vd(i,n,r){if(n!=null&&typeof n!="object")throw Error(s(62));if(i=i.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="");for(var g in n)l=n[g],n.hasOwnProperty(g)&&r[g]!==l&&qd(i,g,l)}else for(var m in n)n.hasOwnProperty(m)&&qd(i,m,n[m])}function wc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function So(i){return Xy.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function hn(){}var Ec=null;function _c(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Xs=null,Ys=null;function Xd(i){var n=Hs(i);if(n&&(i=n.stateNode)){var r=i[$e]||null;t:switch(i=n.stateNode,n.type){case"input":if(Ac(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=i;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Ei(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var l=r[n];if(l!==i&&l.form===i.form){var g=l[$e]||null;if(!g)throw Error(s(90));Ac(l,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(n=0;n<r.length;n++)l=r[n],l.form===i.form&&Id(l)}break t;case"textarea":jd(i,r.value,r.defaultValue);break t;case"select":n=r.value,n!=null&&qs(i,!!r.multiple,n,!1)}}}var Cc=!1;function Yd(i,n,r){if(Cc)return i(n,r);Cc=!0;try{var l=i(n);return l}finally{if(Cc=!1,(Xs!==null||Ys!==null)&&(ll(),Xs&&(n=Xs,i=Ys,Ys=Xs=null,Xd(n),i)))for(n=0;n<i.length;n++)Xd(i[n])}}function qa(i,n){var r=i.stateNode;if(r===null)return null;var l=r[$e]||null;if(l===null)return null;r=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(i=i.type,l=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!l;break t;default:i=!1}if(i)return null;if(r&&typeof r!="function")throw Error(s(231,n,typeof r));return r}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tc=!1;if(dn)try{var Va={};Object.defineProperty(Va,"passive",{get:function(){Tc=!0}}),window.addEventListener("test",Va,Va),window.removeEventListener("test",Va,Va)}catch{Tc=!1}var Nn=null,xc=null,wo=null;function Kd(){if(wo)return wo;var i,n=xc,r=n.length,l,g="value"in Nn?Nn.value:Nn.textContent,m=g.length;for(i=0;i<r&&n[i]===g[i];i++);var v=r-i;for(l=1;l<=v&&n[r-l]===g[m-l];l++);return wo=g.slice(i,1<l?1-l:void 0)}function Eo(i){var n=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&n===13&&(i=13)):i=n,i===10&&(i=13),32<=i||i===13?i:0}function _o(){return!0}function $d(){return!1}function Qe(i){function n(r,l,g,m,v){this._reactName=r,this._targetInst=g,this.type=l,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var _ in i)i.hasOwnProperty(_)&&(r=i[_],this[_]=r?r(m):m[_]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?_o:$d,this.isPropagationStopped=$d,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=_o)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=_o)},persist:function(){},isPersistent:_o}),n}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Co=Qe(ds),Xa=b({},ds,{view:0,detail:0}),Yy=Qe(Xa),Dc,Mc,Ya,To=b({},Xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ya&&(Ya&&i.type==="mousemove"?(Dc=i.screenX-Ya.screenX,Mc=i.screenY-Ya.screenY):Mc=Dc=0,Ya=i),Dc)},movementY:function(i){return"movementY"in i?i.movementY:Mc}}),Qd=Qe(To),Ky=b({},To,{dataTransfer:0}),$y=Qe(Ky),Qy=b({},Xa,{relatedTarget:0}),Rc=Qe(Qy),Wy=b({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),Zy=Qe(Wy),Jy=b({},ds,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),tv=Qe(Jy),ev=b({},ds,{data:0}),Wd=Qe(ev),iv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function av(i){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(i):(i=sv[i])?!!n[i]:!1}function Oc(){return av}var rv=b({},Xa,{key:function(i){if(i.key){var n=iv[i.key]||i.key;if(n!=="Unidentified")return n}return i.type==="keypress"?(i=Eo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?nv[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oc,charCode:function(i){return i.type==="keypress"?Eo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Eo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ov=Qe(rv),lv=b({},To,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zd=Qe(lv),cv=b({},Xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oc}),uv=Qe(cv),hv=b({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),dv=Qe(hv),fv=b({},To,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),gv=Qe(fv),pv=b({},ds,{newState:0,oldState:0}),mv=Qe(pv),bv=[9,13,27,32],Lc=dn&&"CompositionEvent"in window,Ka=null;dn&&"documentMode"in document&&(Ka=document.documentMode);var yv=dn&&"TextEvent"in window&&!Ka,Jd=dn&&(!Lc||Ka&&8<Ka&&11>=Ka),tf=" ",ef=!1;function nf(i,n){switch(i){case"keyup":return bv.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sf(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ks=!1;function vv(i,n){switch(i){case"compositionend":return sf(n);case"keypress":return n.which!==32?null:(ef=!0,tf);case"textInput":return i=n.data,i===tf&&ef?null:i;default:return null}}function Av(i,n){if(Ks)return i==="compositionend"||!Lc&&nf(i,n)?(i=Kd(),wo=xc=Nn=null,Ks=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Jd&&n.locale!=="ko"?null:n.data;default:return null}}var Sv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function af(i){var n=i&&i.nodeName&&i.nodeName.toLowerCase();return n==="input"?!!Sv[i.type]:n==="textarea"}function rf(i,n,r,l){Xs?Ys?Ys.push(l):Ys=[l]:Xs=l,n=pl(n,"onChange"),0<n.length&&(r=new Co("onChange","change",null,r,l),i.push({event:r,listeners:n}))}var $a=null,Qa=null;function wv(i){jp(i,0)}function xo(i){var n=Ga(i);if(Id(n))return i}function of(i,n){if(i==="change")return n}var lf=!1;if(dn){var Nc;if(dn){var kc="oninput"in document;if(!kc){var cf=document.createElement("div");cf.setAttribute("oninput","return;"),kc=typeof cf.oninput=="function"}Nc=kc}else Nc=!1;lf=Nc&&(!document.documentMode||9<document.documentMode)}function uf(){$a&&($a.detachEvent("onpropertychange",hf),Qa=$a=null)}function hf(i){if(i.propertyName==="value"&&xo(Qa)){var n=[];rf(n,Qa,i,_c(i)),Yd(wv,n)}}function Ev(i,n,r){i==="focusin"?(uf(),$a=n,Qa=r,$a.attachEvent("onpropertychange",hf)):i==="focusout"&&uf()}function _v(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return xo(Qa)}function Cv(i,n){if(i==="click")return xo(n)}function Tv(i,n){if(i==="input"||i==="change")return xo(n)}function xv(i,n){return i===n&&(i!==0||1/i===1/n)||i!==i&&n!==n}var ri=typeof Object.is=="function"?Object.is:xv;function Wa(i,n){if(ri(i,n))return!0;if(typeof i!="object"||i===null||typeof n!="object"||n===null)return!1;var r=Object.keys(i),l=Object.keys(n);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var g=r[l];if(!ls.call(n,g)||!ri(i[g],n[g]))return!1}return!0}function df(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ff(i,n){var r=df(i);i=0;for(var l;r;){if(r.nodeType===3){if(l=i+r.textContent.length,i<=n&&l>=n)return{node:r,offset:n-i};i=l}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=df(r)}}function gf(i,n){return i&&n?i===n?!0:i&&i.nodeType===3?!1:n&&n.nodeType===3?gf(i,n.parentNode):"contains"in i?i.contains(n):i.compareDocumentPosition?!!(i.compareDocumentPosition(n)&16):!1:!1}function pf(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var n=Ao(i.document);n instanceof i.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)i=n.contentWindow;else break;n=Ao(i.document)}return n}function Bc(i){var n=i&&i.nodeName&&i.nodeName.toLowerCase();return n&&(n==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||n==="textarea"||i.contentEditable==="true")}var Dv=dn&&"documentMode"in document&&11>=document.documentMode,$s=null,zc=null,Za=null,Pc=!1;function mf(i,n,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Pc||$s==null||$s!==Ao(l)||(l=$s,"selectionStart"in l&&Bc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Za&&Wa(Za,l)||(Za=l,l=pl(zc,"onSelect"),0<l.length&&(n=new Co("onSelect","select",null,n,r),i.push({event:n,listeners:l}),n.target=$s)))}function fs(i,n){var r={};return r[i.toLowerCase()]=n.toLowerCase(),r["Webkit"+i]="webkit"+n,r["Moz"+i]="moz"+n,r}var Qs={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionrun:fs("Transition","TransitionRun"),transitionstart:fs("Transition","TransitionStart"),transitioncancel:fs("Transition","TransitionCancel"),transitionend:fs("Transition","TransitionEnd")},Fc={},bf={};dn&&(bf=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function gs(i){if(Fc[i])return Fc[i];if(!Qs[i])return i;var n=Qs[i],r;for(r in n)if(n.hasOwnProperty(r)&&r in bf)return Fc[i]=n[r];return i}var yf=gs("animationend"),vf=gs("animationiteration"),Af=gs("animationstart"),Mv=gs("transitionrun"),Rv=gs("transitionstart"),Ov=gs("transitioncancel"),Sf=gs("transitionend"),wf=new Map,Uc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uc.push("scrollEnd");function Ii(i,n){wf.set(i,n),hs(n,[i])}var Do=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},_i=[],Ws=0,Ic=0;function Mo(){for(var i=Ws,n=Ic=Ws=0;n<i;){var r=_i[n];_i[n++]=null;var l=_i[n];_i[n++]=null;var g=_i[n];_i[n++]=null;var m=_i[n];if(_i[n++]=null,l!==null&&g!==null){var v=l.pending;v===null?g.next=g:(g.next=v.next,v.next=g),l.pending=g}m!==0&&Ef(r,g,m)}}function Ro(i,n,r,l){_i[Ws++]=i,_i[Ws++]=n,_i[Ws++]=r,_i[Ws++]=l,Ic|=l,i.lanes|=l,i=i.alternate,i!==null&&(i.lanes|=l)}function Hc(i,n,r,l){return Ro(i,n,r,l),Oo(i)}function ps(i,n){return Ro(i,null,null,n),Oo(i)}function Ef(i,n,r){i.lanes|=r;var l=i.alternate;l!==null&&(l.lanes|=r);for(var g=!1,m=i.return;m!==null;)m.childLanes|=r,l=m.alternate,l!==null&&(l.childLanes|=r),m.tag===22&&(i=m.stateNode,i===null||i._visibility&1||(g=!0)),i=m,m=m.return;return i.tag===3?(m=i.stateNode,g&&n!==null&&(g=31-ze(r),i=m.hiddenUpdates,l=i[g],l===null?i[g]=[n]:l.push(n),n.lane=r|536870912),m):null}function Oo(i){if(50<Ar)throw Ar=0,Qu=null,Error(s(185));for(var n=i.return;n!==null;)i=n,n=i.return;return i.tag===3?i.stateNode:null}var Zs={};function Lv(i,n,r,l){this.tag=i,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(i,n,r,l){return new Lv(i,n,r,l)}function jc(i){return i=i.prototype,!(!i||!i.isReactComponent)}function fn(i,n){var r=i.alternate;return r===null?(r=oi(i.tag,n,i.key,i.mode),r.elementType=i.elementType,r.type=i.type,r.stateNode=i.stateNode,r.alternate=i,i.alternate=r):(r.pendingProps=n,r.type=i.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=i.flags&65011712,r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,n=i.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=i.sibling,r.index=i.index,r.ref=i.ref,r.refCleanup=i.refCleanup,r}function _f(i,n){i.flags&=65011714;var r=i.alternate;return r===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=r.childLanes,i.lanes=r.lanes,i.child=r.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=r.memoizedProps,i.memoizedState=r.memoizedState,i.updateQueue=r.updateQueue,i.type=r.type,n=r.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),i}function Lo(i,n,r,l,g,m){var v=0;if(l=i,typeof i=="function")jc(i)&&(v=1);else if(typeof i=="string")v=P0(i,r,J.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case X:return i=oi(31,r,n,g),i.elementType=X,i.lanes=m,i;case S:return ms(r.children,g,m,n);case C:v=8,g|=24;break;case E:return i=oi(12,r,n,g|2),i.elementType=E,i.lanes=m,i;case R:return i=oi(13,r,n,g),i.elementType=R,i.lanes=m,i;case L:return i=oi(19,r,n,g),i.elementType=L,i.lanes=m,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case T:v=10;break t;case x:v=9;break t;case O:v=11;break t;case k:v=14;break t;case q:v=16,l=null;break t}v=29,r=Error(s(130,i===null?"null":typeof i,"")),l=null}return n=oi(v,r,n,g),n.elementType=i,n.type=l,n.lanes=m,n}function ms(i,n,r,l){return i=oi(7,i,l,n),i.lanes=r,i}function Gc(i,n,r){return i=oi(6,i,null,n),i.lanes=r,i}function Cf(i){var n=oi(18,null,null,0);return n.stateNode=i,n}function qc(i,n,r){return n=oi(4,i.children!==null?i.children:[],i.key,n),n.lanes=r,n.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},n}var Tf=new WeakMap;function Ci(i,n){if(typeof i=="object"&&i!==null){var r=Tf.get(i);return r!==void 0?r:(n={value:i,source:n,stack:Ia(n)},Tf.set(i,n),n)}return{value:i,source:n,stack:Ia(n)}}var Js=[],ta=0,No=null,Ja=0,Ti=[],xi=0,kn=null,$i=1,Qi="";function gn(i,n){Js[ta++]=Ja,Js[ta++]=No,No=i,Ja=n}function xf(i,n,r){Ti[xi++]=$i,Ti[xi++]=Qi,Ti[xi++]=kn,kn=i;var l=$i;i=Qi;var g=32-ze(l)-1;l&=~(1<<g),r+=1;var m=32-ze(n)+g;if(30<m){var v=g-g%5;m=(l&(1<<v)-1).toString(32),l>>=v,g-=v,$i=1<<32-ze(n)+g|r<<g|l,Qi=m+i}else $i=1<<m|r<<g|l,Qi=i}function Vc(i){i.return!==null&&(gn(i,1),xf(i,1,0))}function Xc(i){for(;i===No;)No=Js[--ta],Js[ta]=null,Ja=Js[--ta],Js[ta]=null;for(;i===kn;)kn=Ti[--xi],Ti[xi]=null,Qi=Ti[--xi],Ti[xi]=null,$i=Ti[--xi],Ti[xi]=null}function Df(i,n){Ti[xi++]=$i,Ti[xi++]=Qi,Ti[xi++]=kn,$i=n.id,Qi=n.overflow,kn=i}var Me=null,Yt=null,Mt=!1,Bn=null,Di=!1,Yc=Error(s(519));function zn(i){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tr(Ci(n,i)),Yc}function Mf(i){var n=i.stateNode,r=i.type,l=i.memoizedProps;switch(n[De]=i,n[$e]=l,r){case"dialog":Ct("cancel",n),Ct("close",n);break;case"iframe":case"object":case"embed":Ct("load",n);break;case"video":case"audio":for(r=0;r<wr.length;r++)Ct(wr[r],n);break;case"source":Ct("error",n);break;case"img":case"image":case"link":Ct("error",n),Ct("load",n);break;case"details":Ct("toggle",n);break;case"input":Ct("invalid",n),Hd(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ct("invalid",n);break;case"textarea":Ct("invalid",n),Gd(n,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||l.suppressHydrationWarning===!0||Xp(n.textContent,r)?(l.popover!=null&&(Ct("beforetoggle",n),Ct("toggle",n)),l.onScroll!=null&&Ct("scroll",n),l.onScrollEnd!=null&&Ct("scrollend",n),l.onClick!=null&&(n.onclick=hn),n=!0):n=!1,n||zn(i,!0)}function Rf(i){for(Me=i.return;Me;)switch(Me.tag){case 5:case 31:case 13:Di=!1;return;case 27:case 3:Di=!0;return;default:Me=Me.return}}function ea(i){if(i!==Me)return!1;if(!Mt)return Rf(i),Mt=!0,!1;var n=i.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=i.type,r=!(r!=="form"&&r!=="button")||hh(i.type,i.memoizedProps)),r=!r),r&&Yt&&zn(i),Rf(i),n===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Yt=em(i)}else if(n===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Yt=em(i)}else n===27?(n=Yt,Qn(i.type)?(i=mh,mh=null,Yt=i):Yt=n):Yt=Me?Ri(i.stateNode.nextSibling):null;return!0}function bs(){Yt=Me=null,Mt=!1}function Kc(){var i=Bn;return i!==null&&(ti===null?ti=i:ti.push.apply(ti,i),Bn=null),i}function tr(i){Bn===null?Bn=[i]:Bn.push(i)}var $c=D(null),ys=null,pn=null;function Pn(i,n,r){K($c,n._currentValue),n._currentValue=r}function mn(i){i._currentValue=$c.current,F($c)}function Qc(i,n,r){for(;i!==null;){var l=i.alternate;if((i.childLanes&n)!==n?(i.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),i===r)break;i=i.return}}function Wc(i,n,r,l){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var m=g.dependencies;if(m!==null){var v=g.child;m=m.firstContext;t:for(;m!==null;){var _=m;m=g;for(var M=0;M<n.length;M++)if(_.context===n[M]){m.lanes|=r,_=m.alternate,_!==null&&(_.lanes|=r),Qc(m.return,r,i),l||(v=null);break t}m=_.next}}else if(g.tag===18){if(v=g.return,v===null)throw Error(s(341));v.lanes|=r,m=v.alternate,m!==null&&(m.lanes|=r),Qc(v,r,i),v=null}else v=g.child;if(v!==null)v.return=g;else for(v=g;v!==null;){if(v===i){v=null;break}if(g=v.sibling,g!==null){g.return=v.return,v=g;break}v=v.return}g=v}}function ia(i,n,r,l){i=null;for(var g=n,m=!1;g!==null;){if(!m){if((g.flags&524288)!==0)m=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var v=g.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var _=g.type;ri(g.pendingProps.value,v.value)||(i!==null?i.push(_):i=[_])}}else if(g===ut.current){if(v=g.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(xr):i=[xr])}g=g.return}i!==null&&Wc(n,i,r,l),n.flags|=262144}function ko(i){for(i=i.firstContext;i!==null;){if(!ri(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function vs(i){ys=i,pn=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Re(i){return Of(ys,i)}function Bo(i,n){return ys===null&&vs(i),Of(i,n)}function Of(i,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},pn===null){if(i===null)throw Error(s(308));pn=n,i.dependencies={lanes:0,firstContext:n},i.flags|=524288}else pn=pn.next=n;return r}var Nv=typeof AbortController<"u"?AbortController:function(){var i=[],n=this.signal={aborted:!1,addEventListener:function(r,l){i.push(l)}};this.abort=function(){n.aborted=!0,i.forEach(function(r){return r()})}},kv=h.unstable_scheduleCallback,Bv=h.unstable_NormalPriority,ce={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zc(){return{controller:new Nv,data:new Map,refCount:0}}function er(i){i.refCount--,i.refCount===0&&kv(Bv,function(){i.controller.abort()})}var ir=null,Jc=0,na=0,sa=null;function zv(i,n){if(ir===null){var r=ir=[];Jc=0,na=ih(),sa={status:"pending",value:void 0,then:function(l){r.push(l)}}}return Jc++,n.then(Lf,Lf),n}function Lf(){if(--Jc===0&&ir!==null){sa!==null&&(sa.status="fulfilled");var i=ir;ir=null,na=0,sa=null;for(var n=0;n<i.length;n++)(0,i[n])()}}function Pv(i,n){var r=[],l={status:"pending",value:null,reason:null,then:function(g){r.push(g)}};return i.then(function(){l.status="fulfilled",l.value=n;for(var g=0;g<r.length;g++)(0,r[g])(n)},function(g){for(l.status="rejected",l.reason=g,g=0;g<r.length;g++)(0,r[g])(void 0)}),l}var Nf=B.S;B.S=function(i,n){mp=Be(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&zv(i,n),Nf!==null&&Nf(i,n)};var As=D(null);function tu(){var i=As.current;return i!==null?i:Vt.pooledCache}function zo(i,n){n===null?K(As,As.current):K(As,n.pool)}function kf(){var i=tu();return i===null?null:{parent:ce._currentValue,pool:i}}var aa=Error(s(460)),eu=Error(s(474)),Po=Error(s(542)),Fo={then:function(){}};function Bf(i){return i=i.status,i==="fulfilled"||i==="rejected"}function zf(i,n,r){switch(r=i[r],r===void 0?i.push(n):r!==n&&(n.then(hn,hn),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw i=n.reason,Ff(i),i;default:if(typeof n.status=="string")n.then(hn,hn);else{if(i=Vt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=n,i.status="pending",i.then(function(l){if(n.status==="pending"){var g=n;g.status="fulfilled",g.value=l}},function(l){if(n.status==="pending"){var g=n;g.status="rejected",g.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw i=n.reason,Ff(i),i}throw ws=n,aa}}function Ss(i){try{var n=i._init;return n(i._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(ws=r,aa):r}}var ws=null;function Pf(){if(ws===null)throw Error(s(459));var i=ws;return ws=null,i}function Ff(i){if(i===aa||i===Po)throw Error(s(483))}var ra=null,nr=0;function Uo(i){var n=nr;return nr+=1,ra===null&&(ra=[]),zf(ra,i,n)}function sr(i,n){n=n.props.ref,i.ref=n!==void 0?n:null}function Io(i,n){throw n.$$typeof===y?Error(s(525)):(i=Object.prototype.toString.call(n),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":i)))}function Uf(i){function n(z,N){if(i){var U=z.deletions;U===null?(z.deletions=[N],z.flags|=16):U.push(N)}}function r(z,N){if(!i)return null;for(;N!==null;)n(z,N),N=N.sibling;return null}function l(z){for(var N=new Map;z!==null;)z.key!==null?N.set(z.key,z):N.set(z.index,z),z=z.sibling;return N}function g(z,N){return z=fn(z,N),z.index=0,z.sibling=null,z}function m(z,N,U){return z.index=U,i?(U=z.alternate,U!==null?(U=U.index,U<N?(z.flags|=67108866,N):U):(z.flags|=67108866,N)):(z.flags|=1048576,N)}function v(z){return i&&z.alternate===null&&(z.flags|=67108866),z}function _(z,N,U,Y){return N===null||N.tag!==6?(N=Gc(U,z.mode,Y),N.return=z,N):(N=g(N,U),N.return=z,N)}function M(z,N,U,Y){var ht=U.type;return ht===S?V(z,N,U.props.children,Y,U.key):N!==null&&(N.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===q&&Ss(ht)===N.type)?(N=g(N,U.props),sr(N,U),N.return=z,N):(N=Lo(U.type,U.key,U.props,null,z.mode,Y),sr(N,U),N.return=z,N)}function I(z,N,U,Y){return N===null||N.tag!==4||N.stateNode.containerInfo!==U.containerInfo||N.stateNode.implementation!==U.implementation?(N=qc(U,z.mode,Y),N.return=z,N):(N=g(N,U.children||[]),N.return=z,N)}function V(z,N,U,Y,ht){return N===null||N.tag!==7?(N=ms(U,z.mode,Y,ht),N.return=z,N):(N=g(N,U),N.return=z,N)}function $(z,N,U){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Gc(""+N,z.mode,U),N.return=z,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case A:return U=Lo(N.type,N.key,N.props,null,z.mode,U),sr(U,N),U.return=z,U;case w:return N=qc(N,z.mode,U),N.return=z,N;case q:return N=Ss(N),$(z,N,U)}if(St(N)||at(N))return N=ms(N,z.mode,U,null),N.return=z,N;if(typeof N.then=="function")return $(z,Uo(N),U);if(N.$$typeof===T)return $(z,Bo(z,N),U);Io(z,N)}return null}function H(z,N,U,Y){var ht=N!==null?N.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ht!==null?null:_(z,N,""+U,Y);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return U.key===ht?M(z,N,U,Y):null;case w:return U.key===ht?I(z,N,U,Y):null;case q:return U=Ss(U),H(z,N,U,Y)}if(St(U)||at(U))return ht!==null?null:V(z,N,U,Y,null);if(typeof U.then=="function")return H(z,N,Uo(U),Y);if(U.$$typeof===T)return H(z,N,Bo(z,U),Y);Io(z,U)}return null}function G(z,N,U,Y,ht){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return z=z.get(U)||null,_(N,z,""+Y,ht);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case A:return z=z.get(Y.key===null?U:Y.key)||null,M(N,z,Y,ht);case w:return z=z.get(Y.key===null?U:Y.key)||null,I(N,z,Y,ht);case q:return Y=Ss(Y),G(z,N,U,Y,ht)}if(St(Y)||at(Y))return z=z.get(U)||null,V(N,z,Y,ht,null);if(typeof Y.then=="function")return G(z,N,U,Uo(Y),ht);if(Y.$$typeof===T)return G(z,N,U,Bo(N,Y),ht);Io(N,Y)}return null}function st(z,N,U,Y){for(var ht=null,Nt=null,rt=N,wt=N=0,Dt=null;rt!==null&&wt<U.length;wt++){rt.index>wt?(Dt=rt,rt=null):Dt=rt.sibling;var kt=H(z,rt,U[wt],Y);if(kt===null){rt===null&&(rt=Dt);break}i&&rt&&kt.alternate===null&&n(z,rt),N=m(kt,N,wt),Nt===null?ht=kt:Nt.sibling=kt,Nt=kt,rt=Dt}if(wt===U.length)return r(z,rt),Mt&&gn(z,wt),ht;if(rt===null){for(;wt<U.length;wt++)rt=$(z,U[wt],Y),rt!==null&&(N=m(rt,N,wt),Nt===null?ht=rt:Nt.sibling=rt,Nt=rt);return Mt&&gn(z,wt),ht}for(rt=l(rt);wt<U.length;wt++)Dt=G(rt,z,wt,U[wt],Y),Dt!==null&&(i&&Dt.alternate!==null&&rt.delete(Dt.key===null?wt:Dt.key),N=m(Dt,N,wt),Nt===null?ht=Dt:Nt.sibling=Dt,Nt=Dt);return i&&rt.forEach(function(es){return n(z,es)}),Mt&&gn(z,wt),ht}function gt(z,N,U,Y){if(U==null)throw Error(s(151));for(var ht=null,Nt=null,rt=N,wt=N=0,Dt=null,kt=U.next();rt!==null&&!kt.done;wt++,kt=U.next()){rt.index>wt?(Dt=rt,rt=null):Dt=rt.sibling;var es=H(z,rt,kt.value,Y);if(es===null){rt===null&&(rt=Dt);break}i&&rt&&es.alternate===null&&n(z,rt),N=m(es,N,wt),Nt===null?ht=es:Nt.sibling=es,Nt=es,rt=Dt}if(kt.done)return r(z,rt),Mt&&gn(z,wt),ht;if(rt===null){for(;!kt.done;wt++,kt=U.next())kt=$(z,kt.value,Y),kt!==null&&(N=m(kt,N,wt),Nt===null?ht=kt:Nt.sibling=kt,Nt=kt);return Mt&&gn(z,wt),ht}for(rt=l(rt);!kt.done;wt++,kt=U.next())kt=G(rt,z,wt,kt.value,Y),kt!==null&&(i&&kt.alternate!==null&&rt.delete(kt.key===null?wt:kt.key),N=m(kt,N,wt),Nt===null?ht=kt:Nt.sibling=kt,Nt=kt);return i&&rt.forEach(function(K0){return n(z,K0)}),Mt&&gn(z,wt),ht}function Gt(z,N,U,Y){if(typeof U=="object"&&U!==null&&U.type===S&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case A:t:{for(var ht=U.key;N!==null;){if(N.key===ht){if(ht=U.type,ht===S){if(N.tag===7){r(z,N.sibling),Y=g(N,U.props.children),Y.return=z,z=Y;break t}}else if(N.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===q&&Ss(ht)===N.type){r(z,N.sibling),Y=g(N,U.props),sr(Y,U),Y.return=z,z=Y;break t}r(z,N);break}else n(z,N);N=N.sibling}U.type===S?(Y=ms(U.props.children,z.mode,Y,U.key),Y.return=z,z=Y):(Y=Lo(U.type,U.key,U.props,null,z.mode,Y),sr(Y,U),Y.return=z,z=Y)}return v(z);case w:t:{for(ht=U.key;N!==null;){if(N.key===ht)if(N.tag===4&&N.stateNode.containerInfo===U.containerInfo&&N.stateNode.implementation===U.implementation){r(z,N.sibling),Y=g(N,U.children||[]),Y.return=z,z=Y;break t}else{r(z,N);break}else n(z,N);N=N.sibling}Y=qc(U,z.mode,Y),Y.return=z,z=Y}return v(z);case q:return U=Ss(U),Gt(z,N,U,Y)}if(St(U))return st(z,N,U,Y);if(at(U)){if(ht=at(U),typeof ht!="function")throw Error(s(150));return U=ht.call(U),gt(z,N,U,Y)}if(typeof U.then=="function")return Gt(z,N,Uo(U),Y);if(U.$$typeof===T)return Gt(z,N,Bo(z,U),Y);Io(z,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,N!==null&&N.tag===6?(r(z,N.sibling),Y=g(N,U),Y.return=z,z=Y):(r(z,N),Y=Gc(U,z.mode,Y),Y.return=z,z=Y),v(z)):r(z,N)}return function(z,N,U,Y){try{nr=0;var ht=Gt(z,N,U,Y);return ra=null,ht}catch(rt){if(rt===aa||rt===Po)throw rt;var Nt=oi(29,rt,null,z.mode);return Nt.lanes=Y,Nt.return=z,Nt}}}var Es=Uf(!0),If=Uf(!1),Fn=!1;function iu(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nu(i,n){i=i.updateQueue,n.updateQueue===i&&(n.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Un(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function In(i,n,r){var l=i.updateQueue;if(l===null)return null;if(l=l.shared,(Bt&2)!==0){var g=l.pending;return g===null?n.next=n:(n.next=g.next,g.next=n),l.pending=n,n=Oo(i),Ef(i,null,r),n}return Ro(i,l,n,r),Oo(i)}function ar(i,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var l=n.lanes;l&=i.pendingLanes,r|=l,n.lanes=r,ai(i,r)}}function su(i,n){var r=i.updateQueue,l=i.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var g=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?g=m=v:m=m.next=v,r=r.next}while(r!==null);m===null?g=m=n:m=m.next=n}else g=m=n;r={baseState:l.baseState,firstBaseUpdate:g,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},i.updateQueue=r;return}i=r.lastBaseUpdate,i===null?r.firstBaseUpdate=n:i.next=n,r.lastBaseUpdate=n}var au=!1;function rr(){if(au){var i=sa;if(i!==null)throw i}}function or(i,n,r,l){au=!1;var g=i.updateQueue;Fn=!1;var m=g.firstBaseUpdate,v=g.lastBaseUpdate,_=g.shared.pending;if(_!==null){g.shared.pending=null;var M=_,I=M.next;M.next=null,v===null?m=I:v.next=I,v=M;var V=i.alternate;V!==null&&(V=V.updateQueue,_=V.lastBaseUpdate,_!==v&&(_===null?V.firstBaseUpdate=I:_.next=I,V.lastBaseUpdate=M))}if(m!==null){var $=g.baseState;v=0,V=I=M=null,_=m;do{var H=_.lane&-536870913,G=H!==_.lane;if(G?(xt&H)===H:(l&H)===H){H!==0&&H===na&&(au=!0),V!==null&&(V=V.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});t:{var st=i,gt=_;H=n;var Gt=r;switch(gt.tag){case 1:if(st=gt.payload,typeof st=="function"){$=st.call(Gt,$,H);break t}$=st;break t;case 3:st.flags=st.flags&-65537|128;case 0:if(st=gt.payload,H=typeof st=="function"?st.call(Gt,$,H):st,H==null)break t;$=b({},$,H);break t;case 2:Fn=!0}}H=_.callback,H!==null&&(i.flags|=64,G&&(i.flags|=8192),G=g.callbacks,G===null?g.callbacks=[H]:G.push(H))}else G={lane:H,tag:_.tag,payload:_.payload,callback:_.callback,next:null},V===null?(I=V=G,M=$):V=V.next=G,v|=H;if(_=_.next,_===null){if(_=g.shared.pending,_===null)break;G=_,_=G.next,G.next=null,g.lastBaseUpdate=G,g.shared.pending=null}}while(!0);V===null&&(M=$),g.baseState=M,g.firstBaseUpdate=I,g.lastBaseUpdate=V,m===null&&(g.shared.lanes=0),Vn|=v,i.lanes=v,i.memoizedState=$}}function Hf(i,n){if(typeof i!="function")throw Error(s(191,i));i.call(n)}function jf(i,n){var r=i.callbacks;if(r!==null)for(i.callbacks=null,i=0;i<r.length;i++)Hf(r[i],n)}var oa=D(null),Ho=D(0);function Gf(i,n){i=Cn,K(Ho,i),K(oa,n),Cn=i|n.baseLanes}function ru(){K(Ho,Cn),K(oa,oa.current)}function ou(){Cn=Ho.current,F(oa),F(Ho)}var li=D(null),Mi=null;function Hn(i){var n=i.alternate;K(re,re.current&1),K(li,i),Mi===null&&(n===null||oa.current!==null||n.memoizedState!==null)&&(Mi=i)}function lu(i){K(re,re.current),K(li,i),Mi===null&&(Mi=i)}function qf(i){i.tag===22?(K(re,re.current),K(li,i),Mi===null&&(Mi=i)):jn()}function jn(){K(re,re.current),K(li,li.current)}function ci(i){F(li),Mi===i&&(Mi=null),F(re)}var re=D(0);function jo(i){for(var n=i;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||gh(r)||ph(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break;for(;n.sibling===null;){if(n.return===null||n.return===i)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var bn=0,At=null,Ht=null,ue=null,Go=!1,la=!1,_s=!1,qo=0,lr=0,ca=null,Fv=0;function ee(){throw Error(s(321))}function cu(i,n){if(n===null)return!1;for(var r=0;r<n.length&&r<i.length;r++)if(!ri(i[r],n[r]))return!1;return!0}function uu(i,n,r,l,g,m){return bn=m,At=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,B.H=i===null||i.memoizedState===null?xg:Cu,_s=!1,m=r(l,g),_s=!1,la&&(m=Xf(n,r,l,g)),Vf(i),m}function Vf(i){B.H=hr;var n=Ht!==null&&Ht.next!==null;if(bn=0,ue=Ht=At=null,Go=!1,lr=0,ca=null,n)throw Error(s(300));i===null||he||(i=i.dependencies,i!==null&&ko(i)&&(he=!0))}function Xf(i,n,r,l){At=i;var g=0;do{if(la&&(ca=null),lr=0,la=!1,25<=g)throw Error(s(301));if(g+=1,ue=Ht=null,i.updateQueue!=null){var m=i.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}B.H=Dg,m=n(r,l)}while(la);return m}function Uv(){var i=B.H,n=i.useState()[0];return n=typeof n.then=="function"?cr(n):n,i=i.useState()[0],(Ht!==null?Ht.memoizedState:null)!==i&&(At.flags|=1024),n}function hu(){var i=qo!==0;return qo=0,i}function du(i,n,r){n.updateQueue=i.updateQueue,n.flags&=-2053,i.lanes&=~r}function fu(i){if(Go){for(i=i.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}Go=!1}bn=0,ue=Ht=At=null,la=!1,lr=qo=0,ca=null}function Ie(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ue===null?At.memoizedState=ue=i:ue=ue.next=i,ue}function oe(){if(Ht===null){var i=At.alternate;i=i!==null?i.memoizedState:null}else i=Ht.next;var n=ue===null?At.memoizedState:ue.next;if(n!==null)ue=n,Ht=i;else{if(i===null)throw At.alternate===null?Error(s(467)):Error(s(310));Ht=i,i={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},ue===null?At.memoizedState=ue=i:ue=ue.next=i}return ue}function Vo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cr(i){var n=lr;return lr+=1,ca===null&&(ca=[]),i=zf(ca,i,n),n=At,(ue===null?n.memoizedState:ue.next)===null&&(n=n.alternate,B.H=n===null||n.memoizedState===null?xg:Cu),i}function Xo(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return cr(i);if(i.$$typeof===T)return Re(i)}throw Error(s(438,String(i)))}function gu(i){var n=null,r=At.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var l=At.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(g){return g.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=Vo(),At.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(i),l=0;l<i;l++)r[l]=Z;return n.index++,r}function yn(i,n){return typeof n=="function"?n(i):n}function Yo(i){var n=oe();return pu(n,Ht,i)}function pu(i,n,r){var l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var g=i.baseQueue,m=l.pending;if(m!==null){if(g!==null){var v=g.next;g.next=m.next,m.next=v}n.baseQueue=g=m,l.pending=null}if(m=i.baseState,g===null)i.memoizedState=m;else{n=g.next;var _=v=null,M=null,I=n,V=!1;do{var $=I.lane&-536870913;if($!==I.lane?(xt&$)===$:(bn&$)===$){var H=I.revertLane;if(H===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),$===na&&(V=!0);else if((bn&H)===H){I=I.next,H===na&&(V=!0);continue}else $={lane:0,revertLane:I.revertLane,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},M===null?(_=M=$,v=m):M=M.next=$,At.lanes|=H,Vn|=H;$=I.action,_s&&r(m,$),m=I.hasEagerState?I.eagerState:r(m,$)}else H={lane:$,revertLane:I.revertLane,gesture:I.gesture,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},M===null?(_=M=H,v=m):M=M.next=H,At.lanes|=$,Vn|=$;I=I.next}while(I!==null&&I!==n);if(M===null?v=m:M.next=_,!ri(m,i.memoizedState)&&(he=!0,V&&(r=sa,r!==null)))throw r;i.memoizedState=m,i.baseState=v,i.baseQueue=M,l.lastRenderedState=m}return g===null&&(l.lanes=0),[i.memoizedState,l.dispatch]}function mu(i){var n=oe(),r=n.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=i;var l=r.dispatch,g=r.pending,m=n.memoizedState;if(g!==null){r.pending=null;var v=g=g.next;do m=i(m,v.action),v=v.next;while(v!==g);ri(m,n.memoizedState)||(he=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),r.lastRenderedState=m}return[m,l]}function Yf(i,n,r){var l=At,g=oe(),m=Mt;if(m){if(r===void 0)throw Error(s(407));r=r()}else r=n();var v=!ri((Ht||g).memoizedState,r);if(v&&(g.memoizedState=r,he=!0),g=g.queue,vu(Qf.bind(null,l,g,i),[i]),g.getSnapshot!==n||v||ue!==null&&ue.memoizedState.tag&1){if(l.flags|=2048,ua(9,{destroy:void 0},$f.bind(null,l,g,r,n),null),Vt===null)throw Error(s(349));m||(bn&127)!==0||Kf(l,n,r)}return r}function Kf(i,n,r){i.flags|=16384,i={getSnapshot:n,value:r},n=At.updateQueue,n===null?(n=Vo(),At.updateQueue=n,n.stores=[i]):(r=n.stores,r===null?n.stores=[i]:r.push(i))}function $f(i,n,r,l){n.value=r,n.getSnapshot=l,Wf(n)&&Zf(i)}function Qf(i,n,r){return r(function(){Wf(n)&&Zf(i)})}function Wf(i){var n=i.getSnapshot;i=i.value;try{var r=n();return!ri(i,r)}catch{return!0}}function Zf(i){var n=ps(i,2);n!==null&&ei(n,i,2)}function bu(i){var n=Ie();if(typeof i=="function"){var r=i;if(i=r(),_s){yi(!0);try{r()}finally{yi(!1)}}}return n.memoizedState=n.baseState=i,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:i},n}function Jf(i,n,r,l){return i.baseState=r,pu(i,Ht,typeof l=="function"?l:yn)}function Iv(i,n,r,l,g){if(Qo(i))throw Error(s(485));if(i=n.action,i!==null){var m={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};B.T!==null?r(!0):m.isTransition=!1,l(m),r=n.pending,r===null?(m.next=n.pending=m,tg(n,m)):(m.next=r.next,n.pending=r.next=m)}}function tg(i,n){var r=n.action,l=n.payload,g=i.state;if(n.isTransition){var m=B.T,v={};B.T=v;try{var _=r(g,l),M=B.S;M!==null&&M(v,_),eg(i,n,_)}catch(I){yu(i,n,I)}finally{m!==null&&v.types!==null&&(m.types=v.types),B.T=m}}else try{m=r(g,l),eg(i,n,m)}catch(I){yu(i,n,I)}}function eg(i,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){ig(i,n,l)},function(l){return yu(i,n,l)}):ig(i,n,r)}function ig(i,n,r){n.status="fulfilled",n.value=r,ng(n),i.state=r,n=i.pending,n!==null&&(r=n.next,r===n?i.pending=null:(r=r.next,n.next=r,tg(i,r)))}function yu(i,n,r){var l=i.pending;if(i.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=r,ng(n),n=n.next;while(n!==l)}i.action=null}function ng(i){i=i.listeners;for(var n=0;n<i.length;n++)(0,i[n])()}function sg(i,n){return n}function ag(i,n){if(Mt){var r=Vt.formState;if(r!==null){t:{var l=At;if(Mt){if(Yt){e:{for(var g=Yt,m=Di;g.nodeType!==8;){if(!m){g=null;break e}if(g=Ri(g.nextSibling),g===null){g=null;break e}}m=g.data,g=m==="F!"||m==="F"?g:null}if(g){Yt=Ri(g.nextSibling),l=g.data==="F!";break t}}zn(l)}l=!1}l&&(n=r[0])}}return r=Ie(),r.memoizedState=r.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sg,lastRenderedState:n},r.queue=l,r=_g.bind(null,At,l),l.dispatch=r,l=bu(!1),m=_u.bind(null,At,!1,l.queue),l=Ie(),g={state:n,dispatch:null,action:i,pending:null},l.queue=g,r=Iv.bind(null,At,g,m,r),g.dispatch=r,l.memoizedState=i,[n,r,!1]}function rg(i){var n=oe();return og(n,Ht,i)}function og(i,n,r){if(n=pu(i,n,sg)[0],i=Yo(yn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=cr(n)}catch(v){throw v===aa?Po:v}else l=n;n=oe();var g=n.queue,m=g.dispatch;return r!==n.memoizedState&&(At.flags|=2048,ua(9,{destroy:void 0},Hv.bind(null,g,r),null)),[l,m,i]}function Hv(i,n){i.action=n}function lg(i){var n=oe(),r=Ht;if(r!==null)return og(n,r,i);oe(),n=n.memoizedState,r=oe();var l=r.queue.dispatch;return r.memoizedState=i,[n,l,!1]}function ua(i,n,r,l){return i={tag:i,create:r,deps:l,inst:n,next:null},n=At.updateQueue,n===null&&(n=Vo(),At.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=i.next=i:(l=r.next,r.next=i,i.next=l,n.lastEffect=i),i}function cg(){return oe().memoizedState}function Ko(i,n,r,l){var g=Ie();At.flags|=i,g.memoizedState=ua(1|n,{destroy:void 0},r,l===void 0?null:l)}function $o(i,n,r,l){var g=oe();l=l===void 0?null:l;var m=g.memoizedState.inst;Ht!==null&&l!==null&&cu(l,Ht.memoizedState.deps)?g.memoizedState=ua(n,m,r,l):(At.flags|=i,g.memoizedState=ua(1|n,m,r,l))}function ug(i,n){Ko(8390656,8,i,n)}function vu(i,n){$o(2048,8,i,n)}function jv(i){At.flags|=4;var n=At.updateQueue;if(n===null)n=Vo(),At.updateQueue=n,n.events=[i];else{var r=n.events;r===null?n.events=[i]:r.push(i)}}function hg(i){var n=oe().memoizedState;return jv({ref:n,nextImpl:i}),function(){if((Bt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function dg(i,n){return $o(4,2,i,n)}function fg(i,n){return $o(4,4,i,n)}function gg(i,n){if(typeof n=="function"){i=i();var r=n(i);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return i=i(),n.current=i,function(){n.current=null}}function pg(i,n,r){r=r!=null?r.concat([i]):null,$o(4,4,gg.bind(null,n,i),r)}function Au(){}function mg(i,n){var r=oe();n=n===void 0?null:n;var l=r.memoizedState;return n!==null&&cu(n,l[1])?l[0]:(r.memoizedState=[i,n],i)}function bg(i,n){var r=oe();n=n===void 0?null:n;var l=r.memoizedState;if(n!==null&&cu(n,l[1]))return l[0];if(l=i(),_s){yi(!0);try{i()}finally{yi(!1)}}return r.memoizedState=[l,n],l}function Su(i,n,r){return r===void 0||(bn&1073741824)!==0&&(xt&261930)===0?i.memoizedState=n:(i.memoizedState=r,i=yp(),At.lanes|=i,Vn|=i,r)}function yg(i,n,r,l){return ri(r,n)?r:oa.current!==null?(i=Su(i,r,l),ri(i,n)||(he=!0),i):(bn&42)===0||(bn&1073741824)!==0&&(xt&261930)===0?(he=!0,i.memoizedState=r):(i=yp(),At.lanes|=i,Vn|=i,n)}function vg(i,n,r,l,g){var m=P.p;P.p=m!==0&&8>m?m:8;var v=B.T,_={};B.T=_,_u(i,!1,n,r);try{var M=g(),I=B.S;if(I!==null&&I(_,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var V=Pv(M,l);ur(i,n,V,di(i))}else ur(i,n,l,di(i))}catch($){ur(i,n,{then:function(){},status:"rejected",reason:$},di())}finally{P.p=m,v!==null&&_.types!==null&&(v.types=_.types),B.T=v}}function Gv(){}function wu(i,n,r,l){if(i.tag!==5)throw Error(s(476));var g=Ag(i).queue;vg(i,g,n,W,r===null?Gv:function(){return Sg(i),r(l)})}function Ag(i){var n=i.memoizedState;if(n!==null)return n;n={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:W},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:r},next:null},i.memoizedState=n,i=i.alternate,i!==null&&(i.memoizedState=n),n}function Sg(i){var n=Ag(i);n.next===null&&(n=i.alternate.memoizedState),ur(i,n.next.queue,{},di())}function Eu(){return Re(xr)}function wg(){return oe().memoizedState}function Eg(){return oe().memoizedState}function qv(i){for(var n=i.return;n!==null;){switch(n.tag){case 24:case 3:var r=di();i=Un(r);var l=In(n,i,r);l!==null&&(ei(l,n,r),ar(l,n,r)),n={cache:Zc()},i.payload=n;return}n=n.return}}function Vv(i,n,r){var l=di();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Qo(i)?Cg(n,r):(r=Hc(i,n,r,l),r!==null&&(ei(r,i,l),Tg(r,n,l)))}function _g(i,n,r){var l=di();ur(i,n,r,l)}function ur(i,n,r,l){var g={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Qo(i))Cg(n,g);else{var m=i.alternate;if(i.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var v=n.lastRenderedState,_=m(v,r);if(g.hasEagerState=!0,g.eagerState=_,ri(_,v))return Ro(i,n,g,0),Vt===null&&Mo(),!1}catch{}if(r=Hc(i,n,g,l),r!==null)return ei(r,i,l),Tg(r,n,l),!0}return!1}function _u(i,n,r,l){if(l={lane:2,revertLane:ih(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Qo(i)){if(n)throw Error(s(479))}else n=Hc(i,r,l,2),n!==null&&ei(n,i,2)}function Qo(i){var n=i.alternate;return i===At||n!==null&&n===At}function Cg(i,n){la=Go=!0;var r=i.pending;r===null?n.next=n:(n.next=r.next,r.next=n),i.pending=n}function Tg(i,n,r){if((r&4194048)!==0){var l=n.lanes;l&=i.pendingLanes,r|=l,n.lanes=r,ai(i,r)}}var hr={readContext:Re,use:Xo,useCallback:ee,useContext:ee,useEffect:ee,useImperativeHandle:ee,useLayoutEffect:ee,useInsertionEffect:ee,useMemo:ee,useReducer:ee,useRef:ee,useState:ee,useDebugValue:ee,useDeferredValue:ee,useTransition:ee,useSyncExternalStore:ee,useId:ee,useHostTransitionStatus:ee,useFormState:ee,useActionState:ee,useOptimistic:ee,useMemoCache:ee,useCacheRefresh:ee};hr.useEffectEvent=ee;var xg={readContext:Re,use:Xo,useCallback:function(i,n){return Ie().memoizedState=[i,n===void 0?null:n],i},useContext:Re,useEffect:ug,useImperativeHandle:function(i,n,r){r=r!=null?r.concat([i]):null,Ko(4194308,4,gg.bind(null,n,i),r)},useLayoutEffect:function(i,n){return Ko(4194308,4,i,n)},useInsertionEffect:function(i,n){Ko(4,2,i,n)},useMemo:function(i,n){var r=Ie();n=n===void 0?null:n;var l=i();if(_s){yi(!0);try{i()}finally{yi(!1)}}return r.memoizedState=[l,n],l},useReducer:function(i,n,r){var l=Ie();if(r!==void 0){var g=r(n);if(_s){yi(!0);try{r(n)}finally{yi(!1)}}}else g=n;return l.memoizedState=l.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},l.queue=i,i=i.dispatch=Vv.bind(null,At,i),[l.memoizedState,i]},useRef:function(i){var n=Ie();return i={current:i},n.memoizedState=i},useState:function(i){i=bu(i);var n=i.queue,r=_g.bind(null,At,n);return n.dispatch=r,[i.memoizedState,r]},useDebugValue:Au,useDeferredValue:function(i,n){var r=Ie();return Su(r,i,n)},useTransition:function(){var i=bu(!1);return i=vg.bind(null,At,i.queue,!0,!1),Ie().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,n,r){var l=At,g=Ie();if(Mt){if(r===void 0)throw Error(s(407));r=r()}else{if(r=n(),Vt===null)throw Error(s(349));(xt&127)!==0||Kf(l,n,r)}g.memoizedState=r;var m={value:r,getSnapshot:n};return g.queue=m,ug(Qf.bind(null,l,m,i),[i]),l.flags|=2048,ua(9,{destroy:void 0},$f.bind(null,l,m,r,n),null),r},useId:function(){var i=Ie(),n=Vt.identifierPrefix;if(Mt){var r=Qi,l=$i;r=(l&~(1<<32-ze(l)-1)).toString(32)+r,n="_"+n+"R_"+r,r=qo++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=Fv++,n="_"+n+"r_"+r.toString(32)+"_";return i.memoizedState=n},useHostTransitionStatus:Eu,useFormState:ag,useActionState:ag,useOptimistic:function(i){var n=Ie();n.memoizedState=n.baseState=i;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=_u.bind(null,At,!0,r),r.dispatch=n,[i,n]},useMemoCache:gu,useCacheRefresh:function(){return Ie().memoizedState=qv.bind(null,At)},useEffectEvent:function(i){var n=Ie(),r={impl:i};return n.memoizedState=r,function(){if((Bt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},Cu={readContext:Re,use:Xo,useCallback:mg,useContext:Re,useEffect:vu,useImperativeHandle:pg,useInsertionEffect:dg,useLayoutEffect:fg,useMemo:bg,useReducer:Yo,useRef:cg,useState:function(){return Yo(yn)},useDebugValue:Au,useDeferredValue:function(i,n){var r=oe();return yg(r,Ht.memoizedState,i,n)},useTransition:function(){var i=Yo(yn)[0],n=oe().memoizedState;return[typeof i=="boolean"?i:cr(i),n]},useSyncExternalStore:Yf,useId:wg,useHostTransitionStatus:Eu,useFormState:rg,useActionState:rg,useOptimistic:function(i,n){var r=oe();return Jf(r,Ht,i,n)},useMemoCache:gu,useCacheRefresh:Eg};Cu.useEffectEvent=hg;var Dg={readContext:Re,use:Xo,useCallback:mg,useContext:Re,useEffect:vu,useImperativeHandle:pg,useInsertionEffect:dg,useLayoutEffect:fg,useMemo:bg,useReducer:mu,useRef:cg,useState:function(){return mu(yn)},useDebugValue:Au,useDeferredValue:function(i,n){var r=oe();return Ht===null?Su(r,i,n):yg(r,Ht.memoizedState,i,n)},useTransition:function(){var i=mu(yn)[0],n=oe().memoizedState;return[typeof i=="boolean"?i:cr(i),n]},useSyncExternalStore:Yf,useId:wg,useHostTransitionStatus:Eu,useFormState:lg,useActionState:lg,useOptimistic:function(i,n){var r=oe();return Ht!==null?Jf(r,Ht,i,n):(r.baseState=i,[i,r.queue.dispatch])},useMemoCache:gu,useCacheRefresh:Eg};Dg.useEffectEvent=hg;function Tu(i,n,r,l){n=i.memoizedState,r=r(l,n),r=r==null?n:b({},n,r),i.memoizedState=r,i.lanes===0&&(i.updateQueue.baseState=r)}var xu={enqueueSetState:function(i,n,r){i=i._reactInternals;var l=di(),g=Un(l);g.payload=n,r!=null&&(g.callback=r),n=In(i,g,l),n!==null&&(ei(n,i,l),ar(n,i,l))},enqueueReplaceState:function(i,n,r){i=i._reactInternals;var l=di(),g=Un(l);g.tag=1,g.payload=n,r!=null&&(g.callback=r),n=In(i,g,l),n!==null&&(ei(n,i,l),ar(n,i,l))},enqueueForceUpdate:function(i,n){i=i._reactInternals;var r=di(),l=Un(r);l.tag=2,n!=null&&(l.callback=n),n=In(i,l,r),n!==null&&(ei(n,i,r),ar(n,i,r))}};function Mg(i,n,r,l,g,m,v){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(l,m,v):n.prototype&&n.prototype.isPureReactComponent?!Wa(r,l)||!Wa(g,m):!0}function Rg(i,n,r,l){i=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,l),n.state!==i&&xu.enqueueReplaceState(n,n.state,null)}function Cs(i,n){var r=n;if("ref"in n){r={};for(var l in n)l!=="ref"&&(r[l]=n[l])}if(i=i.defaultProps){r===n&&(r=b({},r));for(var g in i)r[g]===void 0&&(r[g]=i[g])}return r}function Og(i){Do(i)}function Lg(i){console.error(i)}function Ng(i){Do(i)}function Wo(i,n){try{var r=i.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function kg(i,n,r){try{var l=i.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Du(i,n,r){return r=Un(r),r.tag=3,r.payload={element:null},r.callback=function(){Wo(i,n)},r}function Bg(i){return i=Un(i),i.tag=3,i}function zg(i,n,r,l){var g=r.type.getDerivedStateFromError;if(typeof g=="function"){var m=l.value;i.payload=function(){return g(m)},i.callback=function(){kg(n,r,l)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(i.callback=function(){kg(n,r,l),typeof g!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var _=l.stack;this.componentDidCatch(l.value,{componentStack:_!==null?_:""})})}function Xv(i,n,r,l,g){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=r.alternate,n!==null&&ia(n,r,g,!0),r=li.current,r!==null){switch(r.tag){case 31:case 13:return Mi===null?cl():r.alternate===null&&ie===0&&(ie=3),r.flags&=-257,r.flags|=65536,r.lanes=g,l===Fo?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([l]):n.add(l),Ju(i,l,g)),!1;case 22:return r.flags|=65536,l===Fo?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([l]):r.add(l)),Ju(i,l,g)),!1}throw Error(s(435,r.tag))}return Ju(i,l,g),cl(),!1}if(Mt)return n=li.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=g,l!==Yc&&(i=Error(s(422),{cause:l}),tr(Ci(i,r)))):(l!==Yc&&(n=Error(s(423),{cause:l}),tr(Ci(n,r))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,l=Ci(l,r),g=Du(i.stateNode,l,g),su(i,g),ie!==4&&(ie=2)),!1;var m=Error(s(520),{cause:l});if(m=Ci(m,r),vr===null?vr=[m]:vr.push(m),ie!==4&&(ie=2),n===null)return!0;l=Ci(l,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,i=g&-g,r.lanes|=i,i=Du(r.stateNode,l,i),su(r,i),!1;case 1:if(n=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Xn===null||!Xn.has(m))))return r.flags|=65536,g&=-g,r.lanes|=g,g=Bg(g),zg(g,i,r,l),su(r,g),!1}r=r.return}while(r!==null);return!1}var Mu=Error(s(461)),he=!1;function Oe(i,n,r,l){n.child=i===null?If(n,null,r,l):Es(n,i.child,r,l)}function Pg(i,n,r,l,g){r=r.render;var m=n.ref;if("ref"in l){var v={};for(var _ in l)_!=="ref"&&(v[_]=l[_])}else v=l;return vs(n),l=uu(i,n,r,v,m,g),_=hu(),i!==null&&!he?(du(i,n,g),vn(i,n,g)):(Mt&&_&&Vc(n),n.flags|=1,Oe(i,n,l,g),n.child)}function Fg(i,n,r,l,g){if(i===null){var m=r.type;return typeof m=="function"&&!jc(m)&&m.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=m,Ug(i,n,m,l,g)):(i=Lo(r.type,null,l,n,n.mode,g),i.ref=n.ref,i.return=n,n.child=i)}if(m=i.child,!Pu(i,g)){var v=m.memoizedProps;if(r=r.compare,r=r!==null?r:Wa,r(v,l)&&i.ref===n.ref)return vn(i,n,g)}return n.flags|=1,i=fn(m,l),i.ref=n.ref,i.return=n,n.child=i}function Ug(i,n,r,l,g){if(i!==null){var m=i.memoizedProps;if(Wa(m,l)&&i.ref===n.ref)if(he=!1,n.pendingProps=l=m,Pu(i,g))(i.flags&131072)!==0&&(he=!0);else return n.lanes=i.lanes,vn(i,n,g)}return Ru(i,n,r,l,g)}function Ig(i,n,r,l){var g=l.children,m=i!==null?i.memoizedState:null;if(i===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,i!==null){for(l=n.child=i.child,g=0;l!==null;)g=g|l.lanes|l.childLanes,l=l.sibling;l=g&~m}else l=0,n.child=null;return Hg(i,n,m,r,l)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},i!==null&&zo(n,m!==null?m.cachePool:null),m!==null?Gf(n,m):ru(),qf(n);else return l=n.lanes=536870912,Hg(i,n,m!==null?m.baseLanes|r:r,r,l)}else m!==null?(zo(n,m.cachePool),Gf(n,m),jn(),n.memoizedState=null):(i!==null&&zo(n,null),ru(),jn());return Oe(i,n,g,r),n.child}function dr(i,n){return i!==null&&i.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Hg(i,n,r,l,g){var m=tu();return m=m===null?null:{parent:ce._currentValue,pool:m},n.memoizedState={baseLanes:r,cachePool:m},i!==null&&zo(n,null),ru(),qf(n),i!==null&&ia(i,n,l,!0),n.childLanes=g,null}function Zo(i,n){return n=tl({mode:n.mode,children:n.children},i.mode),n.ref=i.ref,i.child=n,n.return=i,n}function jg(i,n,r){return Es(n,i.child,null,r),i=Zo(n,n.pendingProps),i.flags|=2,ci(n),n.memoizedState=null,i}function Yv(i,n,r){var l=n.pendingProps,g=(n.flags&128)!==0;if(n.flags&=-129,i===null){if(Mt){if(l.mode==="hidden")return i=Zo(n,l),n.lanes=536870912,dr(null,i);if(lu(n),(i=Yt)?(i=tm(i,Di),i=i!==null&&i.data==="&"?i:null,i!==null&&(n.memoizedState={dehydrated:i,treeContext:kn!==null?{id:$i,overflow:Qi}:null,retryLane:536870912,hydrationErrors:null},r=Cf(i),r.return=n,n.child=r,Me=n,Yt=null)):i=null,i===null)throw zn(n);return n.lanes=536870912,null}return Zo(n,l)}var m=i.memoizedState;if(m!==null){var v=m.dehydrated;if(lu(n),g)if(n.flags&256)n.flags&=-257,n=jg(i,n,r);else if(n.memoizedState!==null)n.child=i.child,n.flags|=128,n=null;else throw Error(s(558));else if(he||ia(i,n,r,!1),g=(r&i.childLanes)!==0,he||g){if(l=Vt,l!==null&&(v=Ai(l,r),v!==0&&v!==m.retryLane))throw m.retryLane=v,ps(i,v),ei(l,i,v),Mu;cl(),n=jg(i,n,r)}else i=m.treeContext,Yt=Ri(v.nextSibling),Me=n,Mt=!0,Bn=null,Di=!1,i!==null&&Df(n,i),n=Zo(n,l),n.flags|=4096;return n}return i=fn(i.child,{mode:l.mode,children:l.children}),i.ref=n.ref,n.child=i,i.return=n,i}function Jo(i,n){var r=n.ref;if(r===null)i!==null&&i.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(i===null||i.ref!==r)&&(n.flags|=4194816)}}function Ru(i,n,r,l,g){return vs(n),r=uu(i,n,r,l,void 0,g),l=hu(),i!==null&&!he?(du(i,n,g),vn(i,n,g)):(Mt&&l&&Vc(n),n.flags|=1,Oe(i,n,r,g),n.child)}function Gg(i,n,r,l,g,m){return vs(n),n.updateQueue=null,r=Xf(n,l,r,g),Vf(i),l=hu(),i!==null&&!he?(du(i,n,m),vn(i,n,m)):(Mt&&l&&Vc(n),n.flags|=1,Oe(i,n,r,m),n.child)}function qg(i,n,r,l,g){if(vs(n),n.stateNode===null){var m=Zs,v=r.contextType;typeof v=="object"&&v!==null&&(m=Re(v)),m=new r(l,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=xu,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=l,m.state=n.memoizedState,m.refs={},iu(n),v=r.contextType,m.context=typeof v=="object"&&v!==null?Re(v):Zs,m.state=n.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(Tu(n,r,v,l),m.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&xu.enqueueReplaceState(m,m.state,null),or(n,l,m,g),rr(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(i===null){m=n.stateNode;var _=n.memoizedProps,M=Cs(r,_);m.props=M;var I=m.context,V=r.contextType;v=Zs,typeof V=="object"&&V!==null&&(v=Re(V));var $=r.getDerivedStateFromProps;V=typeof $=="function"||typeof m.getSnapshotBeforeUpdate=="function",_=n.pendingProps!==_,V||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_||I!==v)&&Rg(n,m,l,v),Fn=!1;var H=n.memoizedState;m.state=H,or(n,l,m,g),rr(),I=n.memoizedState,_||H!==I||Fn?(typeof $=="function"&&(Tu(n,r,$,l),I=n.memoizedState),(M=Fn||Mg(n,r,M,l,H,I,v))?(V||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=I),m.props=l,m.state=I,m.context=v,l=M):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{m=n.stateNode,nu(i,n),v=n.memoizedProps,V=Cs(r,v),m.props=V,$=n.pendingProps,H=m.context,I=r.contextType,M=Zs,typeof I=="object"&&I!==null&&(M=Re(I)),_=r.getDerivedStateFromProps,(I=typeof _=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==$||H!==M)&&Rg(n,m,l,M),Fn=!1,H=n.memoizedState,m.state=H,or(n,l,m,g),rr();var G=n.memoizedState;v!==$||H!==G||Fn||i!==null&&i.dependencies!==null&&ko(i.dependencies)?(typeof _=="function"&&(Tu(n,r,_,l),G=n.memoizedState),(V=Fn||Mg(n,r,V,l,H,G,M)||i!==null&&i.dependencies!==null&&ko(i.dependencies))?(I||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,G,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,G,M)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===i.memoizedProps&&H===i.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===i.memoizedProps&&H===i.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=G),m.props=l,m.state=G,m.context=M,l=V):(typeof m.componentDidUpdate!="function"||v===i.memoizedProps&&H===i.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===i.memoizedProps&&H===i.memoizedState||(n.flags|=1024),l=!1)}return m=l,Jo(i,n),l=(n.flags&128)!==0,m||l?(m=n.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,i!==null&&l?(n.child=Es(n,i.child,null,g),n.child=Es(n,null,r,g)):Oe(i,n,r,g),n.memoizedState=m.state,i=n.child):i=vn(i,n,g),i}function Vg(i,n,r,l){return bs(),n.flags|=256,Oe(i,n,r,l),n.child}var Ou={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lu(i){return{baseLanes:i,cachePool:kf()}}function Nu(i,n,r){return i=i!==null?i.childLanes&~r:0,n&&(i|=hi),i}function Xg(i,n,r){var l=n.pendingProps,g=!1,m=(n.flags&128)!==0,v;if((v=m)||(v=i!==null&&i.memoizedState===null?!1:(re.current&2)!==0),v&&(g=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,i===null){if(Mt){if(g?Hn(n):jn(),(i=Yt)?(i=tm(i,Di),i=i!==null&&i.data!=="&"?i:null,i!==null&&(n.memoizedState={dehydrated:i,treeContext:kn!==null?{id:$i,overflow:Qi}:null,retryLane:536870912,hydrationErrors:null},r=Cf(i),r.return=n,n.child=r,Me=n,Yt=null)):i=null,i===null)throw zn(n);return ph(i)?n.lanes=32:n.lanes=536870912,null}var _=l.children;return l=l.fallback,g?(jn(),g=n.mode,_=tl({mode:"hidden",children:_},g),l=ms(l,g,r,null),_.return=n,l.return=n,_.sibling=l,n.child=_,l=n.child,l.memoizedState=Lu(r),l.childLanes=Nu(i,v,r),n.memoizedState=Ou,dr(null,l)):(Hn(n),ku(n,_))}var M=i.memoizedState;if(M!==null&&(_=M.dehydrated,_!==null)){if(m)n.flags&256?(Hn(n),n.flags&=-257,n=Bu(i,n,r)):n.memoizedState!==null?(jn(),n.child=i.child,n.flags|=128,n=null):(jn(),_=l.fallback,g=n.mode,l=tl({mode:"visible",children:l.children},g),_=ms(_,g,r,null),_.flags|=2,l.return=n,_.return=n,l.sibling=_,n.child=l,Es(n,i.child,null,r),l=n.child,l.memoizedState=Lu(r),l.childLanes=Nu(i,v,r),n.memoizedState=Ou,n=dr(null,l));else if(Hn(n),ph(_)){if(v=_.nextSibling&&_.nextSibling.dataset,v)var I=v.dgst;v=I,l=Error(s(419)),l.stack="",l.digest=v,tr({value:l,source:null,stack:null}),n=Bu(i,n,r)}else if(he||ia(i,n,r,!1),v=(r&i.childLanes)!==0,he||v){if(v=Vt,v!==null&&(l=Ai(v,r),l!==0&&l!==M.retryLane))throw M.retryLane=l,ps(i,l),ei(v,i,l),Mu;gh(_)||cl(),n=Bu(i,n,r)}else gh(_)?(n.flags|=192,n.child=i.child,n=null):(i=M.treeContext,Yt=Ri(_.nextSibling),Me=n,Mt=!0,Bn=null,Di=!1,i!==null&&Df(n,i),n=ku(n,l.children),n.flags|=4096);return n}return g?(jn(),_=l.fallback,g=n.mode,M=i.child,I=M.sibling,l=fn(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,I!==null?_=fn(I,_):(_=ms(_,g,r,null),_.flags|=2),_.return=n,l.return=n,l.sibling=_,n.child=l,dr(null,l),l=n.child,_=i.child.memoizedState,_===null?_=Lu(r):(g=_.cachePool,g!==null?(M=ce._currentValue,g=g.parent!==M?{parent:M,pool:M}:g):g=kf(),_={baseLanes:_.baseLanes|r,cachePool:g}),l.memoizedState=_,l.childLanes=Nu(i,v,r),n.memoizedState=Ou,dr(i.child,l)):(Hn(n),r=i.child,i=r.sibling,r=fn(r,{mode:"visible",children:l.children}),r.return=n,r.sibling=null,i!==null&&(v=n.deletions,v===null?(n.deletions=[i],n.flags|=16):v.push(i)),n.child=r,n.memoizedState=null,r)}function ku(i,n){return n=tl({mode:"visible",children:n},i.mode),n.return=i,i.child=n}function tl(i,n){return i=oi(22,i,null,n),i.lanes=0,i}function Bu(i,n,r){return Es(n,i.child,null,r),i=ku(n,n.pendingProps.children),i.flags|=2,n.memoizedState=null,i}function Yg(i,n,r){i.lanes|=n;var l=i.alternate;l!==null&&(l.lanes|=n),Qc(i.return,n,r)}function zu(i,n,r,l,g,m){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:g,treeForkCount:m}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=r,v.tailMode=g,v.treeForkCount=m)}function Kg(i,n,r){var l=n.pendingProps,g=l.revealOrder,m=l.tail;l=l.children;var v=re.current,_=(v&2)!==0;if(_?(v=v&1|2,n.flags|=128):v&=1,K(re,v),Oe(i,n,l,r),l=Mt?Ja:0,!_&&i!==null&&(i.flags&128)!==0)t:for(i=n.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Yg(i,r,n);else if(i.tag===19)Yg(i,r,n);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(r=n.child,g=null;r!==null;)i=r.alternate,i!==null&&jo(i)===null&&(g=r),r=r.sibling;r=g,r===null?(g=n.child,n.child=null):(g=r.sibling,r.sibling=null),zu(n,!1,g,r,m,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,g=n.child,n.child=null;g!==null;){if(i=g.alternate,i!==null&&jo(i)===null){n.child=g;break}i=g.sibling,g.sibling=r,r=g,g=i}zu(n,!0,r,null,m,l);break;case"together":zu(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function vn(i,n,r){if(i!==null&&(n.dependencies=i.dependencies),Vn|=n.lanes,(r&n.childLanes)===0)if(i!==null){if(ia(i,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(i!==null&&n.child!==i.child)throw Error(s(153));if(n.child!==null){for(i=n.child,r=fn(i,i.pendingProps),n.child=r,r.return=n;i.sibling!==null;)i=i.sibling,r=r.sibling=fn(i,i.pendingProps),r.return=n;r.sibling=null}return n.child}function Pu(i,n){return(i.lanes&n)!==0?!0:(i=i.dependencies,!!(i!==null&&ko(i)))}function Kv(i,n,r){switch(n.tag){case 3:Ft(n,n.stateNode.containerInfo),Pn(n,ce,i.memoizedState.cache),bs();break;case 27:case 5:Tt(n);break;case 4:Ft(n,n.stateNode.containerInfo);break;case 10:Pn(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,lu(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Hn(n),n.flags|=128,null):(r&n.child.childLanes)!==0?Xg(i,n,r):(Hn(n),i=vn(i,n,r),i!==null?i.sibling:null);Hn(n);break;case 19:var g=(i.flags&128)!==0;if(l=(r&n.childLanes)!==0,l||(ia(i,n,r,!1),l=(r&n.childLanes)!==0),g){if(l)return Kg(i,n,r);n.flags|=128}if(g=n.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),K(re,re.current),l)break;return null;case 22:return n.lanes=0,Ig(i,n,r,n.pendingProps);case 24:Pn(n,ce,i.memoizedState.cache)}return vn(i,n,r)}function $g(i,n,r){if(i!==null)if(i.memoizedProps!==n.pendingProps)he=!0;else{if(!Pu(i,r)&&(n.flags&128)===0)return he=!1,Kv(i,n,r);he=(i.flags&131072)!==0}else he=!1,Mt&&(n.flags&1048576)!==0&&xf(n,Ja,n.index);switch(n.lanes=0,n.tag){case 16:t:{var l=n.pendingProps;if(i=Ss(n.elementType),n.type=i,typeof i=="function")jc(i)?(l=Cs(i,l),n.tag=1,n=qg(null,n,i,l,r)):(n.tag=0,n=Ru(null,n,i,l,r));else{if(i!=null){var g=i.$$typeof;if(g===O){n.tag=11,n=Pg(null,n,i,l,r);break t}else if(g===k){n.tag=14,n=Fg(null,n,i,l,r);break t}}throw n=lt(i)||i,Error(s(306,n,""))}}return n;case 0:return Ru(i,n,n.type,n.pendingProps,r);case 1:return l=n.type,g=Cs(l,n.pendingProps),qg(i,n,l,g,r);case 3:t:{if(Ft(n,n.stateNode.containerInfo),i===null)throw Error(s(387));l=n.pendingProps;var m=n.memoizedState;g=m.element,nu(i,n),or(n,l,null,r);var v=n.memoizedState;if(l=v.cache,Pn(n,ce,l),l!==m.cache&&Wc(n,[ce],r,!0),rr(),l=v.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=Vg(i,n,l,r);break t}else if(l!==g){g=Ci(Error(s(424)),n),tr(g),n=Vg(i,n,l,r);break t}else for(i=n.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,Yt=Ri(i.firstChild),Me=n,Mt=!0,Bn=null,Di=!0,r=If(n,null,l,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(bs(),l===g){n=vn(i,n,r);break t}Oe(i,n,l,r)}n=n.child}return n;case 26:return Jo(i,n),i===null?(r=rm(n.type,null,n.pendingProps,null))?n.memoizedState=r:Mt||(r=n.type,i=n.pendingProps,l=ml(ot.current).createElement(r),l[De]=n,l[$e]=i,Le(l,r,i),Ee(l),n.stateNode=l):n.memoizedState=rm(n.type,i.memoizedProps,n.pendingProps,i.memoizedState),null;case 27:return Tt(n),i===null&&Mt&&(l=n.stateNode=nm(n.type,n.pendingProps,ot.current),Me=n,Di=!0,g=Yt,Qn(n.type)?(mh=g,Yt=Ri(l.firstChild)):Yt=g),Oe(i,n,n.pendingProps.children,r),Jo(i,n),i===null&&(n.flags|=4194304),n.child;case 5:return i===null&&Mt&&((g=l=Yt)&&(l=_0(l,n.type,n.pendingProps,Di),l!==null?(n.stateNode=l,Me=n,Yt=Ri(l.firstChild),Di=!1,g=!0):g=!1),g||zn(n)),Tt(n),g=n.type,m=n.pendingProps,v=i!==null?i.memoizedProps:null,l=m.children,hh(g,m)?l=null:v!==null&&hh(g,v)&&(n.flags|=32),n.memoizedState!==null&&(g=uu(i,n,Uv,null,null,r),xr._currentValue=g),Jo(i,n),Oe(i,n,l,r),n.child;case 6:return i===null&&Mt&&((i=r=Yt)&&(r=C0(r,n.pendingProps,Di),r!==null?(n.stateNode=r,Me=n,Yt=null,i=!0):i=!1),i||zn(n)),null;case 13:return Xg(i,n,r);case 4:return Ft(n,n.stateNode.containerInfo),l=n.pendingProps,i===null?n.child=Es(n,null,l,r):Oe(i,n,l,r),n.child;case 11:return Pg(i,n,n.type,n.pendingProps,r);case 7:return Oe(i,n,n.pendingProps,r),n.child;case 8:return Oe(i,n,n.pendingProps.children,r),n.child;case 12:return Oe(i,n,n.pendingProps.children,r),n.child;case 10:return l=n.pendingProps,Pn(n,n.type,l.value),Oe(i,n,l.children,r),n.child;case 9:return g=n.type._context,l=n.pendingProps.children,vs(n),g=Re(g),l=l(g),n.flags|=1,Oe(i,n,l,r),n.child;case 14:return Fg(i,n,n.type,n.pendingProps,r);case 15:return Ug(i,n,n.type,n.pendingProps,r);case 19:return Kg(i,n,r);case 31:return Yv(i,n,r);case 22:return Ig(i,n,r,n.pendingProps);case 24:return vs(n),l=Re(ce),i===null?(g=tu(),g===null&&(g=Vt,m=Zc(),g.pooledCache=m,m.refCount++,m!==null&&(g.pooledCacheLanes|=r),g=m),n.memoizedState={parent:l,cache:g},iu(n),Pn(n,ce,g)):((i.lanes&r)!==0&&(nu(i,n),or(n,null,null,r),rr()),g=i.memoizedState,m=n.memoizedState,g.parent!==l?(g={parent:l,cache:l},n.memoizedState=g,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=g),Pn(n,ce,l)):(l=m.cache,Pn(n,ce,l),l!==g.cache&&Wc(n,[ce],r,!0))),Oe(i,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function An(i){i.flags|=4}function Fu(i,n,r,l,g){if((n=(i.mode&32)!==0)&&(n=!1),n){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(wp())i.flags|=8192;else throw ws=Fo,eu}else i.flags&=-16777217}function Qg(i,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!hm(n))if(wp())i.flags|=8192;else throw ws=Fo,eu}function el(i,n){n!==null&&(i.flags|=4),i.flags&16384&&(n=i.tag!==22?Pe():536870912,i.lanes|=n,ga|=n)}function fr(i,n){if(!Mt)switch(i.tailMode){case"hidden":n=i.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?i.tail=null:r.sibling=null;break;case"collapsed":r=i.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n||i.tail===null?i.tail=null:i.tail.sibling=null:l.sibling=null}}function Kt(i){var n=i.alternate!==null&&i.alternate.child===i.child,r=0,l=0;if(n)for(var g=i.child;g!==null;)r|=g.lanes|g.childLanes,l|=g.subtreeFlags&65011712,l|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)r|=g.lanes|g.childLanes,l|=g.subtreeFlags,l|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=l,i.childLanes=r,n}function $v(i,n,r){var l=n.pendingProps;switch(Xc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(n),null;case 1:return Kt(n),null;case 3:return r=n.stateNode,l=null,i!==null&&(l=i.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),mn(ce),Et(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(i===null||i.child===null)&&(ea(n)?An(n):i===null||i.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Kc())),Kt(n),null;case 26:var g=n.type,m=n.memoizedState;return i===null?(An(n),m!==null?(Kt(n),Qg(n,m)):(Kt(n),Fu(n,g,null,l,r))):m?m!==i.memoizedState?(An(n),Kt(n),Qg(n,m)):(Kt(n),n.flags&=-16777217):(i=i.memoizedProps,i!==l&&An(n),Kt(n),Fu(n,g,i,l,r)),null;case 27:if(Ve(n),r=ot.current,g=n.type,i!==null&&n.stateNode!=null)i.memoizedProps!==l&&An(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return Kt(n),null}i=J.current,ea(n)?Mf(n):(i=nm(g,l,r),n.stateNode=i,An(n))}return Kt(n),null;case 5:if(Ve(n),g=n.type,i!==null&&n.stateNode!=null)i.memoizedProps!==l&&An(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return Kt(n),null}if(m=J.current,ea(n))Mf(n);else{var v=ml(ot.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?v.createElement(g,{is:l.is}):v.createElement(g)}}m[De]=n,m[$e]=l;t:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break t;for(;v.sibling===null;){if(v.return===null||v.return===n)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=m;t:switch(Le(m,g,l),g){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&An(n)}}return Kt(n),Fu(n,n.type,i===null?null:i.memoizedProps,n.pendingProps,r),null;case 6:if(i&&n.stateNode!=null)i.memoizedProps!==l&&An(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(s(166));if(i=ot.current,ea(n)){if(i=n.stateNode,r=n.memoizedProps,l=null,g=Me,g!==null)switch(g.tag){case 27:case 5:l=g.memoizedProps}i[De]=n,i=!!(i.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||Xp(i.nodeValue,r)),i||zn(n,!0)}else i=ml(i).createTextNode(l),i[De]=n,n.stateNode=i}return Kt(n),null;case 31:if(r=n.memoizedState,i===null||i.memoizedState!==null){if(l=ea(n),r!==null){if(i===null){if(!l)throw Error(s(318));if(i=n.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[De]=n}else bs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Kt(n),i=!1}else r=Kc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=r),i=!0;if(!i)return n.flags&256?(ci(n),n):(ci(n),null);if((n.flags&128)!==0)throw Error(s(558))}return Kt(n),null;case 13:if(l=n.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=ea(n),l!==null&&l.dehydrated!==null){if(i===null){if(!g)throw Error(s(318));if(g=n.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[De]=n}else bs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Kt(n),g=!1}else g=Kc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return n.flags&256?(ci(n),n):(ci(n),null)}return ci(n),(n.flags&128)!==0?(n.lanes=r,n):(r=l!==null,i=i!==null&&i.memoizedState!==null,r&&(l=n.child,g=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(g=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==g&&(l.flags|=2048)),r!==i&&r&&(n.child.flags|=8192),el(n,n.updateQueue),Kt(n),null);case 4:return Et(),i===null&&rh(n.stateNode.containerInfo),Kt(n),null;case 10:return mn(n.type),Kt(n),null;case 19:if(F(re),l=n.memoizedState,l===null)return Kt(n),null;if(g=(n.flags&128)!==0,m=l.rendering,m===null)if(g)fr(l,!1);else{if(ie!==0||i!==null&&(i.flags&128)!==0)for(i=n.child;i!==null;){if(m=jo(i),m!==null){for(n.flags|=128,fr(l,!1),i=m.updateQueue,n.updateQueue=i,el(n,i),n.subtreeFlags=0,i=r,r=n.child;r!==null;)_f(r,i),r=r.sibling;return K(re,re.current&1|2),Mt&&gn(n,l.treeForkCount),n.child}i=i.sibling}l.tail!==null&&Be()>rl&&(n.flags|=128,g=!0,fr(l,!1),n.lanes=4194304)}else{if(!g)if(i=jo(m),i!==null){if(n.flags|=128,g=!0,i=i.updateQueue,n.updateQueue=i,el(n,i),fr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Mt)return Kt(n),null}else 2*Be()-l.renderingStartTime>rl&&r!==536870912&&(n.flags|=128,g=!0,fr(l,!1),n.lanes=4194304);l.isBackwards?(m.sibling=n.child,n.child=m):(i=l.last,i!==null?i.sibling=m:n.child=m,l.last=m)}return l.tail!==null?(i=l.tail,l.rendering=i,l.tail=i.sibling,l.renderingStartTime=Be(),i.sibling=null,r=re.current,K(re,g?r&1|2:r&1),Mt&&gn(n,l.treeForkCount),i):(Kt(n),null);case 22:case 23:return ci(n),ou(),l=n.memoizedState!==null,i!==null?i.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(r&536870912)!==0&&(n.flags&128)===0&&(Kt(n),n.subtreeFlags&6&&(n.flags|=8192)):Kt(n),r=n.updateQueue,r!==null&&el(n,r.retryQueue),r=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==r&&(n.flags|=2048),i!==null&&F(As),null;case 24:return r=null,i!==null&&(r=i.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),mn(ce),Kt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function Qv(i,n){switch(Xc(n),n.tag){case 1:return i=n.flags,i&65536?(n.flags=i&-65537|128,n):null;case 3:return mn(ce),Et(),i=n.flags,(i&65536)!==0&&(i&128)===0?(n.flags=i&-65537|128,n):null;case 26:case 27:case 5:return Ve(n),null;case 31:if(n.memoizedState!==null){if(ci(n),n.alternate===null)throw Error(s(340));bs()}return i=n.flags,i&65536?(n.flags=i&-65537|128,n):null;case 13:if(ci(n),i=n.memoizedState,i!==null&&i.dehydrated!==null){if(n.alternate===null)throw Error(s(340));bs()}return i=n.flags,i&65536?(n.flags=i&-65537|128,n):null;case 19:return F(re),null;case 4:return Et(),null;case 10:return mn(n.type),null;case 22:case 23:return ci(n),ou(),i!==null&&F(As),i=n.flags,i&65536?(n.flags=i&-65537|128,n):null;case 24:return mn(ce),null;case 25:return null;default:return null}}function Wg(i,n){switch(Xc(n),n.tag){case 3:mn(ce),Et();break;case 26:case 27:case 5:Ve(n);break;case 4:Et();break;case 31:n.memoizedState!==null&&ci(n);break;case 13:ci(n);break;case 19:F(re);break;case 10:mn(n.type);break;case 22:case 23:ci(n),ou(),i!==null&&F(As);break;case 24:mn(ce)}}function gr(i,n){try{var r=n.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var g=l.next;r=g;do{if((r.tag&i)===i){l=void 0;var m=r.create,v=r.inst;l=m(),v.destroy=l}r=r.next}while(r!==g)}}catch(_){It(n,n.return,_)}}function Gn(i,n,r){try{var l=n.updateQueue,g=l!==null?l.lastEffect:null;if(g!==null){var m=g.next;l=m;do{if((l.tag&i)===i){var v=l.inst,_=v.destroy;if(_!==void 0){v.destroy=void 0,g=n;var M=r,I=_;try{I()}catch(V){It(g,M,V)}}}l=l.next}while(l!==m)}}catch(V){It(n,n.return,V)}}function Zg(i){var n=i.updateQueue;if(n!==null){var r=i.stateNode;try{jf(n,r)}catch(l){It(i,i.return,l)}}}function Jg(i,n,r){r.props=Cs(i.type,i.memoizedProps),r.state=i.memoizedState;try{r.componentWillUnmount()}catch(l){It(i,n,l)}}function pr(i,n){try{var r=i.ref;if(r!==null){switch(i.tag){case 26:case 27:case 5:var l=i.stateNode;break;case 30:l=i.stateNode;break;default:l=i.stateNode}typeof r=="function"?i.refCleanup=r(l):r.current=l}}catch(g){It(i,n,g)}}function Wi(i,n){var r=i.ref,l=i.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(g){It(i,n,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(g){It(i,n,g)}else r.current=null}function tp(i){var n=i.type,r=i.memoizedProps,l=i.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break t;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(g){It(i,i.return,g)}}function Uu(i,n,r){try{var l=i.stateNode;y0(l,i.type,r,n),l[$e]=n}catch(g){It(i,i.return,g)}}function ep(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Qn(i.type)||i.tag===4}function Iu(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||ep(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Qn(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Hu(i,n,r){var l=i.tag;if(l===5||l===6)i=i.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(i,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(i),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=hn));else if(l!==4&&(l===27&&Qn(i.type)&&(r=i.stateNode,n=null),i=i.child,i!==null))for(Hu(i,n,r),i=i.sibling;i!==null;)Hu(i,n,r),i=i.sibling}function il(i,n,r){var l=i.tag;if(l===5||l===6)i=i.stateNode,n?r.insertBefore(i,n):r.appendChild(i);else if(l!==4&&(l===27&&Qn(i.type)&&(r=i.stateNode),i=i.child,i!==null))for(il(i,n,r),i=i.sibling;i!==null;)il(i,n,r),i=i.sibling}function ip(i){var n=i.stateNode,r=i.memoizedProps;try{for(var l=i.type,g=n.attributes;g.length;)n.removeAttributeNode(g[0]);Le(n,l,r),n[De]=i,n[$e]=r}catch(m){It(i,i.return,m)}}var Sn=!1,de=!1,ju=!1,np=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Wv(i,n){if(i=i.containerInfo,ch=El,i=pf(i),Bc(i)){if("selectionStart"in i)var r={start:i.selectionStart,end:i.selectionEnd};else t:{r=(r=i.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var g=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break t}var v=0,_=-1,M=-1,I=0,V=0,$=i,H=null;e:for(;;){for(var G;$!==r||g!==0&&$.nodeType!==3||(_=v+g),$!==m||l!==0&&$.nodeType!==3||(M=v+l),$.nodeType===3&&(v+=$.nodeValue.length),(G=$.firstChild)!==null;)H=$,$=G;for(;;){if($===i)break e;if(H===r&&++I===g&&(_=v),H===m&&++V===l&&(M=v),(G=$.nextSibling)!==null)break;$=H,H=$.parentNode}$=G}r=_===-1||M===-1?null:{start:_,end:M}}else r=null}r=r||{start:0,end:0}}else r=null;for(uh={focusedElem:i,selectionRange:r},El=!1,_e=n;_e!==null;)if(n=_e,i=n.child,(n.subtreeFlags&1028)!==0&&i!==null)i.return=n,_e=i;else for(;_e!==null;){switch(n=_e,m=n.alternate,i=n.flags,n.tag){case 0:if((i&4)!==0&&(i=n.updateQueue,i=i!==null?i.events:null,i!==null))for(r=0;r<i.length;r++)g=i[r],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&m!==null){i=void 0,r=n,g=m.memoizedProps,m=m.memoizedState,l=r.stateNode;try{var st=Cs(r.type,g);i=l.getSnapshotBeforeUpdate(st,m),l.__reactInternalSnapshotBeforeUpdate=i}catch(gt){It(r,r.return,gt)}}break;case 3:if((i&1024)!==0){if(i=n.stateNode.containerInfo,r=i.nodeType,r===9)fh(i);else if(r===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":fh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=n.sibling,i!==null){i.return=n.return,_e=i;break}_e=n.return}}function sp(i,n,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:En(i,r),l&4&&gr(5,r);break;case 1:if(En(i,r),l&4)if(i=r.stateNode,n===null)try{i.componentDidMount()}catch(v){It(r,r.return,v)}else{var g=Cs(r.type,n.memoizedProps);n=n.memoizedState;try{i.componentDidUpdate(g,n,i.__reactInternalSnapshotBeforeUpdate)}catch(v){It(r,r.return,v)}}l&64&&Zg(r),l&512&&pr(r,r.return);break;case 3:if(En(i,r),l&64&&(i=r.updateQueue,i!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{jf(i,n)}catch(v){It(r,r.return,v)}}break;case 27:n===null&&l&4&&ip(r);case 26:case 5:En(i,r),n===null&&l&4&&tp(r),l&512&&pr(r,r.return);break;case 12:En(i,r);break;case 31:En(i,r),l&4&&op(i,r);break;case 13:En(i,r),l&4&&lp(i,r),l&64&&(i=r.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(r=r0.bind(null,r),T0(i,r))));break;case 22:if(l=r.memoizedState!==null||Sn,!l){n=n!==null&&n.memoizedState!==null||de,g=Sn;var m=de;Sn=l,(de=n)&&!m?_n(i,r,(r.subtreeFlags&8772)!==0):En(i,r),Sn=g,de=m}break;case 30:break;default:En(i,r)}}function ap(i){var n=i.alternate;n!==null&&(i.alternate=null,ap(n)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(n=i.stateNode,n!==null&&yc(n)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var $t=null,We=!1;function wn(i,n,r){for(r=r.child;r!==null;)rp(i,n,r),r=r.sibling}function rp(i,n,r){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(us,r)}catch{}switch(r.tag){case 26:de||Wi(r,n),wn(i,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:de||Wi(r,n);var l=$t,g=We;Qn(r.type)&&($t=r.stateNode,We=!1),wn(i,n,r),_r(r.stateNode),$t=l,We=g;break;case 5:de||Wi(r,n);case 6:if(l=$t,g=We,$t=null,wn(i,n,r),$t=l,We=g,$t!==null)if(We)try{($t.nodeType===9?$t.body:$t.nodeName==="HTML"?$t.ownerDocument.body:$t).removeChild(r.stateNode)}catch(m){It(r,n,m)}else try{$t.removeChild(r.stateNode)}catch(m){It(r,n,m)}break;case 18:$t!==null&&(We?(i=$t,Zp(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.stateNode),wa(i)):Zp($t,r.stateNode));break;case 4:l=$t,g=We,$t=r.stateNode.containerInfo,We=!0,wn(i,n,r),$t=l,We=g;break;case 0:case 11:case 14:case 15:Gn(2,r,n),de||Gn(4,r,n),wn(i,n,r);break;case 1:de||(Wi(r,n),l=r.stateNode,typeof l.componentWillUnmount=="function"&&Jg(r,n,l)),wn(i,n,r);break;case 21:wn(i,n,r);break;case 22:de=(l=de)||r.memoizedState!==null,wn(i,n,r),de=l;break;default:wn(i,n,r)}}function op(i,n){if(n.memoizedState===null&&(i=n.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{wa(i)}catch(r){It(n,n.return,r)}}}function lp(i,n){if(n.memoizedState===null&&(i=n.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{wa(i)}catch(r){It(n,n.return,r)}}function Zv(i){switch(i.tag){case 31:case 13:case 19:var n=i.stateNode;return n===null&&(n=i.stateNode=new np),n;case 22:return i=i.stateNode,n=i._retryCache,n===null&&(n=i._retryCache=new np),n;default:throw Error(s(435,i.tag))}}function nl(i,n){var r=Zv(i);n.forEach(function(l){if(!r.has(l)){r.add(l);var g=o0.bind(null,i,l);l.then(g,g)}})}function Ze(i,n){var r=n.deletions;if(r!==null)for(var l=0;l<r.length;l++){var g=r[l],m=i,v=n,_=v;t:for(;_!==null;){switch(_.tag){case 27:if(Qn(_.type)){$t=_.stateNode,We=!1;break t}break;case 5:$t=_.stateNode,We=!1;break t;case 3:case 4:$t=_.stateNode.containerInfo,We=!0;break t}_=_.return}if($t===null)throw Error(s(160));rp(m,v,g),$t=null,We=!1,m=g.alternate,m!==null&&(m.return=null),g.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)cp(n,i),n=n.sibling}var Hi=null;function cp(i,n){var r=i.alternate,l=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Ze(n,i),Je(i),l&4&&(Gn(3,i,i.return),gr(3,i),Gn(5,i,i.return));break;case 1:Ze(n,i),Je(i),l&512&&(de||r===null||Wi(r,r.return)),l&64&&Sn&&(i=i.updateQueue,i!==null&&(l=i.callbacks,l!==null&&(r=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var g=Hi;if(Ze(n,i),Je(i),l&512&&(de||r===null||Wi(r,r.return)),l&4){var m=r!==null?r.memoizedState:null;if(l=i.memoizedState,r===null)if(l===null)if(i.stateNode===null){t:{l=i.type,r=i.memoizedProps,g=g.ownerDocument||g;e:switch(l){case"title":m=g.getElementsByTagName("title")[0],(!m||m[ja]||m[De]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=g.createElement(l),g.head.insertBefore(m,g.querySelector("head > title"))),Le(m,l,r),m[De]=i,Ee(m),l=m;break t;case"link":var v=cm("link","href",g).get(l+(r.href||""));if(v){for(var _=0;_<v.length;_++)if(m=v[_],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(_,1);break e}}m=g.createElement(l),Le(m,l,r),g.head.appendChild(m);break;case"meta":if(v=cm("meta","content",g).get(l+(r.content||""))){for(_=0;_<v.length;_++)if(m=v[_],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(_,1);break e}}m=g.createElement(l),Le(m,l,r),g.head.appendChild(m);break;default:throw Error(s(468,l))}m[De]=i,Ee(m),l=m}i.stateNode=l}else um(g,i.type,i.stateNode);else i.stateNode=lm(g,l,i.memoizedProps);else m!==l?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,l===null?um(g,i.type,i.stateNode):lm(g,l,i.memoizedProps)):l===null&&i.stateNode!==null&&Uu(i,i.memoizedProps,r.memoizedProps)}break;case 27:Ze(n,i),Je(i),l&512&&(de||r===null||Wi(r,r.return)),r!==null&&l&4&&Uu(i,i.memoizedProps,r.memoizedProps);break;case 5:if(Ze(n,i),Je(i),l&512&&(de||r===null||Wi(r,r.return)),i.flags&32){g=i.stateNode;try{Vs(g,"")}catch(st){It(i,i.return,st)}}l&4&&i.stateNode!=null&&(g=i.memoizedProps,Uu(i,g,r!==null?r.memoizedProps:g)),l&1024&&(ju=!0);break;case 6:if(Ze(n,i),Je(i),l&4){if(i.stateNode===null)throw Error(s(162));l=i.memoizedProps,r=i.stateNode;try{r.nodeValue=l}catch(st){It(i,i.return,st)}}break;case 3:if(vl=null,g=Hi,Hi=bl(n.containerInfo),Ze(n,i),Hi=g,Je(i),l&4&&r!==null&&r.memoizedState.isDehydrated)try{wa(n.containerInfo)}catch(st){It(i,i.return,st)}ju&&(ju=!1,up(i));break;case 4:l=Hi,Hi=bl(i.stateNode.containerInfo),Ze(n,i),Je(i),Hi=l;break;case 12:Ze(n,i),Je(i);break;case 31:Ze(n,i),Je(i),l&4&&(l=i.updateQueue,l!==null&&(i.updateQueue=null,nl(i,l)));break;case 13:Ze(n,i),Je(i),i.child.flags&8192&&i.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(al=Be()),l&4&&(l=i.updateQueue,l!==null&&(i.updateQueue=null,nl(i,l)));break;case 22:g=i.memoizedState!==null;var M=r!==null&&r.memoizedState!==null,I=Sn,V=de;if(Sn=I||g,de=V||M,Ze(n,i),de=V,Sn=I,Je(i),l&8192)t:for(n=i.stateNode,n._visibility=g?n._visibility&-2:n._visibility|1,g&&(r===null||M||Sn||de||Ts(i)),r=null,n=i;;){if(n.tag===5||n.tag===26){if(r===null){M=r=n;try{if(m=M.stateNode,g)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{_=M.stateNode;var $=M.memoizedProps.style,H=$!=null&&$.hasOwnProperty("display")?$.display:null;_.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(st){It(M,M.return,st)}}}else if(n.tag===6){if(r===null){M=n;try{M.stateNode.nodeValue=g?"":M.memoizedProps}catch(st){It(M,M.return,st)}}}else if(n.tag===18){if(r===null){M=n;try{var G=M.stateNode;g?Jp(G,!0):Jp(M.stateNode,!1)}catch(st){It(M,M.return,st)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===i)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=i.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,nl(i,r))));break;case 19:Ze(n,i),Je(i),l&4&&(l=i.updateQueue,l!==null&&(i.updateQueue=null,nl(i,l)));break;case 30:break;case 21:break;default:Ze(n,i),Je(i)}}function Je(i){var n=i.flags;if(n&2){try{for(var r,l=i.return;l!==null;){if(ep(l)){r=l;break}l=l.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var g=r.stateNode,m=Iu(i);il(i,m,g);break;case 5:var v=r.stateNode;r.flags&32&&(Vs(v,""),r.flags&=-33);var _=Iu(i);il(i,_,v);break;case 3:case 4:var M=r.stateNode.containerInfo,I=Iu(i);Hu(i,I,M);break;default:throw Error(s(161))}}catch(V){It(i,i.return,V)}i.flags&=-3}n&4096&&(i.flags&=-4097)}function up(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var n=i;up(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),i=i.sibling}}function En(i,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)sp(i,n.alternate,n),n=n.sibling}function Ts(i){for(i=i.child;i!==null;){var n=i;switch(n.tag){case 0:case 11:case 14:case 15:Gn(4,n,n.return),Ts(n);break;case 1:Wi(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&Jg(n,n.return,r),Ts(n);break;case 27:_r(n.stateNode);case 26:case 5:Wi(n,n.return),Ts(n);break;case 22:n.memoizedState===null&&Ts(n);break;case 30:Ts(n);break;default:Ts(n)}i=i.sibling}}function _n(i,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,g=i,m=n,v=m.flags;switch(m.tag){case 0:case 11:case 15:_n(g,m,r),gr(4,m);break;case 1:if(_n(g,m,r),l=m,g=l.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(I){It(l,l.return,I)}if(l=m,g=l.updateQueue,g!==null){var _=l.stateNode;try{var M=g.shared.hiddenCallbacks;if(M!==null)for(g.shared.hiddenCallbacks=null,g=0;g<M.length;g++)Hf(M[g],_)}catch(I){It(l,l.return,I)}}r&&v&64&&Zg(m),pr(m,m.return);break;case 27:ip(m);case 26:case 5:_n(g,m,r),r&&l===null&&v&4&&tp(m),pr(m,m.return);break;case 12:_n(g,m,r);break;case 31:_n(g,m,r),r&&v&4&&op(g,m);break;case 13:_n(g,m,r),r&&v&4&&lp(g,m);break;case 22:m.memoizedState===null&&_n(g,m,r),pr(m,m.return);break;case 30:break;default:_n(g,m,r)}n=n.sibling}}function Gu(i,n){var r=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),i=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),i!==r&&(i!=null&&i.refCount++,r!=null&&er(r))}function qu(i,n){i=null,n.alternate!==null&&(i=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==i&&(n.refCount++,i!=null&&er(i))}function ji(i,n,r,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)hp(i,n,r,l),n=n.sibling}function hp(i,n,r,l){var g=n.flags;switch(n.tag){case 0:case 11:case 15:ji(i,n,r,l),g&2048&&gr(9,n);break;case 1:ji(i,n,r,l);break;case 3:ji(i,n,r,l),g&2048&&(i=null,n.alternate!==null&&(i=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==i&&(n.refCount++,i!=null&&er(i)));break;case 12:if(g&2048){ji(i,n,r,l),i=n.stateNode;try{var m=n.memoizedProps,v=m.id,_=m.onPostCommit;typeof _=="function"&&_(v,n.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(M){It(n,n.return,M)}}else ji(i,n,r,l);break;case 31:ji(i,n,r,l);break;case 13:ji(i,n,r,l);break;case 23:break;case 22:m=n.stateNode,v=n.alternate,n.memoizedState!==null?m._visibility&2?ji(i,n,r,l):mr(i,n):m._visibility&2?ji(i,n,r,l):(m._visibility|=2,ha(i,n,r,l,(n.subtreeFlags&10256)!==0||!1)),g&2048&&Gu(v,n);break;case 24:ji(i,n,r,l),g&2048&&qu(n.alternate,n);break;default:ji(i,n,r,l)}}function ha(i,n,r,l,g){for(g=g&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=i,v=n,_=r,M=l,I=v.flags;switch(v.tag){case 0:case 11:case 15:ha(m,v,_,M,g),gr(8,v);break;case 23:break;case 22:var V=v.stateNode;v.memoizedState!==null?V._visibility&2?ha(m,v,_,M,g):mr(m,v):(V._visibility|=2,ha(m,v,_,M,g)),g&&I&2048&&Gu(v.alternate,v);break;case 24:ha(m,v,_,M,g),g&&I&2048&&qu(v.alternate,v);break;default:ha(m,v,_,M,g)}n=n.sibling}}function mr(i,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=i,l=n,g=l.flags;switch(l.tag){case 22:mr(r,l),g&2048&&Gu(l.alternate,l);break;case 24:mr(r,l),g&2048&&qu(l.alternate,l);break;default:mr(r,l)}n=n.sibling}}var br=8192;function da(i,n,r){if(i.subtreeFlags&br)for(i=i.child;i!==null;)dp(i,n,r),i=i.sibling}function dp(i,n,r){switch(i.tag){case 26:da(i,n,r),i.flags&br&&i.memoizedState!==null&&F0(r,Hi,i.memoizedState,i.memoizedProps);break;case 5:da(i,n,r);break;case 3:case 4:var l=Hi;Hi=bl(i.stateNode.containerInfo),da(i,n,r),Hi=l;break;case 22:i.memoizedState===null&&(l=i.alternate,l!==null&&l.memoizedState!==null?(l=br,br=16777216,da(i,n,r),br=l):da(i,n,r));break;default:da(i,n,r)}}function fp(i){var n=i.alternate;if(n!==null&&(i=n.child,i!==null)){n.child=null;do n=i.sibling,i.sibling=null,i=n;while(i!==null)}}function yr(i){var n=i.deletions;if((i.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];_e=l,pp(l,i)}fp(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)gp(i),i=i.sibling}function gp(i){switch(i.tag){case 0:case 11:case 15:yr(i),i.flags&2048&&Gn(9,i,i.return);break;case 3:yr(i);break;case 12:yr(i);break;case 22:var n=i.stateNode;i.memoizedState!==null&&n._visibility&2&&(i.return===null||i.return.tag!==13)?(n._visibility&=-3,sl(i)):yr(i);break;default:yr(i)}}function sl(i){var n=i.deletions;if((i.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];_e=l,pp(l,i)}fp(i)}for(i=i.child;i!==null;){switch(n=i,n.tag){case 0:case 11:case 15:Gn(8,n,n.return),sl(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,sl(n));break;default:sl(n)}i=i.sibling}}function pp(i,n){for(;_e!==null;){var r=_e;switch(r.tag){case 0:case 11:case 15:Gn(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:er(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,_e=l;else t:for(r=i;_e!==null;){l=_e;var g=l.sibling,m=l.return;if(ap(l),l===r){_e=null;break t}if(g!==null){g.return=m,_e=g;break t}_e=m}}}var Jv={getCacheForType:function(i){var n=Re(ce),r=n.data.get(i);return r===void 0&&(r=i(),n.data.set(i,r)),r},cacheSignal:function(){return Re(ce).controller.signal}},t0=typeof WeakMap=="function"?WeakMap:Map,Bt=0,Vt=null,_t=null,xt=0,Ut=0,ui=null,qn=!1,fa=!1,Vu=!1,Cn=0,ie=0,Vn=0,xs=0,Xu=0,hi=0,ga=0,vr=null,ti=null,Yu=!1,al=0,mp=0,rl=1/0,ol=null,Xn=null,be=0,Yn=null,pa=null,Tn=0,Ku=0,$u=null,bp=null,Ar=0,Qu=null;function di(){return(Bt&2)!==0&&xt!==0?xt&-xt:B.T!==null?ih():Ui()}function yp(){if(hi===0)if((xt&536870912)===0||Mt){var i=Fs;Fs<<=1,(Fs&3932160)===0&&(Fs=262144),hi=i}else hi=536870912;return i=li.current,i!==null&&(i.flags|=32),hi}function ei(i,n,r){(i===Vt&&(Ut===2||Ut===9)||i.cancelPendingCommit!==null)&&(ma(i,0),Kn(i,xt,hi,!1)),vi(i,r),((Bt&2)===0||i!==Vt)&&(i===Vt&&((Bt&2)===0&&(xs|=r),ie===4&&Kn(i,xt,hi,!1)),Zi(i))}function vp(i,n,r){if((Bt&6)!==0)throw Error(s(327));var l=!r&&(n&127)===0&&(n&i.expiredLanes)===0||Xe(i,n),g=l?n0(i,n):Zu(i,n,!0),m=l;do{if(g===0){fa&&!l&&Kn(i,n,0,!1);break}else{if(r=i.current.alternate,m&&!e0(r)){g=Zu(i,n,!1),m=!1;continue}if(g===2){if(m=n,i.errorRecoveryDisabledLanes&m)var v=0;else v=i.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var _=i;g=vr;var M=_.current.memoizedState.isDehydrated;if(M&&(ma(_,v).flags|=256),v=Zu(_,v,!1),v!==2){if(Vu&&!M){_.errorRecoveryDisabledLanes|=m,xs|=m,g=4;break t}m=ti,ti=g,m!==null&&(ti===null?ti=m:ti.push.apply(ti,m))}g=v}if(m=!1,g!==2)continue}}if(g===1){ma(i,0),Kn(i,n,0,!0);break}t:{switch(l=i,m=g,m){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Kn(l,n,hi,!qn);break t;case 2:ti=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(g=al+300-Be(),10<g)){if(Kn(l,n,hi,!qn),we(l,0,!0)!==0)break t;Tn=n,l.timeoutHandle=Qp(Ap.bind(null,l,r,ti,ol,Yu,n,hi,xs,ga,qn,m,"Throttled",-0,0),g);break t}Ap(l,r,ti,ol,Yu,n,hi,xs,ga,qn,m,null,-0,0)}}break}while(!0);Zi(i)}function Ap(i,n,r,l,g,m,v,_,M,I,V,$,H,G){if(i.timeoutHandle=-1,$=n.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hn},dp(n,m,$);var st=(m&62914560)===m?al-Be():(m&4194048)===m?mp-Be():0;if(st=U0($,st),st!==null){Tn=m,i.cancelPendingCommit=st(Dp.bind(null,i,n,m,r,l,g,v,_,M,V,$,null,H,G)),Kn(i,m,v,!I);return}}Dp(i,n,m,r,l,g,v,_,M)}function e0(i){for(var n=i;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var g=r[l],m=g.getSnapshot;g=g.value;try{if(!ri(m(),g))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===i)break;for(;n.sibling===null;){if(n.return===null||n.return===i)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Kn(i,n,r,l){n&=~Xu,n&=~xs,i.suspendedLanes|=n,i.pingedLanes&=~n,l&&(i.warmLanes|=n),l=i.expirationTimes;for(var g=n;0<g;){var m=31-ze(g),v=1<<m;l[m]=-1,g&=~v}r!==0&&Fi(i,r,n)}function ll(){return(Bt&6)===0?(Sr(0),!1):!0}function Wu(){if(_t!==null){if(Ut===0)var i=_t.return;else i=_t,pn=ys=null,fu(i),ra=null,nr=0,i=_t;for(;i!==null;)Wg(i.alternate,i),i=i.return;_t=null}}function ma(i,n){var r=i.timeoutHandle;r!==-1&&(i.timeoutHandle=-1,S0(r)),r=i.cancelPendingCommit,r!==null&&(i.cancelPendingCommit=null,r()),Tn=0,Wu(),Vt=i,_t=r=fn(i.current,null),xt=n,Ut=0,ui=null,qn=!1,fa=Xe(i,n),Vu=!1,ga=hi=Xu=xs=Vn=ie=0,ti=vr=null,Yu=!1,(n&8)!==0&&(n|=n&32);var l=i.entangledLanes;if(l!==0)for(i=i.entanglements,l&=n;0<l;){var g=31-ze(l),m=1<<g;n|=i[g],l&=~m}return Cn=n,Mo(),r}function Sp(i,n){At=null,B.H=hr,n===aa||n===Po?(n=Pf(),Ut=3):n===eu?(n=Pf(),Ut=4):Ut=n===Mu?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,ui=n,_t===null&&(ie=1,Wo(i,Ci(n,i.current)))}function wp(){var i=li.current;return i===null?!0:(xt&4194048)===xt?Mi===null:(xt&62914560)===xt||(xt&536870912)!==0?i===Mi:!1}function Ep(){var i=B.H;return B.H=hr,i===null?hr:i}function _p(){var i=B.A;return B.A=Jv,i}function cl(){ie=4,qn||(xt&4194048)!==xt&&li.current!==null||(fa=!0),(Vn&134217727)===0&&(xs&134217727)===0||Vt===null||Kn(Vt,xt,hi,!1)}function Zu(i,n,r){var l=Bt;Bt|=2;var g=Ep(),m=_p();(Vt!==i||xt!==n)&&(ol=null,ma(i,n)),n=!1;var v=ie;t:do try{if(Ut!==0&&_t!==null){var _=_t,M=ui;switch(Ut){case 8:Wu(),v=6;break t;case 3:case 2:case 9:case 6:li.current===null&&(n=!0);var I=Ut;if(Ut=0,ui=null,ba(i,_,M,I),r&&fa){v=0;break t}break;default:I=Ut,Ut=0,ui=null,ba(i,_,M,I)}}i0(),v=ie;break}catch(V){Sp(i,V)}while(!0);return n&&i.shellSuspendCounter++,pn=ys=null,Bt=l,B.H=g,B.A=m,_t===null&&(Vt=null,xt=0,Mo()),v}function i0(){for(;_t!==null;)Cp(_t)}function n0(i,n){var r=Bt;Bt|=2;var l=Ep(),g=_p();Vt!==i||xt!==n?(ol=null,rl=Be()+500,ma(i,n)):fa=Xe(i,n);t:do try{if(Ut!==0&&_t!==null){n=_t;var m=ui;e:switch(Ut){case 1:Ut=0,ui=null,ba(i,n,m,1);break;case 2:case 9:if(Bf(m)){Ut=0,ui=null,Tp(n);break}n=function(){Ut!==2&&Ut!==9||Vt!==i||(Ut=7),Zi(i)},m.then(n,n);break t;case 3:Ut=7;break t;case 4:Ut=5;break t;case 7:Bf(m)?(Ut=0,ui=null,Tp(n)):(Ut=0,ui=null,ba(i,n,m,7));break;case 5:var v=null;switch(_t.tag){case 26:v=_t.memoizedState;case 5:case 27:var _=_t;if(v?hm(v):_.stateNode.complete){Ut=0,ui=null;var M=_.sibling;if(M!==null)_t=M;else{var I=_.return;I!==null?(_t=I,ul(I)):_t=null}break e}}Ut=0,ui=null,ba(i,n,m,5);break;case 6:Ut=0,ui=null,ba(i,n,m,6);break;case 8:Wu(),ie=6;break t;default:throw Error(s(462))}}s0();break}catch(V){Sp(i,V)}while(!0);return pn=ys=null,B.H=l,B.A=g,Bt=r,_t!==null?0:(Vt=null,xt=0,Mo(),ie)}function s0(){for(;_t!==null&&!zs();)Cp(_t)}function Cp(i){var n=$g(i.alternate,i,Cn);i.memoizedProps=i.pendingProps,n===null?ul(i):_t=n}function Tp(i){var n=i,r=n.alternate;switch(n.tag){case 15:case 0:n=Gg(r,n,n.pendingProps,n.type,void 0,xt);break;case 11:n=Gg(r,n,n.pendingProps,n.type.render,n.ref,xt);break;case 5:fu(n);default:Wg(r,n),n=_t=_f(n,Cn),n=$g(r,n,Cn)}i.memoizedProps=i.pendingProps,n===null?ul(i):_t=n}function ba(i,n,r,l){pn=ys=null,fu(n),ra=null,nr=0;var g=n.return;try{if(Xv(i,g,n,r,xt)){ie=1,Wo(i,Ci(r,i.current)),_t=null;return}}catch(m){if(g!==null)throw _t=g,m;ie=1,Wo(i,Ci(r,i.current)),_t=null;return}n.flags&32768?(Mt||l===1?i=!0:fa||(xt&536870912)!==0?i=!1:(qn=i=!0,(l===2||l===9||l===3||l===6)&&(l=li.current,l!==null&&l.tag===13&&(l.flags|=16384))),xp(n,i)):ul(n)}function ul(i){var n=i;do{if((n.flags&32768)!==0){xp(n,qn);return}i=n.return;var r=$v(n.alternate,n,Cn);if(r!==null){_t=r;return}if(n=n.sibling,n!==null){_t=n;return}_t=n=i}while(n!==null);ie===0&&(ie=5)}function xp(i,n){do{var r=Qv(i.alternate,i);if(r!==null){r.flags&=32767,_t=r;return}if(r=i.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(i=i.sibling,i!==null)){_t=i;return}_t=i=r}while(i!==null);ie=6,_t=null}function Dp(i,n,r,l,g,m,v,_,M){i.cancelPendingCommit=null;do hl();while(be!==0);if((Bt&6)!==0)throw Error(s(327));if(n!==null){if(n===i.current)throw Error(s(177));if(m=n.lanes|n.childLanes,m|=Ic,me(i,r,m,v,_,M),i===Vt&&(_t=Vt=null,xt=0),pa=n,Yn=i,Tn=r,Ku=m,$u=g,bp=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,l0(Pi,function(){return Np(),null})):(i.callbackNode=null,i.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=B.T,B.T=null,g=P.p,P.p=2,v=Bt,Bt|=4;try{Wv(i,n,r)}finally{Bt=v,P.p=g,B.T=l}}be=1,Mp(),Rp(),Op()}}function Mp(){if(be===1){be=0;var i=Yn,n=pa,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=B.T,B.T=null;var l=P.p;P.p=2;var g=Bt;Bt|=4;try{cp(n,i);var m=uh,v=pf(i.containerInfo),_=m.focusedElem,M=m.selectionRange;if(v!==_&&_&&_.ownerDocument&&gf(_.ownerDocument.documentElement,_)){if(M!==null&&Bc(_)){var I=M.start,V=M.end;if(V===void 0&&(V=I),"selectionStart"in _)_.selectionStart=I,_.selectionEnd=Math.min(V,_.value.length);else{var $=_.ownerDocument||document,H=$&&$.defaultView||window;if(H.getSelection){var G=H.getSelection(),st=_.textContent.length,gt=Math.min(M.start,st),Gt=M.end===void 0?gt:Math.min(M.end,st);!G.extend&&gt>Gt&&(v=Gt,Gt=gt,gt=v);var z=ff(_,gt),N=ff(_,Gt);if(z&&N&&(G.rangeCount!==1||G.anchorNode!==z.node||G.anchorOffset!==z.offset||G.focusNode!==N.node||G.focusOffset!==N.offset)){var U=$.createRange();U.setStart(z.node,z.offset),G.removeAllRanges(),gt>Gt?(G.addRange(U),G.extend(N.node,N.offset)):(U.setEnd(N.node,N.offset),G.addRange(U))}}}}for($=[],G=_;G=G.parentNode;)G.nodeType===1&&$.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<$.length;_++){var Y=$[_];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}El=!!ch,uh=ch=null}finally{Bt=g,P.p=l,B.T=r}}i.current=n,be=2}}function Rp(){if(be===2){be=0;var i=Yn,n=pa,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=B.T,B.T=null;var l=P.p;P.p=2;var g=Bt;Bt|=4;try{sp(i,n.alternate,n)}finally{Bt=g,P.p=l,B.T=r}}be=3}}function Op(){if(be===4||be===3){be=0,go();var i=Yn,n=pa,r=Tn,l=bp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?be=5:(be=0,pa=Yn=null,Lp(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Xn=null),cn(r),n=n.stateNode,Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(us,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=B.T,g=P.p,P.p=2,B.T=null;try{for(var m=i.onRecoverableError,v=0;v<l.length;v++){var _=l[v];m(_.value,{componentStack:_.stack})}}finally{B.T=n,P.p=g}}(Tn&3)!==0&&hl(),Zi(i),g=i.pendingLanes,(r&261930)!==0&&(g&42)!==0?i===Qu?Ar++:(Ar=0,Qu=i):Ar=0,Sr(0)}}function Lp(i,n){(i.pooledCacheLanes&=n)===0&&(n=i.pooledCache,n!=null&&(i.pooledCache=null,er(n)))}function hl(){return Mp(),Rp(),Op(),Np()}function Np(){if(be!==5)return!1;var i=Yn,n=Ku;Ku=0;var r=cn(Tn),l=B.T,g=P.p;try{P.p=32>r?32:r,B.T=null,r=$u,$u=null;var m=Yn,v=Tn;if(be=0,pa=Yn=null,Tn=0,(Bt&6)!==0)throw Error(s(331));var _=Bt;if(Bt|=4,gp(m.current),hp(m,m.current,v,r),Bt=_,Sr(0,!1),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(us,m)}catch{}return!0}finally{P.p=g,B.T=l,Lp(i,n)}}function kp(i,n,r){n=Ci(r,n),n=Du(i.stateNode,n,2),i=In(i,n,2),i!==null&&(vi(i,2),Zi(i))}function It(i,n,r){if(i.tag===3)kp(i,i,r);else for(;n!==null;){if(n.tag===3){kp(n,i,r);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Xn===null||!Xn.has(l))){i=Ci(r,i),r=Bg(2),l=In(n,r,2),l!==null&&(zg(r,l,n,i),vi(l,2),Zi(l));break}}n=n.return}}function Ju(i,n,r){var l=i.pingCache;if(l===null){l=i.pingCache=new t0;var g=new Set;l.set(n,g)}else g=l.get(n),g===void 0&&(g=new Set,l.set(n,g));g.has(r)||(Vu=!0,g.add(r),i=a0.bind(null,i,n,r),n.then(i,i))}function a0(i,n,r){var l=i.pingCache;l!==null&&l.delete(n),i.pingedLanes|=i.suspendedLanes&r,i.warmLanes&=~r,Vt===i&&(xt&r)===r&&(ie===4||ie===3&&(xt&62914560)===xt&&300>Be()-al?(Bt&2)===0&&ma(i,0):Xu|=r,ga===xt&&(ga=0)),Zi(i)}function Bp(i,n){n===0&&(n=Pe()),i=ps(i,n),i!==null&&(vi(i,n),Zi(i))}function r0(i){var n=i.memoizedState,r=0;n!==null&&(r=n.retryLane),Bp(i,r)}function o0(i,n){var r=0;switch(i.tag){case 31:case 13:var l=i.stateNode,g=i.memoizedState;g!==null&&(r=g.retryLane);break;case 19:l=i.stateNode;break;case 22:l=i.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(n),Bp(i,r)}function l0(i,n){return bi(i,n)}var dl=null,ya=null,th=!1,fl=!1,eh=!1,$n=0;function Zi(i){i!==ya&&i.next===null&&(ya===null?dl=ya=i:ya=ya.next=i),fl=!0,th||(th=!0,u0())}function Sr(i,n){if(!eh&&fl){eh=!0;do for(var r=!1,l=dl;l!==null;){if(i!==0){var g=l.pendingLanes;if(g===0)var m=0;else{var v=l.suspendedLanes,_=l.pingedLanes;m=(1<<31-ze(42|i)+1)-1,m&=g&~(v&~_),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,Up(l,m))}else m=xt,m=we(l,l===Vt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Xe(l,m)||(r=!0,Up(l,m));l=l.next}while(r);eh=!1}}function c0(){zp()}function zp(){fl=th=!1;var i=0;$n!==0&&A0()&&(i=$n);for(var n=Be(),r=null,l=dl;l!==null;){var g=l.next,m=Pp(l,n);m===0?(l.next=null,r===null?dl=g:r.next=g,g===null&&(ya=r)):(r=l,(i!==0||(m&3)!==0)&&(fl=!0)),l=g}be!==0&&be!==5||Sr(i),$n!==0&&($n=0)}function Pp(i,n){for(var r=i.suspendedLanes,l=i.pingedLanes,g=i.expirationTimes,m=i.pendingLanes&-62914561;0<m;){var v=31-ze(m),_=1<<v,M=g[v];M===-1?((_&r)===0||(_&l)!==0)&&(g[v]=Ye(_,n)):M<=n&&(i.expiredLanes|=_),m&=~_}if(n=Vt,r=xt,r=we(i,i===n?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),l=i.callbackNode,r===0||i===n&&(Ut===2||Ut===9)||i.cancelPendingCommit!==null)return l!==null&&l!==null&&On(l),i.callbackNode=null,i.callbackPriority=0;if((r&3)===0||Xe(i,r)){if(n=r&-r,n===i.callbackPriority)return n;switch(l!==null&&On(l),cn(r)){case 2:case 8:r=on;break;case 32:r=Pi;break;case 268435456:r=Ha;break;default:r=Pi}return l=Fp.bind(null,i),r=bi(r,l),i.callbackPriority=n,i.callbackNode=r,n}return l!==null&&l!==null&&On(l),i.callbackPriority=2,i.callbackNode=null,2}function Fp(i,n){if(be!==0&&be!==5)return i.callbackNode=null,i.callbackPriority=0,null;var r=i.callbackNode;if(hl()&&i.callbackNode!==r)return null;var l=xt;return l=we(i,i===Vt?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),l===0?null:(vp(i,l,n),Pp(i,Be()),i.callbackNode!=null&&i.callbackNode===r?Fp.bind(null,i):null)}function Up(i,n){if(hl())return null;vp(i,n,!0)}function u0(){w0(function(){(Bt&6)!==0?bi(po,c0):zp()})}function ih(){if($n===0){var i=na;i===0&&(i=Ps,Ps<<=1,(Ps&261888)===0&&(Ps=256)),$n=i}return $n}function Ip(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:So(""+i)}function Hp(i,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,i.id&&r.setAttribute("form",i.id),n.parentNode.insertBefore(r,n),i=new FormData(i),r.parentNode.removeChild(r),i}function h0(i,n,r,l,g){if(n==="submit"&&r&&r.stateNode===g){var m=Ip((g[$e]||null).action),v=l.submitter;v&&(n=(n=v[$e]||null)?Ip(n.formAction):v.getAttribute("formAction"),n!==null&&(m=n,v=null));var _=new Co("action","action",null,l,g);i.push({event:_,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if($n!==0){var M=v?Hp(g,v):new FormData(g);wu(r,{pending:!0,data:M,method:g.method,action:m},null,M)}}else typeof m=="function"&&(_.preventDefault(),M=v?Hp(g,v):new FormData(g),wu(r,{pending:!0,data:M,method:g.method,action:m},m,M))},currentTarget:g}]})}}for(var nh=0;nh<Uc.length;nh++){var sh=Uc[nh],d0=sh.toLowerCase(),f0=sh[0].toUpperCase()+sh.slice(1);Ii(d0,"on"+f0)}Ii(yf,"onAnimationEnd"),Ii(vf,"onAnimationIteration"),Ii(Af,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(Mv,"onTransitionRun"),Ii(Rv,"onTransitionStart"),Ii(Ov,"onTransitionCancel"),Ii(Sf,"onTransitionEnd"),Gs("onMouseEnter",["mouseout","mouseover"]),Gs("onMouseLeave",["mouseout","mouseover"]),Gs("onPointerEnter",["pointerout","pointerover"]),Gs("onPointerLeave",["pointerout","pointerover"]),hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hs("onBeforeInput",["compositionend","keypress","textInput","paste"]),hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wr));function jp(i,n){n=(n&4)!==0;for(var r=0;r<i.length;r++){var l=i[r],g=l.event;l=l.listeners;t:{var m=void 0;if(n)for(var v=l.length-1;0<=v;v--){var _=l[v],M=_.instance,I=_.currentTarget;if(_=_.listener,M!==m&&g.isPropagationStopped())break t;m=_,g.currentTarget=I;try{m(g)}catch(V){Do(V)}g.currentTarget=null,m=M}else for(v=0;v<l.length;v++){if(_=l[v],M=_.instance,I=_.currentTarget,_=_.listener,M!==m&&g.isPropagationStopped())break t;m=_,g.currentTarget=I;try{m(g)}catch(V){Do(V)}g.currentTarget=null,m=M}}}}function Ct(i,n){var r=n[bc];r===void 0&&(r=n[bc]=new Set);var l=i+"__bubble";r.has(l)||(Gp(n,i,2,!1),r.add(l))}function ah(i,n,r){var l=0;n&&(l|=4),Gp(r,i,l,n)}var gl="_reactListening"+Math.random().toString(36).slice(2);function rh(i){if(!i[gl]){i[gl]=!0,Bd.forEach(function(r){r!=="selectionchange"&&(g0.has(r)||ah(r,!1,i),ah(r,!0,i))});var n=i.nodeType===9?i:i.ownerDocument;n===null||n[gl]||(n[gl]=!0,ah("selectionchange",!1,n))}}function Gp(i,n,r,l){switch(ym(n)){case 2:var g=j0;break;case 8:g=G0;break;default:g=Sh}r=g.bind(null,n,r,i),g=void 0,!Tc||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(g=!0),l?g!==void 0?i.addEventListener(n,r,{capture:!0,passive:g}):i.addEventListener(n,r,!0):g!==void 0?i.addEventListener(n,r,{passive:g}):i.addEventListener(n,r,!1)}function oh(i,n,r,l,g){var m=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var _=l.stateNode.containerInfo;if(_===g)break;if(v===4)for(v=l.return;v!==null;){var M=v.tag;if((M===3||M===4)&&v.stateNode.containerInfo===g)return;v=v.return}for(;_!==null;){if(v=Is(_),v===null)return;if(M=v.tag,M===5||M===6||M===26||M===27){l=m=v;continue t}_=_.parentNode}}l=l.return}Yd(function(){var I=m,V=_c(r),$=[];t:{var H=wf.get(i);if(H!==void 0){var G=Co,st=i;switch(i){case"keypress":if(Eo(r)===0)break t;case"keydown":case"keyup":G=ov;break;case"focusin":st="focus",G=Rc;break;case"focusout":st="blur",G=Rc;break;case"beforeblur":case"afterblur":G=Rc;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Qd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=$y;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=uv;break;case yf:case vf:case Af:G=Zy;break;case Sf:G=dv;break;case"scroll":case"scrollend":G=Yy;break;case"wheel":G=gv;break;case"copy":case"cut":case"paste":G=tv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Zd;break;case"toggle":case"beforetoggle":G=mv}var gt=(n&4)!==0,Gt=!gt&&(i==="scroll"||i==="scrollend"),z=gt?H!==null?H+"Capture":null:H;gt=[];for(var N=I,U;N!==null;){var Y=N;if(U=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||U===null||z===null||(Y=qa(N,z),Y!=null&&gt.push(Er(N,Y,U))),Gt)break;N=N.return}0<gt.length&&(H=new G(H,st,null,r,V),$.push({event:H,listeners:gt}))}}if((n&7)===0){t:{if(H=i==="mouseover"||i==="pointerover",G=i==="mouseout"||i==="pointerout",H&&r!==Ec&&(st=r.relatedTarget||r.fromElement)&&(Is(st)||st[Us]))break t;if((G||H)&&(H=V.window===V?V:(H=V.ownerDocument)?H.defaultView||H.parentWindow:window,G?(st=r.relatedTarget||r.toElement,G=I,st=st?Is(st):null,st!==null&&(Gt=o(st),gt=st.tag,st!==Gt||gt!==5&&gt!==27&&gt!==6)&&(st=null)):(G=null,st=I),G!==st)){if(gt=Qd,Y="onMouseLeave",z="onMouseEnter",N="mouse",(i==="pointerout"||i==="pointerover")&&(gt=Zd,Y="onPointerLeave",z="onPointerEnter",N="pointer"),Gt=G==null?H:Ga(G),U=st==null?H:Ga(st),H=new gt(Y,N+"leave",G,r,V),H.target=Gt,H.relatedTarget=U,Y=null,Is(V)===I&&(gt=new gt(z,N+"enter",st,r,V),gt.target=U,gt.relatedTarget=Gt,Y=gt),Gt=Y,G&&st)e:{for(gt=p0,z=G,N=st,U=0,Y=z;Y;Y=gt(Y))U++;Y=0;for(var ht=N;ht;ht=gt(ht))Y++;for(;0<U-Y;)z=gt(z),U--;for(;0<Y-U;)N=gt(N),Y--;for(;U--;){if(z===N||N!==null&&z===N.alternate){gt=z;break e}z=gt(z),N=gt(N)}gt=null}else gt=null;G!==null&&qp($,H,G,gt,!1),st!==null&&Gt!==null&&qp($,Gt,st,gt,!0)}}t:{if(H=I?Ga(I):window,G=H.nodeName&&H.nodeName.toLowerCase(),G==="select"||G==="input"&&H.type==="file")var Nt=of;else if(af(H))if(lf)Nt=Tv;else{Nt=_v;var rt=Ev}else G=H.nodeName,!G||G.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?I&&wc(I.elementType)&&(Nt=of):Nt=Cv;if(Nt&&(Nt=Nt(i,I))){rf($,Nt,r,V);break t}rt&&rt(i,H,I),i==="focusout"&&I&&H.type==="number"&&I.memoizedProps.value!=null&&Sc(H,"number",H.value)}switch(rt=I?Ga(I):window,i){case"focusin":(af(rt)||rt.contentEditable==="true")&&($s=rt,zc=I,Za=null);break;case"focusout":Za=zc=$s=null;break;case"mousedown":Pc=!0;break;case"contextmenu":case"mouseup":case"dragend":Pc=!1,mf($,r,V);break;case"selectionchange":if(Dv)break;case"keydown":case"keyup":mf($,r,V)}var wt;if(Lc)t:{switch(i){case"compositionstart":var Dt="onCompositionStart";break t;case"compositionend":Dt="onCompositionEnd";break t;case"compositionupdate":Dt="onCompositionUpdate";break t}Dt=void 0}else Ks?nf(i,r)&&(Dt="onCompositionEnd"):i==="keydown"&&r.keyCode===229&&(Dt="onCompositionStart");Dt&&(Jd&&r.locale!=="ko"&&(Ks||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&Ks&&(wt=Kd()):(Nn=V,xc="value"in Nn?Nn.value:Nn.textContent,Ks=!0)),rt=pl(I,Dt),0<rt.length&&(Dt=new Wd(Dt,i,null,r,V),$.push({event:Dt,listeners:rt}),wt?Dt.data=wt:(wt=sf(r),wt!==null&&(Dt.data=wt)))),(wt=yv?vv(i,r):Av(i,r))&&(Dt=pl(I,"onBeforeInput"),0<Dt.length&&(rt=new Wd("onBeforeInput","beforeinput",null,r,V),$.push({event:rt,listeners:Dt}),rt.data=wt)),h0($,i,I,r,V)}jp($,n)})}function Er(i,n,r){return{instance:i,listener:n,currentTarget:r}}function pl(i,n){for(var r=n+"Capture",l=[];i!==null;){var g=i,m=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||m===null||(g=qa(i,r),g!=null&&l.unshift(Er(i,g,m)),g=qa(i,n),g!=null&&l.push(Er(i,g,m))),i.tag===3)return l;i=i.return}return[]}function p0(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function qp(i,n,r,l,g){for(var m=n._reactName,v=[];r!==null&&r!==l;){var _=r,M=_.alternate,I=_.stateNode;if(_=_.tag,M!==null&&M===l)break;_!==5&&_!==26&&_!==27||I===null||(M=I,g?(I=qa(r,m),I!=null&&v.unshift(Er(r,I,M))):g||(I=qa(r,m),I!=null&&v.push(Er(r,I,M)))),r=r.return}v.length!==0&&i.push({event:n,listeners:v})}var m0=/\r\n?/g,b0=/\u0000|\uFFFD/g;function Vp(i){return(typeof i=="string"?i:""+i).replace(m0,`
`).replace(b0,"")}function Xp(i,n){return n=Vp(n),Vp(i)===n}function jt(i,n,r,l,g,m){switch(r){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Vs(i,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Vs(i,""+l);break;case"className":vo(i,"class",l);break;case"tabIndex":vo(i,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":vo(i,r,l);break;case"style":Vd(i,l,m);break;case"data":if(n!=="object"){vo(i,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||r!=="href")){i.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){i.removeAttribute(r);break}l=So(""+l),i.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){i.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(n!=="input"&&jt(i,n,"name",g.name,g,null),jt(i,n,"formEncType",g.formEncType,g,null),jt(i,n,"formMethod",g.formMethod,g,null),jt(i,n,"formTarget",g.formTarget,g,null)):(jt(i,n,"encType",g.encType,g,null),jt(i,n,"method",g.method,g,null),jt(i,n,"target",g.target,g,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){i.removeAttribute(r);break}l=So(""+l),i.setAttribute(r,l);break;case"onClick":l!=null&&(i.onclick=hn);break;case"onScroll":l!=null&&Ct("scroll",i);break;case"onScrollEnd":l!=null&&Ct("scrollend",i);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=r}}break;case"multiple":i.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":i.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){i.removeAttribute("xlink:href");break}r=So(""+l),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?i.setAttribute(r,""+l):i.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?i.setAttribute(r,""):i.removeAttribute(r);break;case"capture":case"download":l===!0?i.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?i.setAttribute(r,l):i.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?i.setAttribute(r,l):i.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?i.removeAttribute(r):i.setAttribute(r,l);break;case"popover":Ct("beforetoggle",i),Ct("toggle",i),yo(i,"popover",l);break;case"xlinkActuate":un(i,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":un(i,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":un(i,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":un(i,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":un(i,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":un(i,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":un(i,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":un(i,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":un(i,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":yo(i,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Vy.get(r)||r,yo(i,r,l))}}function lh(i,n,r,l,g,m){switch(r){case"style":Vd(i,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=r}}break;case"children":typeof l=="string"?Vs(i,l):(typeof l=="number"||typeof l=="bigint")&&Vs(i,""+l);break;case"onScroll":l!=null&&Ct("scroll",i);break;case"onScrollEnd":l!=null&&Ct("scrollend",i);break;case"onClick":l!=null&&(i.onclick=hn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zd.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(g=r.endsWith("Capture"),n=r.slice(2,g?r.length-7:void 0),m=i[$e]||null,m=m!=null?m[r]:null,typeof m=="function"&&i.removeEventListener(n,m,g),typeof l=="function")){typeof m!="function"&&m!==null&&(r in i?i[r]=null:i.hasAttribute(r)&&i.removeAttribute(r)),i.addEventListener(n,l,g);break t}r in i?i[r]=l:l===!0?i.setAttribute(r,""):yo(i,r,l)}}}function Le(i,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ct("error",i),Ct("load",i);var l=!1,g=!1,m;for(m in r)if(r.hasOwnProperty(m)){var v=r[m];if(v!=null)switch(m){case"src":l=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:jt(i,n,m,v,r,null)}}g&&jt(i,n,"srcSet",r.srcSet,r,null),l&&jt(i,n,"src",r.src,r,null);return;case"input":Ct("invalid",i);var _=m=v=g=null,M=null,I=null;for(l in r)if(r.hasOwnProperty(l)){var V=r[l];if(V!=null)switch(l){case"name":g=V;break;case"type":v=V;break;case"checked":M=V;break;case"defaultChecked":I=V;break;case"value":m=V;break;case"defaultValue":_=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,n));break;default:jt(i,n,l,V,r,null)}}Hd(i,m,_,M,I,v,g,!1);return;case"select":Ct("invalid",i),l=v=m=null;for(g in r)if(r.hasOwnProperty(g)&&(_=r[g],_!=null))switch(g){case"value":m=_;break;case"defaultValue":v=_;break;case"multiple":l=_;default:jt(i,n,g,_,r,null)}n=m,r=v,i.multiple=!!l,n!=null?qs(i,!!l,n,!1):r!=null&&qs(i,!!l,r,!0);return;case"textarea":Ct("invalid",i),m=g=l=null;for(v in r)if(r.hasOwnProperty(v)&&(_=r[v],_!=null))switch(v){case"value":l=_;break;case"defaultValue":g=_;break;case"children":m=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:jt(i,n,v,_,r,null)}Gd(i,l,g,m);return;case"option":for(M in r)r.hasOwnProperty(M)&&(l=r[M],l!=null)&&(M==="selected"?i.selected=l&&typeof l!="function"&&typeof l!="symbol":jt(i,n,M,l,r,null));return;case"dialog":Ct("beforetoggle",i),Ct("toggle",i),Ct("cancel",i),Ct("close",i);break;case"iframe":case"object":Ct("load",i);break;case"video":case"audio":for(l=0;l<wr.length;l++)Ct(wr[l],i);break;case"image":Ct("error",i),Ct("load",i);break;case"details":Ct("toggle",i);break;case"embed":case"source":case"link":Ct("error",i),Ct("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(I in r)if(r.hasOwnProperty(I)&&(l=r[I],l!=null))switch(I){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:jt(i,n,I,l,r,null)}return;default:if(wc(n)){for(V in r)r.hasOwnProperty(V)&&(l=r[V],l!==void 0&&lh(i,n,V,l,r,void 0));return}}for(_ in r)r.hasOwnProperty(_)&&(l=r[_],l!=null&&jt(i,n,_,l,r,null))}function y0(i,n,r,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,m=null,v=null,_=null,M=null,I=null,V=null;for(G in r){var $=r[G];if(r.hasOwnProperty(G)&&$!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":M=$;default:l.hasOwnProperty(G)||jt(i,n,G,null,l,$)}}for(var H in l){var G=l[H];if($=r[H],l.hasOwnProperty(H)&&(G!=null||$!=null))switch(H){case"type":m=G;break;case"name":g=G;break;case"checked":I=G;break;case"defaultChecked":V=G;break;case"value":v=G;break;case"defaultValue":_=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,n));break;default:G!==$&&jt(i,n,H,G,l,$)}}Ac(i,v,_,M,I,V,m,g);return;case"select":G=v=_=H=null;for(m in r)if(M=r[m],r.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":G=M;default:l.hasOwnProperty(m)||jt(i,n,m,null,l,M)}for(g in l)if(m=l[g],M=r[g],l.hasOwnProperty(g)&&(m!=null||M!=null))switch(g){case"value":H=m;break;case"defaultValue":_=m;break;case"multiple":v=m;default:m!==M&&jt(i,n,g,m,l,M)}n=_,r=v,l=G,H!=null?qs(i,!!r,H,!1):!!l!=!!r&&(n!=null?qs(i,!!r,n,!0):qs(i,!!r,r?[]:"",!1));return;case"textarea":G=H=null;for(_ in r)if(g=r[_],r.hasOwnProperty(_)&&g!=null&&!l.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:jt(i,n,_,null,l,g)}for(v in l)if(g=l[v],m=r[v],l.hasOwnProperty(v)&&(g!=null||m!=null))switch(v){case"value":H=g;break;case"defaultValue":G=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==m&&jt(i,n,v,g,l,m)}jd(i,H,G);return;case"option":for(var st in r)H=r[st],r.hasOwnProperty(st)&&H!=null&&!l.hasOwnProperty(st)&&(st==="selected"?i.selected=!1:jt(i,n,st,null,l,H));for(M in l)H=l[M],G=r[M],l.hasOwnProperty(M)&&H!==G&&(H!=null||G!=null)&&(M==="selected"?i.selected=H&&typeof H!="function"&&typeof H!="symbol":jt(i,n,M,H,l,G));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in r)H=r[gt],r.hasOwnProperty(gt)&&H!=null&&!l.hasOwnProperty(gt)&&jt(i,n,gt,null,l,H);for(I in l)if(H=l[I],G=r[I],l.hasOwnProperty(I)&&H!==G&&(H!=null||G!=null))switch(I){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,n));break;default:jt(i,n,I,H,l,G)}return;default:if(wc(n)){for(var Gt in r)H=r[Gt],r.hasOwnProperty(Gt)&&H!==void 0&&!l.hasOwnProperty(Gt)&&lh(i,n,Gt,void 0,l,H);for(V in l)H=l[V],G=r[V],!l.hasOwnProperty(V)||H===G||H===void 0&&G===void 0||lh(i,n,V,H,l,G);return}}for(var z in r)H=r[z],r.hasOwnProperty(z)&&H!=null&&!l.hasOwnProperty(z)&&jt(i,n,z,null,l,H);for($ in l)H=l[$],G=r[$],!l.hasOwnProperty($)||H===G||H==null&&G==null||jt(i,n,$,H,l,G)}function Yp(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function v0(){if(typeof performance.getEntriesByType=="function"){for(var i=0,n=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var g=r[l],m=g.transferSize,v=g.initiatorType,_=g.duration;if(m&&_&&Yp(v)){for(v=0,_=g.responseEnd,l+=1;l<r.length;l++){var M=r[l],I=M.startTime;if(I>_)break;var V=M.transferSize,$=M.initiatorType;V&&Yp($)&&(M=M.responseEnd,v+=V*(M<_?1:(_-I)/(M-I)))}if(--l,n+=8*(m+v)/(g.duration/1e3),i++,10<i)break}}if(0<i)return n/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var ch=null,uh=null;function ml(i){return i.nodeType===9?i:i.ownerDocument}function Kp(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $p(i,n){if(i===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&n==="foreignObject"?0:i}function hh(i,n){return i==="textarea"||i==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var dh=null;function A0(){var i=window.event;return i&&i.type==="popstate"?i===dh?!1:(dh=i,!0):(dh=null,!1)}var Qp=typeof setTimeout=="function"?setTimeout:void 0,S0=typeof clearTimeout=="function"?clearTimeout:void 0,Wp=typeof Promise=="function"?Promise:void 0,w0=typeof queueMicrotask=="function"?queueMicrotask:typeof Wp<"u"?function(i){return Wp.resolve(null).then(i).catch(E0)}:Qp;function E0(i){setTimeout(function(){throw i})}function Qn(i){return i==="head"}function Zp(i,n){var r=n,l=0;do{var g=r.nextSibling;if(i.removeChild(r),g&&g.nodeType===8)if(r=g.data,r==="/$"||r==="/&"){if(l===0){i.removeChild(g),wa(n);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")_r(i.ownerDocument.documentElement);else if(r==="head"){r=i.ownerDocument.head,_r(r);for(var m=r.firstChild;m;){var v=m.nextSibling,_=m.nodeName;m[ja]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=v}}else r==="body"&&_r(i.ownerDocument.body);r=g}while(r);wa(n)}function Jp(i,n){var r=i;i=0;do{var l=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(i===0)break;i--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||i++;r=l}while(r)}function fh(i){var n=i.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":fh(r),yc(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}i.removeChild(r)}}function _0(i,n,r,l){for(;i.nodeType===1;){var g=r;if(i.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(l){if(!i[ja])switch(n){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(m=i.getAttribute("rel"),m==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(m!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(m=i.getAttribute("src"),(m!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&m&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(n==="input"&&i.type==="hidden"){var m=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===m)return i}else return i;if(i=Ri(i.nextSibling),i===null)break}return null}function C0(i,n,r){if(n==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Ri(i.nextSibling),i===null))return null;return i}function tm(i,n){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!n||(i=Ri(i.nextSibling),i===null))return null;return i}function gh(i){return i.data==="$?"||i.data==="$~"}function ph(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function T0(i,n){var r=i.ownerDocument;if(i.data==="$~")i._reactRetry=n;else if(i.data!=="$?"||r.readyState!=="loading")n();else{var l=function(){n(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),i._reactRetry=l}}function Ri(i){for(;i!=null;i=i.nextSibling){var n=i.nodeType;if(n===1||n===3)break;if(n===8){if(n=i.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return i}var mh=null;function em(i){i=i.nextSibling;for(var n=0;i;){if(i.nodeType===8){var r=i.data;if(r==="/$"||r==="/&"){if(n===0)return Ri(i.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}i=i.nextSibling}return null}function im(i){i=i.previousSibling;for(var n=0;i;){if(i.nodeType===8){var r=i.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return i;n--}else r!=="/$"&&r!=="/&"||n++}i=i.previousSibling}return null}function nm(i,n,r){switch(n=ml(r),i){case"html":if(i=n.documentElement,!i)throw Error(s(452));return i;case"head":if(i=n.head,!i)throw Error(s(453));return i;case"body":if(i=n.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function _r(i){for(var n=i.attributes;n.length;)i.removeAttributeNode(n[0]);yc(i)}var Oi=new Map,sm=new Set;function bl(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var xn=P.d;P.d={f:x0,r:D0,D:M0,C:R0,L:O0,m:L0,X:k0,S:N0,M:B0};function x0(){var i=xn.f(),n=ll();return i||n}function D0(i){var n=Hs(i);n!==null&&n.tag===5&&n.type==="form"?Sg(n):xn.r(i)}var va=typeof document>"u"?null:document;function am(i,n,r){var l=va;if(l&&typeof n=="string"&&n){var g=Ei(n);g='link[rel="'+i+'"][href="'+g+'"]',typeof r=="string"&&(g+='[crossorigin="'+r+'"]'),sm.has(g)||(sm.add(g),i={rel:i,crossOrigin:r,href:n},l.querySelector(g)===null&&(n=l.createElement("link"),Le(n,"link",i),Ee(n),l.head.appendChild(n)))}}function M0(i){xn.D(i),am("dns-prefetch",i,null)}function R0(i,n){xn.C(i,n),am("preconnect",i,n)}function O0(i,n,r){xn.L(i,n,r);var l=va;if(l&&i&&n){var g='link[rel="preload"][as="'+Ei(n)+'"]';n==="image"&&r&&r.imageSrcSet?(g+='[imagesrcset="'+Ei(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(g+='[imagesizes="'+Ei(r.imageSizes)+'"]')):g+='[href="'+Ei(i)+'"]';var m=g;switch(n){case"style":m=Aa(i);break;case"script":m=Sa(i)}Oi.has(m)||(i=b({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:i,as:n},r),Oi.set(m,i),l.querySelector(g)!==null||n==="style"&&l.querySelector(Cr(m))||n==="script"&&l.querySelector(Tr(m))||(n=l.createElement("link"),Le(n,"link",i),Ee(n),l.head.appendChild(n)))}}function L0(i,n){xn.m(i,n);var r=va;if(r&&i){var l=n&&typeof n.as=="string"?n.as:"script",g='link[rel="modulepreload"][as="'+Ei(l)+'"][href="'+Ei(i)+'"]',m=g;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Sa(i)}if(!Oi.has(m)&&(i=b({rel:"modulepreload",href:i},n),Oi.set(m,i),r.querySelector(g)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Tr(m)))return}l=r.createElement("link"),Le(l,"link",i),Ee(l),r.head.appendChild(l)}}}function N0(i,n,r){xn.S(i,n,r);var l=va;if(l&&i){var g=js(l).hoistableStyles,m=Aa(i);n=n||"default";var v=g.get(m);if(!v){var _={loading:0,preload:null};if(v=l.querySelector(Cr(m)))_.loading=5;else{i=b({rel:"stylesheet",href:i,"data-precedence":n},r),(r=Oi.get(m))&&bh(i,r);var M=v=l.createElement("link");Ee(M),Le(M,"link",i),M._p=new Promise(function(I,V){M.onload=I,M.onerror=V}),M.addEventListener("load",function(){_.loading|=1}),M.addEventListener("error",function(){_.loading|=2}),_.loading|=4,yl(v,n,l)}v={type:"stylesheet",instance:v,count:1,state:_},g.set(m,v)}}}function k0(i,n){xn.X(i,n);var r=va;if(r&&i){var l=js(r).hoistableScripts,g=Sa(i),m=l.get(g);m||(m=r.querySelector(Tr(g)),m||(i=b({src:i,async:!0},n),(n=Oi.get(g))&&yh(i,n),m=r.createElement("script"),Ee(m),Le(m,"link",i),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(g,m))}}function B0(i,n){xn.M(i,n);var r=va;if(r&&i){var l=js(r).hoistableScripts,g=Sa(i),m=l.get(g);m||(m=r.querySelector(Tr(g)),m||(i=b({src:i,async:!0,type:"module"},n),(n=Oi.get(g))&&yh(i,n),m=r.createElement("script"),Ee(m),Le(m,"link",i),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(g,m))}}function rm(i,n,r,l){var g=(g=ot.current)?bl(g):null;if(!g)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=Aa(r.href),r=js(g).hoistableStyles,l=r.get(n),l||(l={type:"style",instance:null,count:0,state:null},r.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){i=Aa(r.href);var m=js(g).hoistableStyles,v=m.get(i);if(v||(g=g.ownerDocument||g,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(i,v),(m=g.querySelector(Cr(i)))&&!m._p&&(v.instance=m,v.state.loading=5),Oi.has(i)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Oi.set(i,r),m||z0(g,i,r,v.state))),n&&l===null)throw Error(s(528,""));return v}if(n&&l!==null)throw Error(s(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Sa(r),r=js(g).hoistableScripts,l=r.get(n),l||(l={type:"script",instance:null,count:0,state:null},r.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Aa(i){return'href="'+Ei(i)+'"'}function Cr(i){return'link[rel="stylesheet"]['+i+"]"}function om(i){return b({},i,{"data-precedence":i.precedence,precedence:null})}function z0(i,n,r,l){i.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=i.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),Le(n,"link",r),Ee(n),i.head.appendChild(n))}function Sa(i){return'[src="'+Ei(i)+'"]'}function Tr(i){return"script[async]"+i}function lm(i,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var l=i.querySelector('style[data-href~="'+Ei(r.href)+'"]');if(l)return n.instance=l,Ee(l),l;var g=b({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(i.ownerDocument||i).createElement("style"),Ee(l),Le(l,"style",g),yl(l,r.precedence,i),n.instance=l;case"stylesheet":g=Aa(r.href);var m=i.querySelector(Cr(g));if(m)return n.state.loading|=4,n.instance=m,Ee(m),m;l=om(r),(g=Oi.get(g))&&bh(l,g),m=(i.ownerDocument||i).createElement("link"),Ee(m);var v=m;return v._p=new Promise(function(_,M){v.onload=_,v.onerror=M}),Le(m,"link",l),n.state.loading|=4,yl(m,r.precedence,i),n.instance=m;case"script":return m=Sa(r.src),(g=i.querySelector(Tr(m)))?(n.instance=g,Ee(g),g):(l=r,(g=Oi.get(m))&&(l=b({},r),yh(l,g)),i=i.ownerDocument||i,g=i.createElement("script"),Ee(g),Le(g,"link",l),i.head.appendChild(g),n.instance=g);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,yl(l,r.precedence,i));return n.instance}function yl(i,n,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=l.length?l[l.length-1]:null,m=g,v=0;v<l.length;v++){var _=l[v];if(_.dataset.precedence===n)m=_;else if(m!==g)break}m?m.parentNode.insertBefore(i,m.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(i,n.firstChild))}function bh(i,n){i.crossOrigin==null&&(i.crossOrigin=n.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=n.referrerPolicy),i.title==null&&(i.title=n.title)}function yh(i,n){i.crossOrigin==null&&(i.crossOrigin=n.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=n.referrerPolicy),i.integrity==null&&(i.integrity=n.integrity)}var vl=null;function cm(i,n,r){if(vl===null){var l=new Map,g=vl=new Map;g.set(r,l)}else g=vl,l=g.get(r),l||(l=new Map,g.set(r,l));if(l.has(i))return l;for(l.set(i,null),r=r.getElementsByTagName(i),g=0;g<r.length;g++){var m=r[g];if(!(m[ja]||m[De]||i==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(n)||"";v=i+v;var _=l.get(v);_?_.push(m):l.set(v,[m])}}return l}function um(i,n,r){i=i.ownerDocument||i,i.head.insertBefore(r,n==="title"?i.querySelector("head > title"):null)}function P0(i,n,r){if(r===1||n.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(i=n.disabled,typeof n.precedence=="string"&&i==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function hm(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function F0(i,n,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=Aa(l.href),m=n.querySelector(Cr(g));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(i.count++,i=Al.bind(i),n.then(i,i)),r.state.loading|=4,r.instance=m,Ee(m);return}m=n.ownerDocument||n,l=om(l),(g=Oi.get(g))&&bh(l,g),m=m.createElement("link"),Ee(m);var v=m;v._p=new Promise(function(_,M){v.onload=_,v.onerror=M}),Le(m,"link",l),r.instance=m}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(i.count++,r=Al.bind(i),n.addEventListener("load",r),n.addEventListener("error",r))}}var vh=0;function U0(i,n){return i.stylesheets&&i.count===0&&wl(i,i.stylesheets),0<i.count||0<i.imgCount?function(r){var l=setTimeout(function(){if(i.stylesheets&&wl(i,i.stylesheets),i.unsuspend){var m=i.unsuspend;i.unsuspend=null,m()}},6e4+n);0<i.imgBytes&&vh===0&&(vh=62500*v0());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&wl(i,i.stylesheets),i.unsuspend)){var m=i.unsuspend;i.unsuspend=null,m()}},(i.imgBytes>vh?50:800)+n);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(l),clearTimeout(g)}}:null}function Al(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wl(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Sl=null;function wl(i,n){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Sl=new Map,n.forEach(I0,i),Sl=null,Al.call(i))}function I0(i,n){if(!(n.state.loading&4)){var r=Sl.get(i);if(r)var l=r.get(null);else{r=new Map,Sl.set(i,r);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<g.length;m++){var v=g[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),l=v)}l&&r.set(null,l)}g=n.instance,v=g.getAttribute("data-precedence"),m=r.get(v)||l,m===l&&r.set(null,g),r.set(v,g),this.count++,l=Al.bind(this),g.addEventListener("load",l),g.addEventListener("error",l),m?m.parentNode.insertBefore(g,m.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),n.state.loading|=4}}var xr={$$typeof:T,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function H0(i,n,r,l,g,m,v,_,M){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ke(0),this.hiddenUpdates=Ke(null),this.identifierPrefix=l,this.onUncaughtError=g,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function dm(i,n,r,l,g,m,v,_,M,I,V,$){return i=new H0(i,n,r,v,M,I,V,$,_),n=1,m===!0&&(n|=24),m=oi(3,null,null,n),i.current=m,m.stateNode=i,n=Zc(),n.refCount++,i.pooledCache=n,n.refCount++,m.memoizedState={element:l,isDehydrated:r,cache:n},iu(m),i}function fm(i){return i?(i=Zs,i):Zs}function gm(i,n,r,l,g,m){g=fm(g),l.context===null?l.context=g:l.pendingContext=g,l=Un(n),l.payload={element:r},m=m===void 0?null:m,m!==null&&(l.callback=m),r=In(i,l,n),r!==null&&(ei(r,i,n),ar(r,i,n))}function pm(i,n){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var r=i.retryLane;i.retryLane=r!==0&&r<n?r:n}}function Ah(i,n){pm(i,n),(i=i.alternate)&&pm(i,n)}function mm(i){if(i.tag===13||i.tag===31){var n=ps(i,67108864);n!==null&&ei(n,i,67108864),Ah(i,67108864)}}function bm(i){if(i.tag===13||i.tag===31){var n=di();n=ln(n);var r=ps(i,n);r!==null&&ei(r,i,n),Ah(i,n)}}var El=!0;function j0(i,n,r,l){var g=B.T;B.T=null;var m=P.p;try{P.p=2,Sh(i,n,r,l)}finally{P.p=m,B.T=g}}function G0(i,n,r,l){var g=B.T;B.T=null;var m=P.p;try{P.p=8,Sh(i,n,r,l)}finally{P.p=m,B.T=g}}function Sh(i,n,r,l){if(El){var g=wh(l);if(g===null)oh(i,n,l,_l,r),vm(i,l);else if(V0(g,i,n,r,l))l.stopPropagation();else if(vm(i,l),n&4&&-1<q0.indexOf(i)){for(;g!==null;){var m=Hs(g);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=ae(m.pendingLanes);if(v!==0){var _=m;for(_.pendingLanes|=2,_.entangledLanes|=2;v;){var M=1<<31-ze(v);_.entanglements[1]|=M,v&=~M}Zi(m),(Bt&6)===0&&(rl=Be()+500,Sr(0))}}break;case 31:case 13:_=ps(m,2),_!==null&&ei(_,m,2),ll(),Ah(m,2)}if(m=wh(l),m===null&&oh(i,n,l,_l,r),m===g)break;g=m}g!==null&&l.stopPropagation()}else oh(i,n,l,null,r)}}function wh(i){return i=_c(i),Eh(i)}var _l=null;function Eh(i){if(_l=null,i=Is(i),i!==null){var n=o(i);if(n===null)i=null;else{var r=n.tag;if(r===13){if(i=c(n),i!==null)return i;i=null}else if(r===31){if(i=u(n),i!==null)return i;i=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;i=null}else n!==i&&(i=null)}}return _l=i,null}function ym(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gc()){case po:return 2;case on:return 8;case Pi:case cs:return 32;case Ha:return 268435456;default:return 32}default:return 32}}var _h=!1,Wn=null,Zn=null,Jn=null,Dr=new Map,Mr=new Map,ts=[],q0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vm(i,n){switch(i){case"focusin":case"focusout":Wn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":Dr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mr.delete(n.pointerId)}}function Rr(i,n,r,l,g,m){return i===null||i.nativeEvent!==m?(i={blockedOn:n,domEventName:r,eventSystemFlags:l,nativeEvent:m,targetContainers:[g]},n!==null&&(n=Hs(n),n!==null&&mm(n)),i):(i.eventSystemFlags|=l,n=i.targetContainers,g!==null&&n.indexOf(g)===-1&&n.push(g),i)}function V0(i,n,r,l,g){switch(n){case"focusin":return Wn=Rr(Wn,i,n,r,l,g),!0;case"dragenter":return Zn=Rr(Zn,i,n,r,l,g),!0;case"mouseover":return Jn=Rr(Jn,i,n,r,l,g),!0;case"pointerover":var m=g.pointerId;return Dr.set(m,Rr(Dr.get(m)||null,i,n,r,l,g)),!0;case"gotpointercapture":return m=g.pointerId,Mr.set(m,Rr(Mr.get(m)||null,i,n,r,l,g)),!0}return!1}function Am(i){var n=Is(i.target);if(n!==null){var r=o(n);if(r!==null){if(n=r.tag,n===13){if(n=c(r),n!==null){i.blockedOn=n,Ln(i.priority,function(){bm(r)});return}}else if(n===31){if(n=u(r),n!==null){i.blockedOn=n,Ln(i.priority,function(){bm(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){i.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Cl(i){if(i.blockedOn!==null)return!1;for(var n=i.targetContainers;0<n.length;){var r=wh(i.nativeEvent);if(r===null){r=i.nativeEvent;var l=new r.constructor(r.type,r);Ec=l,r.target.dispatchEvent(l),Ec=null}else return n=Hs(r),n!==null&&mm(n),i.blockedOn=r,!1;n.shift()}return!0}function Sm(i,n,r){Cl(i)&&r.delete(n)}function X0(){_h=!1,Wn!==null&&Cl(Wn)&&(Wn=null),Zn!==null&&Cl(Zn)&&(Zn=null),Jn!==null&&Cl(Jn)&&(Jn=null),Dr.forEach(Sm),Mr.forEach(Sm)}function Tl(i,n){i.blockedOn===n&&(i.blockedOn=null,_h||(_h=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,X0)))}var xl=null;function wm(i){xl!==i&&(xl=i,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){xl===i&&(xl=null);for(var n=0;n<i.length;n+=3){var r=i[n],l=i[n+1],g=i[n+2];if(typeof l!="function"){if(Eh(l||r)===null)continue;break}var m=Hs(r);m!==null&&(i.splice(n,3),n-=3,wu(m,{pending:!0,data:g,method:r.method,action:l},l,g))}}))}function wa(i){function n(M){return Tl(M,i)}Wn!==null&&Tl(Wn,i),Zn!==null&&Tl(Zn,i),Jn!==null&&Tl(Jn,i),Dr.forEach(n),Mr.forEach(n);for(var r=0;r<ts.length;r++){var l=ts[r];l.blockedOn===i&&(l.blockedOn=null)}for(;0<ts.length&&(r=ts[0],r.blockedOn===null);)Am(r),r.blockedOn===null&&ts.shift();if(r=(i.ownerDocument||i).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var g=r[l],m=r[l+1],v=g[$e]||null;if(typeof m=="function")v||wm(r);else if(v){var _=null;if(m&&m.hasAttribute("formAction")){if(g=m,v=m[$e]||null)_=v.formAction;else if(Eh(g)!==null)continue}else _=v.action;typeof _=="function"?r[l+1]=_:(r.splice(l,3),l-=3),wm(r)}}}function Em(){function i(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return g=v})},focusReset:"manual",scroll:"manual"})}function n(){g!==null&&(g(),g=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),g!==null&&(g(),g=null)}}}function Ch(i){this._internalRoot=i}Dl.prototype.render=Ch.prototype.render=function(i){var n=this._internalRoot;if(n===null)throw Error(s(409));var r=n.current,l=di();gm(r,l,i,n,null,null)},Dl.prototype.unmount=Ch.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var n=i.containerInfo;gm(i.current,2,null,i,null,null),ll(),n[Us]=null}};function Dl(i){this._internalRoot=i}Dl.prototype.unstable_scheduleHydration=function(i){if(i){var n=Ui();i={blockedOn:null,target:i,priority:n};for(var r=0;r<ts.length&&n!==0&&n<ts[r].priority;r++);ts.splice(r,0,i),r===0&&Am(i)}};var _m=t.version;if(_m!=="19.2.3")throw Error(s(527,_m,"19.2.3"));P.findDOMNode=function(i){var n=i._reactInternals;if(n===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=f(n),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var Y0={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ml.isDisabled&&Ml.supportsFiber)try{us=Ml.inject(Y0),Ue=Ml}catch{}}return Lr.createRoot=function(i,n){if(!a(i))throw Error(s(299));var r=!1,l="",g=Og,m=Lg,v=Ng;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(g=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=dm(i,1,!1,null,null,r,l,null,g,m,v,Em),i[Us]=n.current,rh(i),new Ch(n)},Lr.hydrateRoot=function(i,n,r){if(!a(i))throw Error(s(299));var l=!1,g="",m=Og,v=Lg,_=Ng,M=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError),r.formState!==void 0&&(M=r.formState)),n=dm(i,1,!0,n,r??null,l,g,M,m,v,_,Em),n.context=fm(null),r=n.current,l=di(),l=ln(l),g=Un(l),g.callback=null,In(r,g,l),r=l,n.current.lanes=r,vi(n,r),Zi(n),i[Us]=n.current,rh(i),new Dl(n)},Lr.version="19.2.3",Lr}var zm;function iA(){if(zm)return Mh.exports;zm=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),Mh.exports=eA(),Mh.exports}var nA=iA();const sA=Tb(nA);const aA=h=>h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rA=h=>h.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,s)=>s?s.toUpperCase():e.toLowerCase()),Pm=h=>{const t=rA(h);return t.charAt(0).toUpperCase()+t.slice(1)},Db=(...h)=>h.filter((t,e,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===e).join(" ").trim(),oA=h=>{for(const t in h)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var lA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const cA=j.forwardRef(({color:h="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:c,...u},d)=>j.createElement("svg",{ref:d,...lA,width:t,height:t,stroke:h,strokeWidth:s?Number(e)*24/Number(t):e,className:Db("lucide",a),...!o&&!oA(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,p])=>j.createElement(f,p)),...Array.isArray(o)?o:[o]]));const tc=(h,t)=>{const e=j.forwardRef(({className:s,...a},o)=>j.createElement(cA,{ref:o,iconNode:t,className:Db(`lucide-${aA(Pm(h))}`,`lucide-${h}`,s),...a}));return e.displayName=Pm(h),e};const uA=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],hA=tc("file-text",uA);const dA=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],fA=tc("printer",dA);const gA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],pA=tc("trash-2",gA);const mA=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],bA=tc("upload",mA),Fm=({onFilesSelect:h})=>{const[t,e]=j.useState(!1),s=j.useCallback(u=>{u.preventDefault(),e(!0)},[]),a=j.useCallback(u=>{u.preventDefault(),e(!1)},[]),o=j.useCallback(u=>{u.preventDefault(),e(!1);const f=Array.from(u.dataTransfer.files).filter(p=>p.type==="application/pdf");f.length>0?h(f):alert("Please upload PDF files.")},[h]),c=j.useCallback(u=>{if(u.target.files&&u.target.files.length>0){const d=Array.from(u.target.files);h(d)}},[h]);return et.jsxs("div",{className:`dropzone ${t?"active":""}`,onDragOver:s,onDragLeave:a,onDrop:o,children:[et.jsx("input",{type:"file",id:"file-upload",accept:"application/pdf",multiple:!0,style:{display:"none"},onChange:c}),et.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem"},children:[et.jsx("div",{style:{backgroundColor:t?"#dbeafe":"#f3f4f6",padding:"1rem",borderRadius:"50%"},children:t?et.jsx(hA,{size:48,className:"text-blue-500"}):et.jsx(bA,{size:48,className:"text-gray-400"})}),et.jsxs("div",{children:[et.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem"},children:"Upload Lecture PDFs"}),et.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Drag & drop multiple PDFs here, or click to browse"}),et.jsx("label",{htmlFor:"file-upload",style:{backgroundColor:"#2563eb",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",fontWeight:500,cursor:"pointer",display:"inline-block"},children:"Select PDF Files"})]})]})]})},yA=({layout:h,setLayout:t,gap:e,setGap:s,paperSize:a,setPaperSize:o,orientation:c,setOrientation:u,onPrint:d,fileCount:f,onClearAll:p,title:b,setTitle:y})=>{const A=[{label:"1x1",rows:1,cols:1},{label:"1x2",rows:1,cols:2},{label:"2x2",rows:2,cols:2},{label:"2x3",rows:2,cols:3},{label:"3x3",rows:3,cols:3},{label:"4x4",rows:4,cols:4}];return et.jsxs("header",{className:"controls-header",style:{flexWrap:"wrap",gap:"1rem"},children:[et.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[et.jsx("div",{style:{fontWeight:700,fontSize:"1.25rem",color:"#2563eb"},children:"MochiMaker"}),et.jsx("div",{style:{color:"#9ca3af",fontSize:"1.25rem"},children:"/"}),et.jsx("input",{type:"text",placeholder:"Document Title (Header)",value:b,onChange:w=>y(w.target.value),style:{border:"none",borderBottom:"1px solid #ccc",outline:"none",fontSize:"1rem",padding:"0.25rem",minWidth:"200px",fontWeight:500}})]}),et.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem",flexWrap:"wrap",flex:1},children:[et.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[et.jsx("label",{style:{fontSize:"0.75rem",fontWeight:600,color:"#6b7280"},children:"PAPER"}),et.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[et.jsxs("select",{value:a,onChange:w=>o(w.target.value),style:{padding:"0.25rem",borderRadius:"0.25rem",border:"1px solid #d1d5db"},children:[et.jsx("option",{value:"a4",children:"A4"}),et.jsx("option",{value:"a3",children:"A3"}),et.jsx("option",{value:"b5",children:"B5"}),et.jsx("option",{value:"b4",children:"B4"}),et.jsx("option",{value:"letter",children:"Letter"})]}),et.jsxs("select",{value:c,onChange:w=>u(w.target.value),style:{padding:"0.25rem",borderRadius:"0.25rem",border:"1px solid #d1d5db"},children:[et.jsx("option",{value:"portrait",children:"Portrait"}),et.jsx("option",{value:"landscape",children:"Landscape"})]})]})]}),et.jsx("div",{className:"divider",style:{width:"1px",height:"32px",backgroundColor:"#e5e7eb"}}),et.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[et.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[et.jsx("label",{style:{fontSize:"0.75rem",fontWeight:600,color:"#6b7280"},children:"GRID"}),et.jsx("div",{style:{display:"flex",gap:"0.25rem",flexWrap:"wrap"},children:A.map(w=>et.jsx("button",{onClick:()=>t({rows:w.rows,cols:w.cols}),style:{padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem",backgroundColor:h.rows===w.rows&&h.cols===w.cols?"#dbeafe":"transparent",color:h.rows===w.rows&&h.cols===w.cols?"#2563eb":"#4b5563",border:"1px solid",borderColor:h.rows===w.rows&&h.cols===w.cols?"#2563eb":"#d1d5db"},title:`${w.rows} Rows x ${w.cols} Cols`,children:w.label},w.label))})]}),et.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[et.jsx("label",{style:{fontSize:"0.75rem",fontWeight:600,color:"#6b7280"},children:"GAP"}),et.jsx("input",{type:"range",min:"0",max:"50",value:e,onChange:w=>s(parseInt(w.target.value)),style:{width:"60px"},title:`Gap: ${e}px`})]})]}),et.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginLeft:"auto"},children:[f>0&&et.jsx("button",{onClick:p,style:{padding:"0.75rem",borderRadius:"0.5rem",color:"#ef4444",fontWeight:600,border:"1px solid #fee2e2",backgroundColor:"#fef2f2"},title:"Clear All Pages",children:et.jsx(pA,{size:20})}),et.jsxs("button",{onClick:d,style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"#2563eb",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",fontWeight:600,boxShadow:"0 1px 2px 0 rgb(0 0 0 / 0.05)"},children:[et.jsx(fA,{size:20}),"Print"]})]})]})]})};var Ur=xb();function vA(){for(var h=arguments.length,t=new Array(h),e=0;e<h;e++)t[e]=arguments[e];return j.useMemo(()=>s=>{t.forEach(a=>a(s))},t)}const ec=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Pa(h){const t=Object.prototype.toString.call(h);return t==="[object Window]"||t==="[object global]"}function hd(h){return"nodeType"in h}function qe(h){var t,e;return h?Pa(h)?h:hd(h)&&(t=(e=h.ownerDocument)==null?void 0:e.defaultView)!=null?t:window:window}function dd(h){const{Document:t}=qe(h);return h instanceof t}function eo(h){return Pa(h)?!1:h instanceof qe(h).HTMLElement}function Mb(h){return h instanceof qe(h).SVGElement}function Fa(h){return h?Pa(h)?h.document:hd(h)?dd(h)?h:eo(h)||Mb(h)?h.ownerDocument:document:document:document}const qi=ec?j.useLayoutEffect:j.useEffect;function ic(h){const t=j.useRef(h);return qi(()=>{t.current=h}),j.useCallback(function(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t.current==null?void 0:t.current(...s)},[])}function AA(){const h=j.useRef(null),t=j.useCallback((s,a)=>{h.current=setInterval(s,a)},[]),e=j.useCallback(()=>{h.current!==null&&(clearInterval(h.current),h.current=null)},[]);return[t,e]}function Yr(h,t){t===void 0&&(t=[h]);const e=j.useRef(h);return qi(()=>{e.current!==h&&(e.current=h)},t),e}function io(h,t){const e=j.useRef();return j.useMemo(()=>{const s=h(e.current);return e.current=s,s},[...t])}function ql(h){const t=ic(h),e=j.useRef(null),s=j.useCallback(a=>{a!==e.current&&t?.(a,e.current),e.current=a},[]);return[e,s]}function Vl(h){const t=j.useRef();return j.useEffect(()=>{t.current=h},[h]),t.current}let Nh={};function no(h,t){return j.useMemo(()=>{if(t)return t;const e=Nh[h]==null?0:Nh[h]+1;return Nh[h]=e,h+"-"+e},[h,t])}function Rb(h){return function(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),a=1;a<e;a++)s[a-1]=arguments[a];return s.reduce((o,c)=>{const u=Object.entries(c);for(const[d,f]of u){const p=o[d];p!=null&&(o[d]=p+h*f)}return o},{...t})}}const Ra=Rb(1),Kr=Rb(-1);function SA(h){return"clientX"in h&&"clientY"in h}function nc(h){if(!h)return!1;const{KeyboardEvent:t}=qe(h.target);return t&&h instanceof t}function wA(h){if(!h)return!1;const{TouchEvent:t}=qe(h.target);return t&&h instanceof t}function Xl(h){if(wA(h)){if(h.touches&&h.touches.length){const{clientX:t,clientY:e}=h.touches[0];return{x:t,y:e}}else if(h.changedTouches&&h.changedTouches.length){const{clientX:t,clientY:e}=h.changedTouches[0];return{x:t,y:e}}}return SA(h)?{x:h.clientX,y:h.clientY}:null}const as=Object.freeze({Translate:{toString(h){if(!h)return;const{x:t,y:e}=h;return"translate3d("+(t?Math.round(t):0)+"px, "+(e?Math.round(e):0)+"px, 0)"}},Scale:{toString(h){if(!h)return;const{scaleX:t,scaleY:e}=h;return"scaleX("+t+") scaleY("+e+")"}},Transform:{toString(h){if(h)return[as.Translate.toString(h),as.Scale.toString(h)].join(" ")}},Transition:{toString(h){let{property:t,duration:e,easing:s}=h;return t+" "+e+"ms "+s}}}),Um="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function EA(h){return h.matches(Um)?h:h.querySelector(Um)}const _A={display:"none"};function CA(h){let{id:t,value:e}=h;return Zt.createElement("div",{id:t,style:_A},e)}function TA(h){let{id:t,announcement:e,ariaLiveType:s="assertive"}=h;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Zt.createElement("div",{id:t,style:a,role:"status","aria-live":s,"aria-atomic":!0},e)}function xA(){const[h,t]=j.useState("");return{announce:j.useCallback(s=>{s!=null&&t(s)},[]),announcement:h}}const Ob=j.createContext(null);function DA(h){const t=j.useContext(Ob);j.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(h)},[h,t])}function MA(){const[h]=j.useState(()=>new Set),t=j.useCallback(s=>(h.add(s),()=>h.delete(s)),[h]);return[j.useCallback(s=>{let{type:a,event:o}=s;h.forEach(c=>{var u;return(u=c[a])==null?void 0:u.call(c,o)})},[h]),t]}const RA={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},OA={onDragStart(h){let{active:t}=h;return"Picked up draggable item "+t.id+"."},onDragOver(h){let{active:t,over:e}=h;return e?"Draggable item "+t.id+" was moved over droppable area "+e.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(h){let{active:t,over:e}=h;return e?"Draggable item "+t.id+" was dropped over droppable area "+e.id:"Draggable item "+t.id+" was dropped."},onDragCancel(h){let{active:t}=h;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function LA(h){let{announcements:t=OA,container:e,hiddenTextDescribedById:s,screenReaderInstructions:a=RA}=h;const{announce:o,announcement:c}=xA(),u=no("DndLiveRegion"),[d,f]=j.useState(!1);if(j.useEffect(()=>{f(!0)},[]),DA(j.useMemo(()=>({onDragStart(b){let{active:y}=b;o(t.onDragStart({active:y}))},onDragMove(b){let{active:y,over:A}=b;t.onDragMove&&o(t.onDragMove({active:y,over:A}))},onDragOver(b){let{active:y,over:A}=b;o(t.onDragOver({active:y,over:A}))},onDragEnd(b){let{active:y,over:A}=b;o(t.onDragEnd({active:y,over:A}))},onDragCancel(b){let{active:y,over:A}=b;o(t.onDragCancel({active:y,over:A}))}}),[o,t])),!d)return null;const p=Zt.createElement(Zt.Fragment,null,Zt.createElement(CA,{id:s,value:a.draggable}),Zt.createElement(TA,{id:u,announcement:c}));return e?Ur.createPortal(p,e):p}var ve;(function(h){h.DragStart="dragStart",h.DragMove="dragMove",h.DragEnd="dragEnd",h.DragCancel="dragCancel",h.DragOver="dragOver",h.RegisterDroppable="registerDroppable",h.SetDroppableDisabled="setDroppableDisabled",h.UnregisterDroppable="unregisterDroppable"})(ve||(ve={}));function Yl(){}function kh(h,t){return j.useMemo(()=>({sensor:h,options:t??{}}),[h,t])}function NA(){for(var h=arguments.length,t=new Array(h),e=0;e<h;e++)t[e]=arguments[e];return j.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const Vi=Object.freeze({x:0,y:0});function Lb(h,t){return Math.sqrt(Math.pow(h.x-t.x,2)+Math.pow(h.y-t.y,2))}function kA(h,t){const e=Xl(h);if(!e)return"0 0";const s={x:(e.x-t.left)/t.width*100,y:(e.y-t.top)/t.height*100};return s.x+"% "+s.y+"%"}function Nb(h,t){let{data:{value:e}}=h,{data:{value:s}}=t;return e-s}function BA(h,t){let{data:{value:e}}=h,{data:{value:s}}=t;return s-e}function Im(h){let{left:t,top:e,height:s,width:a}=h;return[{x:t,y:e},{x:t+a,y:e},{x:t,y:e+s},{x:t+a,y:e+s}]}function kb(h,t){if(!h||h.length===0)return null;const[e]=h;return e[t]}function Hm(h,t,e){return t===void 0&&(t=h.left),e===void 0&&(e=h.top),{x:t+h.width*.5,y:e+h.height*.5}}const zA=h=>{let{collisionRect:t,droppableRects:e,droppableContainers:s}=h;const a=Hm(t,t.left,t.top),o=[];for(const c of s){const{id:u}=c,d=e.get(u);if(d){const f=Lb(Hm(d),a);o.push({id:u,data:{droppableContainer:c,value:f}})}}return o.sort(Nb)},PA=h=>{let{collisionRect:t,droppableRects:e,droppableContainers:s}=h;const a=Im(t),o=[];for(const c of s){const{id:u}=c,d=e.get(u);if(d){const f=Im(d),p=a.reduce((y,A,w)=>y+Lb(f[w],A),0),b=Number((p/4).toFixed(4));o.push({id:u,data:{droppableContainer:c,value:b}})}}return o.sort(Nb)};function FA(h,t){const e=Math.max(t.top,h.top),s=Math.max(t.left,h.left),a=Math.min(t.left+t.width,h.left+h.width),o=Math.min(t.top+t.height,h.top+h.height),c=a-s,u=o-e;if(s<a&&e<o){const d=t.width*t.height,f=h.width*h.height,p=c*u,b=p/(d+f-p);return Number(b.toFixed(4))}return 0}const UA=h=>{let{collisionRect:t,droppableRects:e,droppableContainers:s}=h;const a=[];for(const o of s){const{id:c}=o,u=e.get(c);if(u){const d=FA(u,t);d>0&&a.push({id:c,data:{droppableContainer:o,value:d}})}}return a.sort(BA)};function IA(h,t,e){return{...h,scaleX:t&&e?t.width/e.width:1,scaleY:t&&e?t.height/e.height:1}}function Bb(h,t){return h&&t?{x:h.left-t.left,y:h.top-t.top}:Vi}function HA(h){return function(e){for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return a.reduce((c,u)=>({...c,top:c.top+h*u.y,bottom:c.bottom+h*u.y,left:c.left+h*u.x,right:c.right+h*u.x}),{...e})}}const jA=HA(1);function zb(h){if(h.startsWith("matrix3d(")){const t=h.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(h.startsWith("matrix(")){const t=h.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function GA(h,t,e){const s=zb(t);if(!s)return h;const{scaleX:a,scaleY:o,x:c,y:u}=s,d=h.left-c-(1-a)*parseFloat(e),f=h.top-u-(1-o)*parseFloat(e.slice(e.indexOf(" ")+1)),p=a?h.width/a:h.width,b=o?h.height/o:h.height;return{width:p,height:b,top:f,right:d+p,bottom:f+b,left:d}}const qA={ignoreTransform:!1};function Ua(h,t){t===void 0&&(t=qA);let e=h.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:p}=qe(h).getComputedStyle(h);f&&(e=GA(e,f,p))}const{top:s,left:a,width:o,height:c,bottom:u,right:d}=e;return{top:s,left:a,width:o,height:c,bottom:u,right:d}}function jm(h){return Ua(h,{ignoreTransform:!0})}function VA(h){const t=h.innerWidth,e=h.innerHeight;return{top:0,left:0,right:t,bottom:e,width:t,height:e}}function XA(h,t){return t===void 0&&(t=qe(h).getComputedStyle(h)),t.position==="fixed"}function YA(h,t){t===void 0&&(t=qe(h).getComputedStyle(h));const e=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=t[a];return typeof o=="string"?e.test(o):!1})}function sc(h,t){const e=[];function s(a){if(t!=null&&e.length>=t||!a)return e;if(dd(a)&&a.scrollingElement!=null&&!e.includes(a.scrollingElement))return e.push(a.scrollingElement),e;if(!eo(a)||Mb(a)||e.includes(a))return e;const o=qe(h).getComputedStyle(a);return a!==h&&YA(a,o)&&e.push(a),XA(a,o)?e:s(a.parentNode)}return h?s(h):e}function Pb(h){const[t]=sc(h,1);return t??null}function Bh(h){return!ec||!h?null:Pa(h)?h:hd(h)?dd(h)||h===Fa(h).scrollingElement?window:eo(h)?h:null:null}function Fb(h){return Pa(h)?h.scrollX:h.scrollLeft}function Ub(h){return Pa(h)?h.scrollY:h.scrollTop}function Yh(h){return{x:Fb(h),y:Ub(h)}}var xe;(function(h){h[h.Forward=1]="Forward",h[h.Backward=-1]="Backward"})(xe||(xe={}));function Ib(h){return!ec||!h?!1:h===document.scrollingElement}function Hb(h){const t={x:0,y:0},e=Ib(h)?{height:window.innerHeight,width:window.innerWidth}:{height:h.clientHeight,width:h.clientWidth},s={x:h.scrollWidth-e.width,y:h.scrollHeight-e.height},a=h.scrollTop<=t.y,o=h.scrollLeft<=t.x,c=h.scrollTop>=s.y,u=h.scrollLeft>=s.x;return{isTop:a,isLeft:o,isBottom:c,isRight:u,maxScroll:s,minScroll:t}}const KA={x:.2,y:.2};function $A(h,t,e,s,a){let{top:o,left:c,right:u,bottom:d}=e;s===void 0&&(s=10),a===void 0&&(a=KA);const{isTop:f,isBottom:p,isLeft:b,isRight:y}=Hb(h),A={x:0,y:0},w={x:0,y:0},S={height:t.height*a.y,width:t.width*a.x};return!f&&o<=t.top+S.height?(A.y=xe.Backward,w.y=s*Math.abs((t.top+S.height-o)/S.height)):!p&&d>=t.bottom-S.height&&(A.y=xe.Forward,w.y=s*Math.abs((t.bottom-S.height-d)/S.height)),!y&&u>=t.right-S.width?(A.x=xe.Forward,w.x=s*Math.abs((t.right-S.width-u)/S.width)):!b&&c<=t.left+S.width&&(A.x=xe.Backward,w.x=s*Math.abs((t.left+S.width-c)/S.width)),{direction:A,speed:w}}function QA(h){if(h===document.scrollingElement){const{innerWidth:o,innerHeight:c}=window;return{top:0,left:0,right:o,bottom:c,width:o,height:c}}const{top:t,left:e,right:s,bottom:a}=h.getBoundingClientRect();return{top:t,left:e,right:s,bottom:a,width:h.clientWidth,height:h.clientHeight}}function jb(h){return h.reduce((t,e)=>Ra(t,Yh(e)),Vi)}function WA(h){return h.reduce((t,e)=>t+Fb(e),0)}function ZA(h){return h.reduce((t,e)=>t+Ub(e),0)}function Gb(h,t){if(t===void 0&&(t=Ua),!h)return;const{top:e,left:s,bottom:a,right:o}=t(h);Pb(h)&&(a<=0||o<=0||e>=window.innerHeight||s>=window.innerWidth)&&h.scrollIntoView({block:"center",inline:"center"})}const JA=[["x",["left","right"],WA],["y",["top","bottom"],ZA]];class fd{constructor(t,e){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=sc(e),a=jb(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,c,u]of JA)for(const d of c)Object.defineProperty(this,d,{get:()=>{const f=u(s),p=a[o]-f;return this.rect[d]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Gr{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...e)})},this.target=t}add(t,e,s){var a;(a=this.target)==null||a.addEventListener(t,e,s),this.listeners.push([t,e,s])}}function tS(h){const{EventTarget:t}=qe(h);return h instanceof t?h:Fa(h)}function zh(h,t){const e=Math.abs(h.x),s=Math.abs(h.y);return typeof t=="number"?Math.sqrt(e**2+s**2)>t:"x"in t&&"y"in t?e>t.x&&s>t.y:"x"in t?e>t.x:"y"in t?s>t.y:!1}var Bi;(function(h){h.Click="click",h.DragStart="dragstart",h.Keydown="keydown",h.ContextMenu="contextmenu",h.Resize="resize",h.SelectionChange="selectionchange",h.VisibilityChange="visibilitychange"})(Bi||(Bi={}));function Gm(h){h.preventDefault()}function eS(h){h.stopPropagation()}var Rt;(function(h){h.Space="Space",h.Down="ArrowDown",h.Right="ArrowRight",h.Left="ArrowLeft",h.Up="ArrowUp",h.Esc="Escape",h.Enter="Enter",h.Tab="Tab"})(Rt||(Rt={}));const qb={start:[Rt.Space,Rt.Enter],cancel:[Rt.Esc],end:[Rt.Space,Rt.Enter,Rt.Tab]},iS=(h,t)=>{let{currentCoordinates:e}=t;switch(h.code){case Rt.Right:return{...e,x:e.x+25};case Rt.Left:return{...e,x:e.x-25};case Rt.Down:return{...e,y:e.y+25};case Rt.Up:return{...e,y:e.y-25}}};class gd{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:e}}=t;this.props=t,this.listeners=new Gr(Fa(e)),this.windowListeners=new Gr(qe(e)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Bi.Resize,this.handleCancel),this.windowListeners.add(Bi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Bi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:e}=this.props,s=t.node.current;s&&Gb(s),e(Vi)}handleKeyDown(t){if(nc(t)){const{active:e,context:s,options:a}=this.props,{keyboardCodes:o=qb,coordinateGetter:c=iS,scrollBehavior:u="smooth"}=a,{code:d}=t;if(o.end.includes(d)){this.handleEnd(t);return}if(o.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:f}=s.current,p=f?{x:f.left,y:f.top}:Vi;this.referenceCoordinates||(this.referenceCoordinates=p);const b=c(t,{active:e,context:s.current,currentCoordinates:p});if(b){const y=Kr(b,p),A={x:0,y:0},{scrollableAncestors:w}=s.current;for(const S of w){const C=t.code,{isTop:E,isRight:x,isLeft:T,isBottom:O,maxScroll:R,minScroll:L}=Hb(S),k=QA(S),q={x:Math.min(C===Rt.Right?k.right-k.width/2:k.right,Math.max(C===Rt.Right?k.left:k.left+k.width/2,b.x)),y:Math.min(C===Rt.Down?k.bottom-k.height/2:k.bottom,Math.max(C===Rt.Down?k.top:k.top+k.height/2,b.y))},X=C===Rt.Right&&!x||C===Rt.Left&&!T,Z=C===Rt.Down&&!O||C===Rt.Up&&!E;if(X&&q.x!==b.x){const Q=S.scrollLeft+y.x,at=C===Rt.Right&&Q<=R.x||C===Rt.Left&&Q>=L.x;if(at&&!y.y){S.scrollTo({left:Q,behavior:u});return}at?A.x=S.scrollLeft-Q:A.x=C===Rt.Right?S.scrollLeft-R.x:S.scrollLeft-L.x,A.x&&S.scrollBy({left:-A.x,behavior:u});break}else if(Z&&q.y!==b.y){const Q=S.scrollTop+y.y,at=C===Rt.Down&&Q<=R.y||C===Rt.Up&&Q>=L.y;if(at&&!y.x){S.scrollTo({top:Q,behavior:u});return}at?A.y=S.scrollTop-Q:A.y=C===Rt.Down?S.scrollTop-R.y:S.scrollTop-L.y,A.y&&S.scrollBy({top:-A.y,behavior:u});break}}this.handleMove(t,Ra(Kr(b,this.referenceCoordinates),A))}}}handleMove(t,e){const{onMove:s}=this.props;t.preventDefault(),s(e)}handleEnd(t){const{onEnd:e}=this.props;t.preventDefault(),this.detach(),e()}handleCancel(t){const{onCancel:e}=this.props;t.preventDefault(),this.detach(),e()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}gd.activators=[{eventName:"onKeyDown",handler:(h,t,e)=>{let{keyboardCodes:s=qb,onActivation:a}=t,{active:o}=e;const{code:c}=h.nativeEvent;if(s.start.includes(c)){const u=o.activatorNode.current;return u&&h.target!==u?!1:(h.preventDefault(),a?.({event:h.nativeEvent}),!0)}return!1}}];function qm(h){return!!(h&&"distance"in h)}function Vm(h){return!!(h&&"delay"in h)}class pd{constructor(t,e,s){var a;s===void 0&&(s=tS(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=e;const{event:o}=t,{target:c}=o;this.props=t,this.events=e,this.document=Fa(c),this.documentListeners=new Gr(this.document),this.listeners=new Gr(s),this.windowListeners=new Gr(qe(c)),this.initialCoordinates=(a=Xl(o))!=null?a:Vi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:e,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Bi.Resize,this.handleCancel),this.windowListeners.add(Bi.DragStart,Gm),this.windowListeners.add(Bi.VisibilityChange,this.handleCancel),this.windowListeners.add(Bi.ContextMenu,Gm),this.documentListeners.add(Bi.Keydown,this.handleKeydown),e){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Vm(e)){this.timeoutId=setTimeout(this.handleStart,e.delay),this.handlePending(e);return}if(qm(e)){this.handlePending(e);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,e){const{active:s,onPending:a}=this.props;a(s,t,this.initialCoordinates,e)}handleStart(){const{initialCoordinates:t}=this,{onStart:e}=this.props;t&&(this.activated=!0,this.documentListeners.add(Bi.Click,eS,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Bi.SelectionChange,this.removeTextSelection),e(t))}handleMove(t){var e;const{activated:s,initialCoordinates:a,props:o}=this,{onMove:c,options:{activationConstraint:u}}=o;if(!a)return;const d=(e=Xl(t))!=null?e:Vi,f=Kr(a,d);if(!s&&u){if(qm(u)){if(u.tolerance!=null&&zh(f,u.tolerance))return this.handleCancel();if(zh(f,u.distance))return this.handleStart()}if(Vm(u)&&zh(f,u.tolerance))return this.handleCancel();this.handlePending(u,f);return}t.cancelable&&t.preventDefault(),c(d)}handleEnd(){const{onAbort:t,onEnd:e}=this.props;this.detach(),this.activated||t(this.props.active),e()}handleCancel(){const{onAbort:t,onCancel:e}=this.props;this.detach(),this.activated||t(this.props.active),e()}handleKeydown(t){t.code===Rt.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const nS={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Vb extends pd{constructor(t){const{event:e}=t,s=Fa(e.target);super(t,nS,s)}}Vb.activators=[{eventName:"onPointerDown",handler:(h,t)=>{let{nativeEvent:e}=h,{onActivation:s}=t;return!e.isPrimary||e.button!==0?!1:(s?.({event:e}),!0)}}];const sS={move:{name:"mousemove"},end:{name:"mouseup"}};var Kh;(function(h){h[h.RightClick=2]="RightClick"})(Kh||(Kh={}));class Xb extends pd{constructor(t){super(t,sS,Fa(t.event.target))}}Xb.activators=[{eventName:"onMouseDown",handler:(h,t)=>{let{nativeEvent:e}=h,{onActivation:s}=t;return e.button===Kh.RightClick?!1:(s?.({event:e}),!0)}}];const Ph={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Yb extends pd{constructor(t){super(t,Ph)}static setup(){return window.addEventListener(Ph.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ph.move.name,t)};function t(){}}}Yb.activators=[{eventName:"onTouchStart",handler:(h,t)=>{let{nativeEvent:e}=h,{onActivation:s}=t;const{touches:a}=e;return a.length>1?!1:(s?.({event:e}),!0)}}];var qr;(function(h){h[h.Pointer=0]="Pointer",h[h.DraggableRect=1]="DraggableRect"})(qr||(qr={}));var Kl;(function(h){h[h.TreeOrder=0]="TreeOrder",h[h.ReversedTreeOrder=1]="ReversedTreeOrder"})(Kl||(Kl={}));function aS(h){let{acceleration:t,activator:e=qr.Pointer,canScroll:s,draggingRect:a,enabled:o,interval:c=5,order:u=Kl.TreeOrder,pointerCoordinates:d,scrollableAncestors:f,scrollableAncestorRects:p,delta:b,threshold:y}=h;const A=oS({delta:b,disabled:!o}),[w,S]=AA(),C=j.useRef({x:0,y:0}),E=j.useRef({x:0,y:0}),x=j.useMemo(()=>{switch(e){case qr.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case qr.DraggableRect:return a}},[e,a,d]),T=j.useRef(null),O=j.useCallback(()=>{const L=T.current;if(!L)return;const k=C.current.x*E.current.x,q=C.current.y*E.current.y;L.scrollBy(k,q)},[]),R=j.useMemo(()=>u===Kl.TreeOrder?[...f].reverse():f,[u,f]);j.useEffect(()=>{if(!o||!f.length||!x){S();return}for(const L of R){if(s?.(L)===!1)continue;const k=f.indexOf(L),q=p[k];if(!q)continue;const{direction:X,speed:Z}=$A(L,q,x,t,y);for(const Q of["x","y"])A[Q][X[Q]]||(Z[Q]=0,X[Q]=0);if(Z.x>0||Z.y>0){S(),T.current=L,w(O,c),C.current=Z,E.current=X;return}}C.current={x:0,y:0},E.current={x:0,y:0},S()},[t,O,s,S,o,c,JSON.stringify(x),JSON.stringify(A),w,f,R,p,JSON.stringify(y)])}const rS={x:{[xe.Backward]:!1,[xe.Forward]:!1},y:{[xe.Backward]:!1,[xe.Forward]:!1}};function oS(h){let{delta:t,disabled:e}=h;const s=Vl(t);return io(a=>{if(e||!s||!a)return rS;const o={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[xe.Backward]:a.x[xe.Backward]||o.x===-1,[xe.Forward]:a.x[xe.Forward]||o.x===1},y:{[xe.Backward]:a.y[xe.Backward]||o.y===-1,[xe.Forward]:a.y[xe.Forward]||o.y===1}}},[e,t,s])}function lS(h,t){const e=t!=null?h.get(t):void 0,s=e?e.node.current:null;return io(a=>{var o;return t==null?null:(o=s??a)!=null?o:null},[s,t])}function cS(h,t){return j.useMemo(()=>h.reduce((e,s)=>{const{sensor:a}=s,o=a.activators.map(c=>({eventName:c.eventName,handler:t(c.handler,s)}));return[...e,...o]},[]),[h,t])}var $r;(function(h){h[h.Always=0]="Always",h[h.BeforeDragging=1]="BeforeDragging",h[h.WhileDragging=2]="WhileDragging"})($r||($r={}));var $h;(function(h){h.Optimized="optimized"})($h||($h={}));const Xm=new Map;function uS(h,t){let{dragging:e,dependencies:s,config:a}=t;const[o,c]=j.useState(null),{frequency:u,measure:d,strategy:f}=a,p=j.useRef(h),b=C(),y=Yr(b),A=j.useCallback(function(E){E===void 0&&(E=[]),!y.current&&c(x=>x===null?E:x.concat(E.filter(T=>!x.includes(T))))},[y]),w=j.useRef(null),S=io(E=>{if(b&&!e)return Xm;if(!E||E===Xm||p.current!==h||o!=null){const x=new Map;for(let T of h){if(!T)continue;if(o&&o.length>0&&!o.includes(T.id)&&T.rect.current){x.set(T.id,T.rect.current);continue}const O=T.node.current,R=O?new fd(d(O),O):null;T.rect.current=R,R&&x.set(T.id,R)}return x}return E},[h,o,e,b,d]);return j.useEffect(()=>{p.current=h},[h]),j.useEffect(()=>{b||A()},[e,b]),j.useEffect(()=>{o&&o.length>0&&c(null)},[JSON.stringify(o)]),j.useEffect(()=>{b||typeof u!="number"||w.current!==null||(w.current=setTimeout(()=>{A(),w.current=null},u))},[u,b,A,...s]),{droppableRects:S,measureDroppableContainers:A,measuringScheduled:o!=null};function C(){switch(f){case $r.Always:return!1;case $r.BeforeDragging:return e;default:return!e}}}function md(h,t){return io(e=>h?e||(typeof t=="function"?t(h):h):null,[t,h])}function hS(h,t){return md(h,t)}function dS(h){let{callback:t,disabled:e}=h;const s=ic(t),a=j.useMemo(()=>{if(e||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(s)},[s,e]);return j.useEffect(()=>()=>a?.disconnect(),[a]),a}function ac(h){let{callback:t,disabled:e}=h;const s=ic(t),a=j.useMemo(()=>{if(e||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(s)},[e]);return j.useEffect(()=>()=>a?.disconnect(),[a]),a}function fS(h){return new fd(Ua(h),h)}function Ym(h,t,e){t===void 0&&(t=fS);const[s,a]=j.useState(null);function o(){a(d=>{if(!h)return null;if(h.isConnected===!1){var f;return(f=d??e)!=null?f:null}const p=t(h);return JSON.stringify(d)===JSON.stringify(p)?d:p})}const c=dS({callback(d){if(h)for(const f of d){const{type:p,target:b}=f;if(p==="childList"&&b instanceof HTMLElement&&b.contains(h)){o();break}}}}),u=ac({callback:o});return qi(()=>{o(),h?(u?.observe(h),c?.observe(document.body,{childList:!0,subtree:!0})):(u?.disconnect(),c?.disconnect())},[h]),s}function gS(h){const t=md(h);return Bb(h,t)}const Km=[];function pS(h){const t=j.useRef(h),e=io(s=>h?s&&s!==Km&&h&&t.current&&h.parentNode===t.current.parentNode?s:sc(h):Km,[h]);return j.useEffect(()=>{t.current=h},[h]),e}function mS(h){const[t,e]=j.useState(null),s=j.useRef(h),a=j.useCallback(o=>{const c=Bh(o.target);c&&e(u=>u?(u.set(c,Yh(c)),new Map(u)):null)},[]);return j.useEffect(()=>{const o=s.current;if(h!==o){c(o);const u=h.map(d=>{const f=Bh(d);return f?(f.addEventListener("scroll",a,{passive:!0}),[f,Yh(f)]):null}).filter(d=>d!=null);e(u.length?new Map(u):null),s.current=h}return()=>{c(h),c(o)};function c(u){u.forEach(d=>{const f=Bh(d);f?.removeEventListener("scroll",a)})}},[a,h]),j.useMemo(()=>h.length?t?Array.from(t.values()).reduce((o,c)=>Ra(o,c),Vi):jb(h):Vi,[h,t])}function $m(h,t){t===void 0&&(t=[]);const e=j.useRef(null);return j.useEffect(()=>{e.current=null},t),j.useEffect(()=>{const s=h!==Vi;s&&!e.current&&(e.current=h),!s&&e.current&&(e.current=null)},[h]),e.current?Kr(h,e.current):Vi}function bS(h){j.useEffect(()=>{if(!ec)return;const t=h.map(e=>{let{sensor:s}=e;return s.setup==null?void 0:s.setup()});return()=>{for(const e of t)e?.()}},h.map(t=>{let{sensor:e}=t;return e}))}function yS(h,t){return j.useMemo(()=>h.reduce((e,s)=>{let{eventName:a,handler:o}=s;return e[a]=c=>{o(c,t)},e},{}),[h,t])}function Kb(h){return j.useMemo(()=>h?VA(h):null,[h])}const Qm=[];function vS(h,t){t===void 0&&(t=Ua);const[e]=h,s=Kb(e?qe(e):null),[a,o]=j.useState(Qm);function c(){o(()=>h.length?h.map(d=>Ib(d)?s:new fd(t(d),d)):Qm)}const u=ac({callback:c});return qi(()=>{u?.disconnect(),c(),h.forEach(d=>u?.observe(d))},[h]),a}function $b(h){if(!h)return null;if(h.children.length>1)return h;const t=h.children[0];return eo(t)?t:h}function AS(h){let{measure:t}=h;const[e,s]=j.useState(null),a=j.useCallback(f=>{for(const{target:p}of f)if(eo(p)){s(b=>{const y=t(p);return b?{...b,width:y.width,height:y.height}:y});break}},[t]),o=ac({callback:a}),c=j.useCallback(f=>{const p=$b(f);o?.disconnect(),p&&o?.observe(p),s(p?t(p):null)},[t,o]),[u,d]=ql(c);return j.useMemo(()=>({nodeRef:u,rect:e,setRef:d}),[e,u,d])}const SS=[{sensor:Vb,options:{}},{sensor:gd,options:{}}],wS={current:{}},Il={draggable:{measure:jm},droppable:{measure:jm,strategy:$r.WhileDragging,frequency:$h.Optimized},dragOverlay:{measure:Ua}};class Vr extends Map{get(t){var e;return t!=null&&(e=super.get(t))!=null?e:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:e}=t;return!e})}getNodeFor(t){var e,s;return(e=(s=this.get(t))==null?void 0:s.node.current)!=null?e:void 0}}const ES={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Vr,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Yl},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Il,measureDroppableContainers:Yl,windowRect:null,measuringScheduled:!1},Qb={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Yl,draggableNodes:new Map,over:null,measureDroppableContainers:Yl},so=j.createContext(Qb),Wb=j.createContext(ES);function _S(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Vr}}}function CS(h,t){switch(t.type){case ve.DragStart:return{...h,draggable:{...h.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ve.DragMove:return h.draggable.active==null?h:{...h,draggable:{...h.draggable,translate:{x:t.coordinates.x-h.draggable.initialCoordinates.x,y:t.coordinates.y-h.draggable.initialCoordinates.y}}};case ve.DragEnd:case ve.DragCancel:return{...h,draggable:{...h.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ve.RegisterDroppable:{const{element:e}=t,{id:s}=e,a=new Vr(h.droppable.containers);return a.set(s,e),{...h,droppable:{...h.droppable,containers:a}}}case ve.SetDroppableDisabled:{const{id:e,key:s,disabled:a}=t,o=h.droppable.containers.get(e);if(!o||s!==o.key)return h;const c=new Vr(h.droppable.containers);return c.set(e,{...o,disabled:a}),{...h,droppable:{...h.droppable,containers:c}}}case ve.UnregisterDroppable:{const{id:e,key:s}=t,a=h.droppable.containers.get(e);if(!a||s!==a.key)return h;const o=new Vr(h.droppable.containers);return o.delete(e),{...h,droppable:{...h.droppable,containers:o}}}default:return h}}function TS(h){let{disabled:t}=h;const{active:e,activatorEvent:s,draggableNodes:a}=j.useContext(so),o=Vl(s),c=Vl(e?.id);return j.useEffect(()=>{if(!t&&!s&&o&&c!=null){if(!nc(o)||document.activeElement===o.target)return;const u=a.get(c);if(!u)return;const{activatorNode:d,node:f}=u;if(!d.current&&!f.current)return;requestAnimationFrame(()=>{for(const p of[d.current,f.current]){if(!p)continue;const b=EA(p);if(b){b.focus();break}}})}},[s,t,a,c,o]),null}function Zb(h,t){let{transform:e,...s}=t;return h!=null&&h.length?h.reduce((a,o)=>o({transform:a,...s}),e):e}function xS(h){return j.useMemo(()=>({draggable:{...Il.draggable,...h?.draggable},droppable:{...Il.droppable,...h?.droppable},dragOverlay:{...Il.dragOverlay,...h?.dragOverlay}}),[h?.draggable,h?.droppable,h?.dragOverlay])}function DS(h){let{activeNode:t,measure:e,initialRect:s,config:a=!0}=h;const o=j.useRef(!1),{x:c,y:u}=typeof a=="boolean"?{x:a,y:a}:a;qi(()=>{if(!c&&!u||!t){o.current=!1;return}if(o.current||!s)return;const f=t?.node.current;if(!f||f.isConnected===!1)return;const p=e(f),b=Bb(p,s);if(c||(b.x=0),u||(b.y=0),o.current=!0,Math.abs(b.x)>0||Math.abs(b.y)>0){const y=Pb(f);y&&y.scrollBy({top:b.y,left:b.x})}},[t,c,u,s,e])}const rc=j.createContext({...Vi,scaleX:1,scaleY:1});var is;(function(h){h[h.Uninitialized=0]="Uninitialized",h[h.Initializing=1]="Initializing",h[h.Initialized=2]="Initialized"})(is||(is={}));const MS=j.memo(function(t){var e,s,a,o;let{id:c,accessibility:u,autoScroll:d=!0,children:f,sensors:p=SS,collisionDetection:b=UA,measuring:y,modifiers:A,...w}=t;const S=j.useReducer(CS,void 0,_S),[C,E]=S,[x,T]=MA(),[O,R]=j.useState(is.Uninitialized),L=O===is.Initialized,{draggable:{active:k,nodes:q,translate:X},droppable:{containers:Z}}=C,Q=k!=null?q.get(k):null,at=j.useRef({initial:null,translated:null}),pt=j.useMemo(()=>{var se;return k!=null?{id:k,data:(se=Q?.data)!=null?se:wS,rect:at}:null},[k,Q]),lt=j.useRef(null),[St,B]=j.useState(null),[P,W]=j.useState(null),tt=Yr(w,Object.values(w)),ft=no("DndDescribedBy",c),D=j.useMemo(()=>Z.getEnabled(),[Z]),F=xS(y),{droppableRects:K,measureDroppableContainers:J,measuringScheduled:ct}=uS(D,{dragging:L,dependencies:[X.x,X.y],config:F.droppable}),ot=lS(q,k),ut=j.useMemo(()=>P?Xl(P):null,[P]),Ft=Fs(),Et=hS(ot,F.draggable.measure);DS({activeNode:k!=null?q.get(k):null,config:Ft.layoutShiftCompensation,initialRect:Et,measure:F.draggable.measure});const Tt=Ym(ot,F.draggable.measure,Et),Ve=Ym(ot?ot.parentElement:null),Se=j.useRef({activatorEvent:null,active:null,activeNode:ot,collisionRect:null,collisions:null,droppableRects:K,draggableNodes:q,draggingNode:null,draggingNodeRect:null,droppableContainers:Z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),mi=Z.getNodeFor((e=Se.current.over)==null?void 0:e.id),pe=AS({measure:F.dragOverlay.measure}),Xi=(s=pe.nodeRef.current)!=null?s:ot,Yi=L?(a=pe.rect)!=null?a:Tt:null,fo=!!(pe.nodeRef.current&&pe.rect),Ia=gS(fo?null:Tt),ls=Kb(Xi?qe(Xi):null),bi=pS(L?mi??ot:null),On=vS(bi),zs=Zb(A,{transform:{x:X.x-Ia.x,y:X.y-Ia.y,scaleX:1,scaleY:1},activatorEvent:P,active:pt,activeNodeRect:Tt,containerNodeRect:Ve,draggingNodeRect:Yi,over:Se.current.over,overlayNodeRect:pe.rect,scrollableAncestors:bi,scrollableAncestorRects:On,windowRect:ls}),go=ut?Ra(ut,X):null,Be=mS(bi),gc=$m(Be),po=$m(Be,[Tt]),on=Ra(zs,gc),Pi=Yi?jA(Yi,zs):null,cs=pt&&Pi?b({active:pt,collisionRect:Pi,droppableRects:K,droppableContainers:D,pointerCoordinates:go}):null,Ha=kb(cs,"id"),[Ki,mo]=j.useState(null),us=fo?zs:Ra(zs,po),Ue=IA(us,(o=Ki?.rect)!=null?o:null,Tt),yi=j.useRef(null),ze=j.useCallback((se,ae)=>{let{sensor:we,options:Xe}=ae;if(lt.current==null)return;const Ye=q.get(lt.current);if(!Ye)return;const Pe=se.nativeEvent,Ke=new we({active:lt.current,activeNode:Ye,event:Pe,options:Xe,context:Se,onAbort(me){if(!q.get(me))return;const{onDragAbort:ai}=tt.current,Ai={id:me};ai?.(Ai),x({type:"onDragAbort",event:Ai})},onPending(me,Fi,ai,Ai){if(!q.get(me))return;const{onDragPending:cn}=tt.current,Ui={id:me,constraint:Fi,initialCoordinates:ai,offset:Ai};cn?.(Ui),x({type:"onDragPending",event:Ui})},onStart(me){const Fi=lt.current;if(Fi==null)return;const ai=q.get(Fi);if(!ai)return;const{onDragStart:Ai}=tt.current,ln={activatorEvent:Pe,active:{id:Fi,data:ai.data,rect:at}};Ur.unstable_batchedUpdates(()=>{Ai?.(ln),R(is.Initializing),E({type:ve.DragStart,initialCoordinates:me,active:Fi}),x({type:"onDragStart",event:ln}),B(yi.current),W(Pe)})},onMove(me){E({type:ve.DragMove,coordinates:me})},onEnd:vi(ve.DragEnd),onCancel:vi(ve.DragCancel)});yi.current=Ke;function vi(me){return async function(){const{active:ai,collisions:Ai,over:ln,scrollAdjustedTranslate:cn}=Se.current;let Ui=null;if(ai&&cn){const{cancelDrop:Ln}=tt.current;Ui={activatorEvent:Pe,active:ai,collisions:Ai,delta:cn,over:ln},me===ve.DragEnd&&typeof Ln=="function"&&await Promise.resolve(Ln(Ui))&&(me=ve.DragCancel)}lt.current=null,Ur.unstable_batchedUpdates(()=>{E({type:me}),R(is.Uninitialized),mo(null),B(null),W(null),yi.current=null;const Ln=me===ve.DragEnd?"onDragEnd":"onDragCancel";if(Ui){const Si=tt.current[Ln];Si?.(Ui),x({type:Ln,event:Ui})}})}}},[q]),pc=j.useCallback((se,ae)=>(we,Xe)=>{const Ye=we.nativeEvent,Pe=q.get(Xe);if(lt.current!==null||!Pe||Ye.dndKit||Ye.defaultPrevented)return;const Ke={active:Pe};se(we,ae.options,Ke)===!0&&(Ye.dndKit={capturedBy:ae.sensor},lt.current=Xe,ze(we,ae))},[q,ze]),bo=cS(p,pc);bS(p),qi(()=>{Tt&&O===is.Initializing&&R(is.Initialized)},[Tt,O]),j.useEffect(()=>{const{onDragMove:se}=tt.current,{active:ae,activatorEvent:we,collisions:Xe,over:Ye}=Se.current;if(!ae||!we)return;const Pe={active:ae,activatorEvent:we,collisions:Xe,delta:{x:on.x,y:on.y},over:Ye};Ur.unstable_batchedUpdates(()=>{se?.(Pe),x({type:"onDragMove",event:Pe})})},[on.x,on.y]),j.useEffect(()=>{const{active:se,activatorEvent:ae,collisions:we,droppableContainers:Xe,scrollAdjustedTranslate:Ye}=Se.current;if(!se||lt.current==null||!ae||!Ye)return;const{onDragOver:Pe}=tt.current,Ke=Xe.get(Ha),vi=Ke&&Ke.rect.current?{id:Ke.id,rect:Ke.rect.current,data:Ke.data,disabled:Ke.disabled}:null,me={active:se,activatorEvent:ae,collisions:we,delta:{x:Ye.x,y:Ye.y},over:vi};Ur.unstable_batchedUpdates(()=>{mo(vi),Pe?.(me),x({type:"onDragOver",event:me})})},[Ha]),qi(()=>{Se.current={activatorEvent:P,active:pt,activeNode:ot,collisionRect:Pi,collisions:cs,droppableRects:K,draggableNodes:q,draggingNode:Xi,draggingNodeRect:Yi,droppableContainers:Z,over:Ki,scrollableAncestors:bi,scrollAdjustedTranslate:on},at.current={initial:Yi,translated:Pi}},[pt,ot,cs,Pi,q,Xi,Yi,K,Z,Ki,bi,on]),aS({...Ft,delta:X,draggingRect:Pi,pointerCoordinates:go,scrollableAncestors:bi,scrollableAncestorRects:On});const mc=j.useMemo(()=>({active:pt,activeNode:ot,activeNodeRect:Tt,activatorEvent:P,collisions:cs,containerNodeRect:Ve,dragOverlay:pe,draggableNodes:q,droppableContainers:Z,droppableRects:K,over:Ki,measureDroppableContainers:J,scrollableAncestors:bi,scrollableAncestorRects:On,measuringConfiguration:F,measuringScheduled:ct,windowRect:ls}),[pt,ot,Tt,P,cs,Ve,pe,q,Z,K,Ki,J,bi,On,F,ct,ls]),Ps=j.useMemo(()=>({activatorEvent:P,activators:bo,active:pt,activeNodeRect:Tt,ariaDescribedById:{draggable:ft},dispatch:E,draggableNodes:q,over:Ki,measureDroppableContainers:J}),[P,bo,pt,Tt,E,ft,q,Ki,J]);return Zt.createElement(Ob.Provider,{value:T},Zt.createElement(so.Provider,{value:Ps},Zt.createElement(Wb.Provider,{value:mc},Zt.createElement(rc.Provider,{value:Ue},f)),Zt.createElement(TS,{disabled:u?.restoreFocus===!1})),Zt.createElement(LA,{...u,hiddenTextDescribedById:ft}));function Fs(){const se=St?.autoScrollEnabled===!1,ae=typeof d=="object"?d.enabled===!1:d===!1,we=L&&!se&&!ae;return typeof d=="object"?{...d,enabled:we}:{enabled:we}}}),RS=j.createContext(null),Wm="button",OS="Draggable";function LS(h){let{id:t,data:e,disabled:s=!1,attributes:a}=h;const o=no(OS),{activators:c,activatorEvent:u,active:d,activeNodeRect:f,ariaDescribedById:p,draggableNodes:b,over:y}=j.useContext(so),{role:A=Wm,roleDescription:w="draggable",tabIndex:S=0}=a??{},C=d?.id===t,E=j.useContext(C?rc:RS),[x,T]=ql(),[O,R]=ql(),L=yS(c,t),k=Yr(e);qi(()=>(b.set(t,{id:t,key:o,node:x,activatorNode:O,data:k}),()=>{const X=b.get(t);X&&X.key===o&&b.delete(t)}),[b,t]);const q=j.useMemo(()=>({role:A,tabIndex:S,"aria-disabled":s,"aria-pressed":C&&A===Wm?!0:void 0,"aria-roledescription":w,"aria-describedby":p.draggable}),[s,A,S,C,w,p.draggable]);return{active:d,activatorEvent:u,activeNodeRect:f,attributes:q,isDragging:C,listeners:s?void 0:L,node:x,over:y,setNodeRef:T,setActivatorNodeRef:R,transform:E}}function Jb(){return j.useContext(Wb)}const NS="Droppable",kS={timeout:25};function BS(h){let{data:t,disabled:e=!1,id:s,resizeObserverConfig:a}=h;const o=no(NS),{active:c,dispatch:u,over:d,measureDroppableContainers:f}=j.useContext(so),p=j.useRef({disabled:e}),b=j.useRef(!1),y=j.useRef(null),A=j.useRef(null),{disabled:w,updateMeasurementsFor:S,timeout:C}={...kS,...a},E=Yr(S??s),x=j.useCallback(()=>{if(!b.current){b.current=!0;return}A.current!=null&&clearTimeout(A.current),A.current=setTimeout(()=>{f(Array.isArray(E.current)?E.current:[E.current]),A.current=null},C)},[C]),T=ac({callback:x,disabled:w||!c}),O=j.useCallback((q,X)=>{T&&(X&&(T.unobserve(X),b.current=!1),q&&T.observe(q))},[T]),[R,L]=ql(O),k=Yr(t);return j.useEffect(()=>{!T||!R.current||(T.disconnect(),b.current=!1,T.observe(R.current))},[R,T]),j.useEffect(()=>(u({type:ve.RegisterDroppable,element:{id:s,key:o,disabled:e,node:R,rect:y,data:k}}),()=>u({type:ve.UnregisterDroppable,key:o,id:s})),[s]),j.useEffect(()=>{e!==p.current.disabled&&(u({type:ve.SetDroppableDisabled,id:s,key:o,disabled:e}),p.current.disabled=e)},[s,o,e,u]),{active:c,rect:y,isOver:d?.id===s,node:R,over:d,setNodeRef:L}}function zS(h){let{animation:t,children:e}=h;const[s,a]=j.useState(null),[o,c]=j.useState(null),u=Vl(e);return!e&&!s&&u&&a(u),qi(()=>{if(!o)return;const d=s?.key,f=s?.props.id;if(d==null||f==null){a(null);return}Promise.resolve(t(f,o)).then(()=>{a(null)})},[t,s,o]),Zt.createElement(Zt.Fragment,null,e,s?j.cloneElement(s,{ref:c}):null)}const PS={x:0,y:0,scaleX:1,scaleY:1};function FS(h){let{children:t}=h;return Zt.createElement(so.Provider,{value:Qb},Zt.createElement(rc.Provider,{value:PS},t))}const US={position:"fixed",touchAction:"none"},IS=h=>nc(h)?"transform 250ms ease":void 0,HS=j.forwardRef((h,t)=>{let{as:e,activatorEvent:s,adjustScale:a,children:o,className:c,rect:u,style:d,transform:f,transition:p=IS}=h;if(!u)return null;const b=a?f:{...f,scaleX:1,scaleY:1},y={...US,width:u.width,height:u.height,top:u.top,left:u.left,transform:as.Transform.toString(b),transformOrigin:a&&s?kA(s,u):void 0,transition:typeof p=="function"?p(s):p,...d};return Zt.createElement(e,{className:c,style:y,ref:t},o)}),jS=h=>t=>{let{active:e,dragOverlay:s}=t;const a={},{styles:o,className:c}=h;if(o!=null&&o.active)for(const[u,d]of Object.entries(o.active))d!==void 0&&(a[u]=e.node.style.getPropertyValue(u),e.node.style.setProperty(u,d));if(o!=null&&o.dragOverlay)for(const[u,d]of Object.entries(o.dragOverlay))d!==void 0&&s.node.style.setProperty(u,d);return c!=null&&c.active&&e.node.classList.add(c.active),c!=null&&c.dragOverlay&&s.node.classList.add(c.dragOverlay),function(){for(const[d,f]of Object.entries(a))e.node.style.setProperty(d,f);c!=null&&c.active&&e.node.classList.remove(c.active)}},GS=h=>{let{transform:{initial:t,final:e}}=h;return[{transform:as.Transform.toString(t)},{transform:as.Transform.toString(e)}]},qS={duration:250,easing:"ease",keyframes:GS,sideEffects:jS({styles:{active:{opacity:"0"}}})};function VS(h){let{config:t,draggableNodes:e,droppableContainers:s,measuringConfiguration:a}=h;return ic((o,c)=>{if(t===null)return;const u=e.get(o);if(!u)return;const d=u.node.current;if(!d)return;const f=$b(c);if(!f)return;const{transform:p}=qe(c).getComputedStyle(c),b=zb(p);if(!b)return;const y=typeof t=="function"?t:XS(t);return Gb(d,a.draggable.measure),y({active:{id:o,data:u.data,node:d,rect:a.draggable.measure(d)},draggableNodes:e,dragOverlay:{node:c,rect:a.dragOverlay.measure(f)},droppableContainers:s,measuringConfiguration:a,transform:b})})}function XS(h){const{duration:t,easing:e,sideEffects:s,keyframes:a}={...qS,...h};return o=>{let{active:c,dragOverlay:u,transform:d,...f}=o;if(!t)return;const p={x:u.rect.left-c.rect.left,y:u.rect.top-c.rect.top},b={scaleX:d.scaleX!==1?c.rect.width*d.scaleX/u.rect.width:1,scaleY:d.scaleY!==1?c.rect.height*d.scaleY/u.rect.height:1},y={x:d.x-p.x,y:d.y-p.y,...b},A=a({...f,active:c,dragOverlay:u,transform:{initial:d,final:y}}),[w]=A,S=A[A.length-1];if(JSON.stringify(w)===JSON.stringify(S))return;const C=s?.({active:c,dragOverlay:u,...f}),E=u.node.animate(A,{duration:t,easing:e,fill:"forwards"});return new Promise(x=>{E.onfinish=()=>{C?.(),x()}})}}let Zm=0;function YS(h){return j.useMemo(()=>{if(h!=null)return Zm++,Zm},[h])}const KS=Zt.memo(h=>{let{adjustScale:t=!1,children:e,dropAnimation:s,style:a,transition:o,modifiers:c,wrapperElement:u="div",className:d,zIndex:f=999}=h;const{activatorEvent:p,active:b,activeNodeRect:y,containerNodeRect:A,draggableNodes:w,droppableContainers:S,dragOverlay:C,over:E,measuringConfiguration:x,scrollableAncestors:T,scrollableAncestorRects:O,windowRect:R}=Jb(),L=j.useContext(rc),k=YS(b?.id),q=Zb(c,{activatorEvent:p,active:b,activeNodeRect:y,containerNodeRect:A,draggingNodeRect:C.rect,over:E,overlayNodeRect:C.rect,scrollableAncestors:T,scrollableAncestorRects:O,transform:L,windowRect:R}),X=md(y),Z=VS({config:s,draggableNodes:w,droppableContainers:S,measuringConfiguration:x}),Q=X?C.setRef:void 0;return Zt.createElement(FS,null,Zt.createElement(zS,{animation:Z},b&&k?Zt.createElement(HS,{key:k,id:b.id,ref:Q,as:u,activatorEvent:p,adjustScale:t,className:d,transition:o,rect:X,style:{zIndex:f,...a},transform:q},e):null))});function bd(h,t,e){const s=h.slice();return s.splice(e<0?s.length+e:e,0,s.splice(t,1)[0]),s}function $S(h,t){return h.reduce((e,s,a)=>{const o=t.get(s);return o&&(e[a]=o),e},Array(h.length))}function Rl(h){return h!==null&&h>=0}function QS(h,t){if(h===t)return!0;if(h.length!==t.length)return!1;for(let e=0;e<h.length;e++)if(h[e]!==t[e])return!1;return!0}function WS(h){return typeof h=="boolean"?{draggable:h,droppable:h}:h}const yd=h=>{let{rects:t,activeIndex:e,overIndex:s,index:a}=h;const o=bd(t,s,e),c=t[a],u=o[a];return!u||!c?null:{x:u.left-c.left,y:u.top-c.top,scaleX:u.width/c.width,scaleY:u.height/c.height}},ty="Sortable",ey=Zt.createContext({activeIndex:-1,containerId:ty,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:yd,disabled:{draggable:!1,droppable:!1}});function ZS(h){let{children:t,id:e,items:s,strategy:a=yd,disabled:o=!1}=h;const{active:c,dragOverlay:u,droppableRects:d,over:f,measureDroppableContainers:p}=Jb(),b=no(ty,e),y=u.rect!==null,A=j.useMemo(()=>s.map(L=>typeof L=="object"&&"id"in L?L.id:L),[s]),w=c!=null,S=c?A.indexOf(c.id):-1,C=f?A.indexOf(f.id):-1,E=j.useRef(A),x=!QS(A,E.current),T=C!==-1&&S===-1||x,O=WS(o);qi(()=>{x&&w&&p(A)},[x,A,w,p]),j.useEffect(()=>{E.current=A},[A]);const R=j.useMemo(()=>({activeIndex:S,containerId:b,disabled:O,disableTransforms:T,items:A,overIndex:C,useDragOverlay:y,sortedRects:$S(A,d),strategy:a}),[S,b,O.draggable,O.droppable,T,A,C,d,y,a]);return Zt.createElement(ey.Provider,{value:R},t)}const JS=h=>{let{id:t,items:e,activeIndex:s,overIndex:a}=h;return bd(e,s,a).indexOf(t)},t1=h=>{let{containerId:t,isSorting:e,wasDragging:s,index:a,items:o,newIndex:c,previousItems:u,previousContainerId:d,transition:f}=h;return!f||!s||u!==o&&a===c?!1:e?!0:c!==a&&t===d},e1={duration:200,easing:"ease"},iy="transform",i1=as.Transition.toString({property:iy,duration:0,easing:"linear"}),n1={roleDescription:"sortable"};function s1(h){let{disabled:t,index:e,node:s,rect:a}=h;const[o,c]=j.useState(null),u=j.useRef(e);return qi(()=>{if(!t&&e!==u.current&&s.current){const d=a.current;if(d){const f=Ua(s.current,{ignoreTransform:!0}),p={x:d.left-f.left,y:d.top-f.top,scaleX:d.width/f.width,scaleY:d.height/f.height};(p.x||p.y)&&c(p)}}e!==u.current&&(u.current=e)},[t,e,s,a]),j.useEffect(()=>{o&&c(null)},[o]),o}function a1(h){let{animateLayoutChanges:t=t1,attributes:e,disabled:s,data:a,getNewIndex:o=JS,id:c,strategy:u,resizeObserverConfig:d,transition:f=e1}=h;const{items:p,containerId:b,activeIndex:y,disabled:A,disableTransforms:w,sortedRects:S,overIndex:C,useDragOverlay:E,strategy:x}=j.useContext(ey),T=r1(s,A),O=p.indexOf(c),R=j.useMemo(()=>({sortable:{containerId:b,index:O,items:p},...a}),[b,a,O,p]),L=j.useMemo(()=>p.slice(p.indexOf(c)),[p,c]),{rect:k,node:q,isOver:X,setNodeRef:Z}=BS({id:c,data:R,disabled:T.droppable,resizeObserverConfig:{updateMeasurementsFor:L,...d}}),{active:Q,activatorEvent:at,activeNodeRect:pt,attributes:lt,setNodeRef:St,listeners:B,isDragging:P,over:W,setActivatorNodeRef:tt,transform:ft}=LS({id:c,data:R,attributes:{...n1,...e},disabled:T.draggable}),D=vA(Z,St),F=!!Q,K=F&&!w&&Rl(y)&&Rl(C),J=!E&&P,ct=J&&K?ft:null,ut=K?ct??(u??x)({rects:S,activeNodeRect:pt,activeIndex:y,overIndex:C,index:O}):null,Ft=Rl(y)&&Rl(C)?o({id:c,items:p,activeIndex:y,overIndex:C}):O,Et=Q?.id,Tt=j.useRef({activeId:Et,items:p,newIndex:Ft,containerId:b}),Ve=p!==Tt.current.items,Se=t({active:Q,containerId:b,isDragging:P,isSorting:F,id:c,index:O,items:p,newIndex:Tt.current.newIndex,previousItems:Tt.current.items,previousContainerId:Tt.current.containerId,transition:f,wasDragging:Tt.current.activeId!=null}),mi=s1({disabled:!Se,index:O,node:q,rect:k});return j.useEffect(()=>{F&&Tt.current.newIndex!==Ft&&(Tt.current.newIndex=Ft),b!==Tt.current.containerId&&(Tt.current.containerId=b),p!==Tt.current.items&&(Tt.current.items=p)},[F,Ft,b,p]),j.useEffect(()=>{if(Et===Tt.current.activeId)return;if(Et!=null&&Tt.current.activeId==null){Tt.current.activeId=Et;return}const Xi=setTimeout(()=>{Tt.current.activeId=Et},50);return()=>clearTimeout(Xi)},[Et]),{active:Q,activeIndex:y,attributes:lt,data:R,rect:k,index:O,newIndex:Ft,items:p,isOver:X,isSorting:F,isDragging:P,listeners:B,node:q,overIndex:C,over:W,setNodeRef:D,setActivatorNodeRef:tt,setDroppableNodeRef:Z,setDraggableNodeRef:St,transform:mi??ut,transition:pe()};function pe(){if(mi||Ve&&Tt.current.newIndex===O)return i1;if(!(J&&!nc(at)||!f)&&(F||Se))return as.Transition.toString({...f,property:iy})}}function r1(h,t){var e,s;return typeof h=="boolean"?{draggable:h,droppable:!1}:{draggable:(e=h?.draggable)!=null?e:t.draggable,droppable:(s=h?.droppable)!=null?s:t.droppable}}function $l(h){if(!h)return!1;const t=h.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const o1=[Rt.Down,Rt.Right,Rt.Up,Rt.Left],l1=(h,t)=>{let{context:{active:e,collisionRect:s,droppableRects:a,droppableContainers:o,over:c,scrollableAncestors:u}}=t;if(o1.includes(h.code)){if(h.preventDefault(),!e||!s)return;const d=[];o.getEnabled().forEach(b=>{if(!b||b!=null&&b.disabled)return;const y=a.get(b.id);if(y)switch(h.code){case Rt.Down:s.top<y.top&&d.push(b);break;case Rt.Up:s.top>y.top&&d.push(b);break;case Rt.Left:s.left>y.left&&d.push(b);break;case Rt.Right:s.left<y.left&&d.push(b);break}});const f=PA({collisionRect:s,droppableRects:a,droppableContainers:d});let p=kb(f,"id");if(p===c?.id&&f.length>1&&(p=f[1].id),p!=null){const b=o.get(e.id),y=o.get(p),A=y?a.get(y.id):null,w=y?.node.current;if(w&&A&&b&&y){const C=sc(w).some((L,k)=>u[k]!==L),E=ny(b,y),x=c1(b,y),T=C||!E?{x:0,y:0}:{x:x?s.width-A.width:0,y:x?s.height-A.height:0},O={x:A.left,y:A.top};return T.x&&T.y?O:Kr(O,T)}}}};function ny(h,t){return!$l(h)||!$l(t)?!1:h.data.current.sortable.containerId===t.data.current.sortable.containerId}function c1(h,t){return!$l(h)||!$l(t)||!ny(h,t)?!1:h.data.current.sortable.index<t.data.current.sortable.index}const u1=({id:h,className:t,children:e})=>{const{attributes:s,listeners:a,setNodeRef:o,transform:c,transition:u,isDragging:d}=a1({id:h}),f={transform:as.Transform.toString(c),transition:u,opacity:d?.5:1,height:"100%",width:"100%",touchAction:"manipulation"};return et.jsx("div",{ref:o,style:f,className:t,...s,...a,children:e})},Jm=({canvas:h})=>{const t=j.useRef(null);return j.useEffect(()=>{t.current&&(t.current.innerHTML="",h.style.width="100%",h.style.height="100%",h.style.objectFit="contain",t.current.appendChild(h))},[h]),et.jsx("div",{ref:t,style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}})},He=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Qh=[.001,0,0,.001,0,0],Fh=1.35,fi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ns={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Qr="pdfjs_internal_editor_",vt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ot={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},h1={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Wh={TRIANGLES:1,LATTICE:2},ye={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Hl={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ge={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},_a={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},oc={ERRORS:0,WARNINGS:1,INFOS:5},Wr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Nr={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},d1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let lc=oc.WARNINGS;function f1(h){Number.isInteger(h)&&(lc=h)}function g1(){return lc}function cc(h){lc>=oc.INFOS&&console.info(`Info: ${h}`)}function bt(h){lc>=oc.WARNINGS&&console.warn(`Warning: ${h}`)}function Xt(h){throw new Error(h)}function Lt(h,t){h||Xt(t)}function p1(h){switch(h?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function sy(h,t=null,e=null){if(!h)return null;if(e&&typeof h=="string"&&(e.addDefaultProtocol&&h.startsWith("www.")&&h.match(/\./g)?.length>=2&&(h=`http://${h}`),e.tryConvertEncoding))try{h=A1(h)}catch{}const s=t?URL.parse(h,t):URL.parse(h);return p1(s)?s:null}function ay(h,t,e=!1){const s=URL.parse(h);return s?(s.hash=t,s.href):e&&sy(h,"http://example.com")?h.split("#",1)[0]+`${t?`#${t}`:""}`:""}function yt(h,t,e,s=!1){return Object.defineProperty(h,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const ks=(function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class tb extends ks{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Uh extends ks{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Zh extends ks{constructor(t){super(t,"InvalidPDFException")}}class Ql extends ks{constructor(t,e,s){super(t,"ResponseException"),this.status=e,this.missing=s}}class m1 extends ks{constructor(t){super(t,"FormatError")}}class rs extends ks{constructor(t){super(t,"AbortException")}}function ry(h){(typeof h!="object"||h?.length===void 0)&&Xt("Invalid argument for bytesToString");const t=h.length,e=8192;if(t<e)return String.fromCharCode.apply(null,h);const s=[];for(let a=0;a<t;a+=e){const o=Math.min(a+e,t),c=h.subarray(a,o);s.push(String.fromCharCode.apply(null,c))}return s.join("")}function ao(h){typeof h!="string"&&Xt("Invalid argument for stringToBytes");const t=h.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=h.charCodeAt(s)&255;return e}function b1(h){return String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,h&255)}function y1(){const h=new Uint8Array(4);return h[0]=1,new Uint32Array(h.buffer,0,1)[0]===1}function v1(){try{return new Function(""),!0}catch{return!1}}class Ae{static get isLittleEndian(){return yt(this,"isLittleEndian",y1())}static get isEvalSupported(){return yt(this,"isEvalSupported",v1())}static get isOffscreenCanvasSupported(){return yt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return yt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return yt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return yt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return yt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return yt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Ih=Array.from(Array(256).keys(),h=>h.toString(16).padStart(2,"0"));class it{static makeHexColor(t,e,s){return`#${Ih[t]}${Ih[e]}${Ih[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,s=0){const a=t[s],o=t[s+1];t[s]=a*e[0]+o*e[2]+e[4],t[s+1]=a*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,s=0){const a=e[0],o=e[1],c=e[2],u=e[3],d=e[4],f=e[5];for(let p=0;p<6;p+=2){const b=t[s+p],y=t[s+p+1];t[s+p]=b*a+y*c+d,t[s+p+1]=b*o+y*u+f}}static applyInverseTransform(t,e){const s=t[0],a=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(s*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-s*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,s){const a=e[0],o=e[1],c=e[2],u=e[3],d=e[4],f=e[5],p=t[0],b=t[1],y=t[2],A=t[3];let w=a*p+d,S=w,C=a*y+d,E=C,x=u*b+f,T=x,O=u*A+f,R=O;if(o!==0||c!==0){const L=o*p,k=o*y,q=c*b,X=c*A;w+=q,E+=q,C+=X,S+=X,x+=L,R+=L,O+=k,T+=k}s[0]=Math.min(s[0],w,C,S,E),s[1]=Math.min(s[1],x,O,T,R),s[2]=Math.max(s[2],w,C,S,E),s[3]=Math.max(s[3],x,O,T,R)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const s=t[0],a=t[1],o=t[2],c=t[3],u=s**2+a**2,d=s*o+a*c,f=o**2+c**2,p=(u+f)/2,b=Math.sqrt(p**2-(u*f-d**2));e[0]=Math.sqrt(p+b||1),e[1]=Math.sqrt(p-b||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>c?null:[s,o,a,c]}static pointBoundingBox(t,e,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],e),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],e)}static rectBoundingBox(t,e,s,a,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],e,a),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],e,a)}static#t(t,e,s,a,o,c,u,d,f,p){if(f<=0||f>=1)return;const b=1-f,y=f*f,A=y*f,w=b*(b*(b*t+3*f*e)+3*y*s)+A*a,S=b*(b*(b*o+3*f*c)+3*y*u)+A*d;p[0]=Math.min(p[0],w),p[1]=Math.min(p[1],S),p[2]=Math.max(p[2],w),p[3]=Math.max(p[3],S)}static#e(t,e,s,a,o,c,u,d,f,p,b,y){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,e,s,a,o,c,u,d,-b/p,y);return}const A=p**2-4*b*f;if(A<0)return;const w=Math.sqrt(A),S=2*f;this.#t(t,e,s,a,o,c,u,d,(-p+w)/S,y),this.#t(t,e,s,a,o,c,u,d,(-p-w)/S,y)}static bezierBoundingBox(t,e,s,a,o,c,u,d,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,d),this.#e(t,s,o,u,e,a,c,d,3*(-t+3*(s-o)+u),6*(t-2*s+o),3*(s-t),f),this.#e(t,s,o,u,e,a,c,d,3*(-e+3*(a-c)+d),6*(e-2*a+c),3*(a-e),f)}}function A1(h){return decodeURIComponent(escape(h))}let Hh=null,eb=null;function S1(h){return Hh||(Hh=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,eb=new Map([["","t"]])),h.replaceAll(Hh,(t,e,s)=>e?e.normalize("NFKC"):eb.get(s))}function oy(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const h=new Uint8Array(32);return crypto.getRandomValues(h),ry(h)}const xa="pdfjs_internal_id_";function w1(h,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[s,a,...o]=e;if(!h(s)&&!Number.isInteger(s)||!t(a))return!1;const c=o.length;let u=!0;switch(a.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function je(h,t,e){return Math.min(Math.max(h,t),e)}function ly(h){return Uint8Array.prototype.toBase64?h.toBase64():btoa(ry(h))}function E1(h){return Uint8Array.fromBase64?Uint8Array.fromBase64(h):ao(atob(h))}typeof Promise.try!="function"&&(Promise.try=function(h,...t){return new Promise(e=>{e(h(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(h){return h.reduce((t,e)=>t+e,0)});class Zr{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function a(o){if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(Zr.shouldBuildText(u))o?.attributes?.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&e.push({str:c}),!!o.children)for(const d of o.children)a(d)}return a(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class cy{static setupStorage(t,e,s,a,o){const c=a.getValue(e,{value:null});switch(s.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(c.value===s.attributes.xfaOn?t.setAttribute("checked",!0):c.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{a.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of s.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:a,linkService:o}){const{attributes:c}=e,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${a}`);for(const[d,f]of Object.entries(c))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&o.addLinkAttributes(t,c.href,c.newWindow),s&&c.dataId&&this.setupStorage(t,c.dataId,e,s)}static render(t){const e=t.annotationStorage,s=t.linkService,a=t.xfaHtml,o=t.intent||"display",c=document.createElement(a.name);a.attributes&&this.setAttributes({html:c,element:a,intent:o,linkService:s});const u=o!=="richText",d=t.div;if(d.append(c),t.viewport){const b=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=b}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const b=document.createTextNode(a.value);c.append(b),u&&Zr.shouldBuildText(a.name)&&f.push(b)}return{textDivs:f}}const p=[[a,-1,c]];for(;p.length>0;){const[b,y,A]=p.at(-1);if(y+1===b.children.length){p.pop();continue}const w=b.children[++p.at(-1)[1]];if(w===null)continue;const{name:S}=w;if(S==="#text"){const E=document.createTextNode(w.value);f.push(E),A.append(E);continue}const C=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,S):document.createElement(S);if(A.append(C),w.attributes&&this.setAttributes({html:C,element:w,storage:e,intent:o,linkService:s}),w.children?.length>0)p.push([w,-1,C]);else if(w.value){const E=document.createTextNode(w.value);u&&Zr.shouldBuildText(S)&&f.push(E),C.append(E)}}for(const b of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Dn="http://www.w3.org/2000/svg";class za{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function ro(h,t="text"){if(Ir(h,document.baseURI)){const e=await fetch(h);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const a=new XMLHttpRequest;a.open("GET",h,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}s(new Error(a.statusText))}},a.send(null)})}class oo{constructor({viewBox:t,userUnit:e,scale:s,rotation:a,offsetX:o=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=a,this.offsetX=o,this.offsetY=c,s*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,b,y,A;switch(a%=360,a<0&&(a+=360),a){case 180:p=-1,b=0,y=0,A=1;break;case 90:p=0,b=1,y=1,A=0;break;case 270:p=0,b=-1,y=-1,A=0;break;case 0:p=1,b=0,y=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(y=-y,A=-A);let w,S,C,E;p===0?(w=Math.abs(f-t[1])*s+o,S=Math.abs(d-t[0])*s+c,C=(t[3]-t[1])*s,E=(t[2]-t[0])*s):(w=Math.abs(d-t[0])*s+o,S=Math.abs(f-t[1])*s+c,C=(t[2]-t[0])*s,E=(t[3]-t[1])*s),this.transform=[p*s,b*s,y*s,A*s,w-p*s*d-y*s*f,S-b*s*d-A*s*f],this.width=C,this.height=E}get rawDims(){const t=this.viewBox;return yt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new oo({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:a,dontFlip:o})}convertToViewportPoint(t,e){const s=[t,e];return it.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const e=[t[0],t[1]];it.applyTransform(e,this.transform);const s=[t[2],t[3]];return it.applyTransform(s,this.transform),[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){const s=[t,e];return it.applyInverseTransform(s,this.transform),s}}class vd extends ks{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function uc(h){const t=h.length;let e=0;for(;e<t&&h[e].trim()==="";)e++;return h.substring(e,e+5).toLowerCase()==="data:"}function Ad(h){return typeof h=="string"&&/\.pdf$/i.test(h)}function _1(h){return[h]=h.split(/[#?]/,1),h.substring(h.lastIndexOf("/")+1)}function C1(h,t="document.pdf"){if(typeof h!="string")return t;if(uc(h))return bt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(h);if(!s)return t;const a=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},o=/\.pdf$/i,c=s.pathname.split("/").at(-1);if(o.test(c))return a(c);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const f of u)if(o.test(f))return a(f);const d=Array.from(s.searchParams.keys()).reverse();for(const f of d)if(o.test(f))return a(f)}if(s.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(d)return a(d[0])}return t}class ib{started=Object.create(null);times=[];time(t){t in this.started&&bt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||bt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:a,end:o}of this.times)t.push(`${s.padEnd(e)} ${o-a}ms
`);return t.join("")}}function Ir(h,t){const e=t?URL.parse(h,t):URL.parse(h);return e?.protocol==="http:"||e?.protocol==="https:"}function zi(h){h.preventDefault()}function ne(h){h.preventDefault(),h.stopPropagation()}function T1(h){console.log("Deprecated API usage: "+h)}class Jh{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const s=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let b=parseInt(e[9],10)||0;return b=b>=0&&b<=59?b:0,f==="-"?(c+=p,u+=b):f==="+"&&(c-=p,u-=b),new Date(Date.UTC(s,a,o,c,u,d))}}function x1(h,{scale:t=1,rotation:e=0}){const{width:s,height:a}=h.attributes.style,o=[0,0,parseInt(s),parseInt(a)];return new oo({viewBox:o,userUnit:1,scale:t,rotation:e})}function lo(h){if(h.startsWith("#")){const t=parseInt(h.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return h.startsWith("rgb(")?h.slice(4,-1).split(",").map(t=>parseInt(t)):h.startsWith("rgba(")?h.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(bt(`Not a valid color format: "${h}"`),[0,0,0])}function D1(h){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of h.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;h.set(e,lo(s))}t.remove()}function Jt(h){const{a:t,b:e,c:s,d:a,e:o,f:c}=h.getTransform();return[t,e,s,a,o,c]}function en(h){const{a:t,b:e,c:s,d:a,e:o,f:c}=h.getTransform().invertSelf();return[t,e,s,a,o,c]}function Ls(h,t,e=!1,s=!0){if(t instanceof oo){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:c}=h,u=Ae.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,f=`var(--total-scale-factor) * ${o}px`,p=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,b=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(c.width=p,c.height=b):(c.width=b,c.height=p)}s&&h.setAttribute("data-main-rotation",t.rotation)}class rn{constructor(){const{pixelRatio:t}=rn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,s,a,o=-1){let c=1/0,u=1/0,d=1/0;s=rn.capPixels(s,o),s>0&&(c=Math.sqrt(s/(t*e))),a!==-1&&(u=a/t,d=a/e);const f=Math.min(c,u,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,s):s}return t}}const td=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class M1{static get isDarkMode(){return yt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class R1{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),yt(this,"commentForegroundColor",lo(s))}}function O1(h,t,e,s){s=Math.min(Math.max(s??1,0),1);const a=255*(1-s);return h=Math.round(h*s+a),t=Math.round(t*s+a),e=Math.round(e*s+a),[h,t,e]}function nb(h,t){const e=h[0]/255,s=h[1]/255,a=h[2]/255,o=Math.max(e,s,a),c=Math.min(e,s,a),u=(o+c)/2;if(o===c)t[0]=t[1]=0;else{const d=o-c;switch(t[1]=u<.5?d/(o+c):d/(2-o-c),o){case e:t[0]=((s-a)/d+(s<a?6:0))*60;break;case s:t[0]=((a-e)/d+2)*60;break;case a:t[0]=((e-s)/d+4)*60;break}}t[2]=u}function ed(h,t){const e=h[0],s=h[1],a=h[2],o=(1-Math.abs(2*a-1))*s,c=o*(1-Math.abs(e/60%2-1)),u=a-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+u,t[1]=c+u,t[2]=u;break;case 1:t[0]=c+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=c+u;break;case 3:t[0]=u,t[1]=c+u,t[2]=o+u;break;case 4:t[0]=c+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=c+u;break}}function sb(h){return h<=.03928?h/12.92:((h+.055)/1.055)**2.4}function ab(h,t,e){ed(h,e),e.map(sb);const s=.2126*e[0]+.7152*e[1]+.0722*e[2];ed(t,e),e.map(sb);const a=.2126*e[0]+.7152*e[1]+.0722*e[2];return s>a?(s+.05)/(a+.05):(a+.05)/(s+.05)}const rb=new Map;function L1(h,t){const e=h[0]+h[1]*256+h[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=rb.get(e);if(s)return s;const a=new Float32Array(9),o=a.subarray(0,3),c=a.subarray(3,6);nb(h,c);const u=a.subarray(6,9);nb(t,u);const d=u[2]<.5,f=d?12:4.5;if(c[2]=d?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),ab(c,u,o)<f){let p,b;d?(p=c[2],b=1):(p=0,b=c[2]);const y=.005;for(;b-p>y;){const A=c[2]=(p+b)/2;d===ab(c,u,o)<f?p=A:b=A}c[2]=d?b:p}return ed(c,o),s=it.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),rb.set(e,s),s}function uy({html:h,dir:t,className:e},s){const a=document.createDocumentFragment();if(typeof h=="string"){const o=document.createElement("p");o.dir=t||"auto";const c=h.split(/(?:\r\n?|\n)/);for(let u=0,d=c.length;u<d;++u){const f=c[u];o.append(document.createTextNode(f)),u<d-1&&o.append(document.createElement("br"))}a.append(o)}else cy.render({xfaHtml:h,div:a,intent:"richText"});a.firstElementChild.classList.add("richText",e),s.append(a)}function hy(h){const t=new Path2D;if(!h)return t;for(let e=0,s=h.length;e<s;)switch(h[e++]){case Nr.moveTo:t.moveTo(h[e++],h[e++]);break;case Nr.lineTo:t.lineTo(h[e++],h[e++]);break;case Nr.curveTo:t.bezierCurveTo(h[e++],h[e++],h[e++],h[e++],h[e++],h[e++]);break;case Nr.quadraticCurveTo:t.quadraticCurveTo(h[e++],h[e++],h[e++],h[e++]);break;case Nr.closePath:t.closePath();break;default:bt(`Unrecognized drawing path operator: ${h[e-1]}`);break}return t}class Xr{#t=null;#e=null;#n;#i=null;#r=null;#a=null;#s=null;#o=null;static#c=null;constructor(t){this.#n=t,Xr.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#n._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",zi,{signal:e}),t.addEventListener("pointerdown",Xr.#l,{signal:e}));const s=this.#i=document.createElement("div");s.className="buttons",t.append(s);const a=this.#n.toolbarPosition;if(a){const{style:o}=t,c=this.#n._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#n._focusEventsAllowed=!1,ne(t)}#h(t){this.#n._focusEventsAllowed=!0,ne(t)}#f(t){const e=this.#n._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",zi,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#a?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#n,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",Xr.#c[t]),this.#f(s)&&s.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#i.append(s)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#i.append(e,this.#m),this.#r=t}addComment(t,e=null){if(this.#a)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const a=this.#s=this.#m;e?(this.#i.insertBefore(s,e),this.#i.insertBefore(a,e)):this.#i.append(s,a),this.#a=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#i.append(e,this.#m)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#n);this.#f(e),this.#i.append(e,this.#m)}removeButton(t){t==="comment"&&(this.#a?.removeToolbarCommentButton(),this.#a=null,this.#s?.remove(),this.#s=null)}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,s){if(!e&&t==="comment")return;const a=this.#i.querySelector(s);a&&t==="comment"&&this.addComment(e,a)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class N1{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#n._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",zi,{signal:e});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#n.hasCommentManager()&&this.#a("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#a("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#r(t,e){let s=0,a=0;for(const o of t){const c=o.y+o.height;if(c<s)continue;const u=o.x+(e?o.width:0);if(c>s){a=u,s=c;continue}e?u>a&&(a=u):u<a&&(a=u)}return[e?1-a:a,s]}show(t,e,s){const[a,o]=this.#r(e,s),{style:c}=this.#e||=this.#i();t.append(this.#e),c.insetInlineEnd=`${100*a}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#a(t,e,s,a){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const c=document.createElement("span");o.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",s);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",zi,{signal:u}),o.addEventListener("click",a,{signal:u})),this.#t.append(o)}}function dy(h,t,e){for(const s of e)t.addEventListener(s,h[s].bind(h))}class Pt{static#t=NaN;static#e=null;static#n=NaN;static#i=null;static initializeAndAddPointerId(t){(Pt.#e||=new Set).add(t)}static setPointer(t,e){Pt.#t||=e,Pt.#i??=t}static setTimeStamp(t){Pt.#n=t}static isSamePointerId(t){return Pt.#t===t}static isSamePointerIdOrRemove(t){return Pt.#t===t?!0:(Pt.#e?.delete(t),!1)}static isSamePointerType(t){return Pt.#i===t}static isInitializedAndDifferentPointerType(t){return Pt.#i!==null&&!Pt.isSamePointerType(t)}static isSameTimeStamp(t){return Pt.#n===t}static isUsingMultiplePointers(){return Pt.#e?.size>=1}static clearPointerType(){Pt.#i=null}static clearPointerIds(){Pt.#t=NaN,Pt.#e=null}static clearTimeStamp(){Pt.#n=NaN}}class k1{#t=0;get id(){return`${Qr}${this.#t++}`}}class Sd{#t=oy();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(s.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return yt(this,"_isSVGFittingCanvas",o)}async#i(t,e){this.#n||=new Map;let s=this.#n.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof e=="string"?(s.url=e,a=await ro(e,"blob")):e instanceof File?a=s.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const o=Sd._isSVGFittingCanvas,c=new FileReader,u=new Image,d=new Promise((f,p)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,f()},c.onload=async()=>{const b=s.svgUrl=c.result;u.src=await o?`${b}#svgView(preserveAspectRatio(none))`:b},u.onerror=c.onerror=p});c.readAsDataURL(a),await d}else s.bitmap=await createImageBitmap(a);s.refCounter=1}catch(a){bt(a),s=null}return this.#n.set(t,s),s&&this.#n.set(s.id,s),s}async getFromFile(t){const{lastModified:e,name:s,size:a,type:o}=t;return this.#i(`${e}_${s}_${a}_${o}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,e){const s=await e;return this.#i(t,s)}async getFromId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#n||=new Map;let s=this.#n.get(t);if(s?.bitmap)return s.refCounter+=1,s;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),s={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,s),this.#n.set(s.id,s),s}getSvgUrl(t){const e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(s.width,s.height);a.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=a.convertToBlob()}s.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class B1{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:s,mustExec:a,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:e,post:s,type:o};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(d);return}if(c&&this.#t[this.#i].type===o){u&&(d.undo=this.#t[this.#i].undo),this.#t[this.#i]=d;return}const f=this.#i+1;f===this.#n?this.#t.splice(0,1):(this.#i=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let e=this.#i;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#i-e),this.#i=e;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class co{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ae.platform;for(const[s,a,o={}]of t)for(const c of s){const u=c.startsWith("mac+");e&&u?(this.callbacks.set(c.slice(4),{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1))):!e&&!u&&(this.callbacks.set(c,{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(this.#t(e));if(!s)return;const{callback:a,options:{bubbles:o=!1,args:c=[],checker:u=null}}=s;u&&!u(t,e)||(a.bind(t,...c,e)(),o||ne(e))}}class wd{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return D1(t),yt(this,"_colors",t)}convert(t){const e=lo(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,a]of this._colors)if(a.every((o,c)=>o===e[c]))return wd._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?it.makeHexColor(...e):t}}class os{#t=new AbortController;#e=null;#n=null;#i=new Map;#r=new Map;#a=null;#s=null;#o=null;#c=new B1;#l=null;#d=null;#h=null;#f=0;#m=new Set;#p=null;#u=null;#g=new Set;_editorUndoBar=null;#b=!1;#v=!1;#y=!1;#C=null;#E=null;#S=null;#x=null;#A=!1;#_=null;#R=new k1;#D=!1;#M=!1;#P=!1;#L=null;#k=null;#F=null;#B=null;#q=null;#T=vt.NONE;#w=new Set;#N=null;#U=null;#H=null;#Y=null;#X=null;#K={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#z=null;#V=null;#Z=null;#J=null;#I=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=os.prototype,e=c=>c.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),s=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return yt(this,"_keyboardManager",new co([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#V.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}constructor(t,e,s,a,o,c,u,d,f,p,b,y,A,w,S,C){const E=this._signal=this.#t.signal;this.#V=t,this.#Z=e,this.#J=s,this.#a=a,this.#l=o,this.#U=c,this.#X=d,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:E}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),u._on("setpreference",this.onSetPreference.bind(this),{signal:E}),u._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:E}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:E}),this.#rt(),this.#dt(),this.#et(),this.#s=d.annotationStorage,this.#C=d.filterFactory,this.#H=f,this.#x=p||null,this.#b=b,this.#v=y,this.#y=A,this.#q=w||null,this.viewParameters={realScale:za.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=C!==!1,o?.setSidebarUiManager(this)}destroy(){this.#I?.resolve(),this.#I=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#i.clear(),this.#g.clear(),this.#B?.clear(),this.#e=null,this.#w.clear(),this.#c.destroy(),this.#a?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#_?.hide(),this.#_=null,this.#F?.destroy(),this.#F=null,this.#n=null,this.#E&&(clearTimeout(this.#E),this.#E=null),this.#z&&(clearTimeout(this.#z),this.#z=null),this._editorUndoBar?.destroy(),this.#X=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#q}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return yt(this,"hcmFilter",this.#H?this.#C.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return yt(this,"direction",getComputedStyle(this.#V).direction)}get _highlightColors(){return yt(this,"_highlightColors",this.#x?new Map(this.#x.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return yt(this,"highlightColors",null);const e=new Map,s=!!this.#H;for(const[a,o]of t){const c=a.endsWith("_HCM");if(s&&c){e.set(a.replace("_HCM",""),o);continue}!s&&!c&&e.set(a,o)}return yt(this,"highlightColors",e)}get highlightColorNames(){return yt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,e=!1){this.#a?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,s,a){this.#l?.showDialog(this,t,e,s,a)}selectComment(t,e){this.#r.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,s=void 0){this.#l?.toggleCommentPopup(t,e,s)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:e,promise:s}=Promise.withResolvers(),a=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",a),e())};this._eventBus.on("editorsrendered",a),await s}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#y=e)}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#V.focus()}findParent(t,e){for(const s of this.#r.values()){const{x:a,y:o,width:c,height:u}=s.div.getBoundingClientRect();if(t>=a&&t<=a+c&&e>=o&&e<=o+u)return s}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*za.PDF_TO_CSS_UNITS;for(const e of this.#g)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#W({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of this.#r.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",e=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:a,anchorOffset:o,focusNode:c,focusOffset:u}=s,d=s.toString(),p=this.#W(s).closest(".textLayer"),b=this.getSelectionBoxes(p);if(!b)return;s.empty();const y=this.#tt(p),A=this.#T===vt.NONE,w=()=>{const S=y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:b,anchorNode:a,anchorOffset:o,focusNode:c,focusOffset:u,text:d});A&&this.showAllEditors("highlight",!0,!0),e&&S?.editComment()};if(A){this.switchToMode(vt.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#W(t).closest(".textLayer"),a=this.getSelectionBoxes(s);a&&(this.#_||=new N1(this),this.#_.show(s,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const e=`${Qr}${t}`,s=this.#s.getRawValue(e);return s&&this.#s.remove(e),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,e=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),e?s.setAttribute("data-l10n-args",JSON.stringify(e)):s.removeAttribute("data-l10n-args"))}#at(){const t=document.getSelection();if(!t||t.isCollapsed){this.#N&&(this.#_?.hide(),this.#N=null,this.#O({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#N)return;const a=this.#W(t).closest(".textLayer");if(!a){this.#N&&(this.#_?.hide(),this.#N=null,this.#O({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#N=e,this.#O({hasSelectedText:!0}),!(this.#T!==vt.HIGHLIGHT&&this.#T!==vt.NONE)&&(this.#T===vt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#T===vt.HIGHLIGHT?this.#tt(a):null;if(o?.toggleDrawing(),this.#M){const c=new AbortController,u=this.combinedSignal(c),d=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#$("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}else o?.toggleDrawing(!0),this.#$("main_toolbar")}}#$(t=""){this.#T===vt.HIGHLIGHT?this.highlightSelection(t):this.#b&&this.#st()}#rt(){document.addEventListener("selectionchange",this.#at.bind(this),{signal:this._signal})}#ot(){if(this.#S)return;this.#S=new AbortController;const t=this.combinedSignal(this.#S);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#$("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#w)if(e.div.contains(t)){this.#k=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#k)return;const[t,e]=this.#k;this.#k=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#L)return;this.#L=new AbortController;const t=this.combinedSignal(this.#L);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#L?.abort(),this.#L=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of this.#w){const a=s.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const c of this.#u)if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){bt(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of s){const f=await a.deserialize(d);if(!f)return;o.push(f)}const c=()=>{for(const d of o)this.#it(d);this.#nt(o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){bt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==vt.NONE&&!this.isEditorHandlingKeyboard&&os._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#$("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#O(t){Object.entries(t).some(([s,a])=>this.#K[s]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#K,t)}),this.#T===vt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Ot.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ut(),this.#O({isEditing:this.#T!==vt.NONE,isEmpty:this.#Q(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#O({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#G(e.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#D?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,e=null,s=!1,a=!1,o=!1,c=!1){if(this.#T!==t&&!(this.#I&&(await this.#I.promise,!this.#I))){if(this.#I=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#T===vt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=t,t===vt.NONE){this.setEditingState(!1),this.#gt();for(const u of this.#i.values())u.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#I.resolve();return}for(const u of this.#i.values())u.addStandaloneCommentButton();t===vt.SIGNATURE&&await this.#U?.loadSignatures(),s&&Pt.clearPointerType(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const u of this.#r.values())u.updateMode(t);if(t===vt.POPUP){this.#n||=await this.#X.getAnnotationsByType(new Set(this.#u.map(f=>f._editorType)));const u=new Set,d=[];for(const f of this.#i.values()){const{annotationElementId:p,hasComment:b,deleted:y}=f;p&&u.add(p),b&&!y&&d.push(f.getData())}for(const f of this.#n){const{id:p,popupRef:b,contentsObj:y}=f;b&&y?.str&&!u.has(p)&&!this.#m.has(p)&&d.push(f)}this.#l?.showSidebar(d)}if(!e){a&&this.addNewEditorFromKeyboard(),this.#I.resolve();return}for(const u of this.#i.values())u.uid===e?(this.setSelected(u),c?u.editComment():o?u.enterInEditMode():u.focus()):u.unselect();this.#I.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case Ot.CREATE:this.currentLayer.addNewEditor(e);return;case Ot.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const s of this.#w)s.updateParams(t,e);else for(const s of this.#u)s.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){for(const o of this.#i.values())o.editorType===t&&o.show(e);(this.#Y?.get(Ot.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#G([[Ot.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#P!==t){this.#P=t;for(const e of this.#r.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#D){this.#D=!0;const t=[];for(const e of this.#r.values())t.push(e.enable());await Promise.all(t);for(const e of this.#i.values())e.enable()}}#gt(){if(this.unselectAll(),this.#D){this.#D=!1;for(const t of this.#r.values())t.disable();for(const t of this.#i.values())t.disable()}}*getEditors(t){for(const e of this.#i.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#E&&clearTimeout(this.#E),this.#E=setTimeout(()=>{this.focusMainContainer(),this.#E=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#B?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#it(t){const e=this.#r.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#pt(){let t=null;for(t of this.#w);return t}updateUI(t){this.#pt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#w.has(t)){this.#w.delete(t),t.unselect(),this.#O({hasSelectedEditor:this.hasSelection});return}this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const e of this.#w)e!==t&&e.unselect();this.#w.clear(),this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}isSelected(t){return this.#w.has(t)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(t){t.unselect(),this.#w.delete(t),this.#O({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#O({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Q()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#Q()})}addCommands(t){this.#c.add(t),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Q()})}cleanUndoStack(t){this.#c.cleanType(t)}#Q(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#w],s=()=>{this._editorUndoBar?.show(a,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},a=()=>{for(const o of e)this.#it(o)};this.addCommands({cmd:s,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#nt(t){for(const e of this.#w)e.unselect();this.#w.clear();for(const e of t)e.isEmpty()||(this.#w.add(e),e.select());this.#O({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#w)t.commit();this.#nt(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==vt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#w)t.unselect();this.#w.clear(),this.#O({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=t,this.#j[1]+=e;const[a,o]=this.#j,c=[...this.#w],u=1e3;this.#z&&clearTimeout(this.#z),this.#z=setTimeout(()=>{this.#z=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(const d of c)this.#i.has(d.id)&&(d.translateInPage(a,o),d.translationDone())},undo:()=>{for(const d of c)this.#i.has(d.id)&&(d.translateInPage(-a,-o),d.translationDone())},mustExec:!1})},u);for(const d of c)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#w)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let e=!1;for(const[{x:a,y:o,pageIndex:c},u]of t)u.newX=a,u.newY=o,u.newPageIndex=c,e||=a!==u.savedX||o!==u.savedY||c!==u.savedPageIndex;if(!e)return!1;const s=(a,o,c,u)=>{if(this.#i.has(a.id)){const d=this.#r.get(u);d?a._setParentAndPosition(d,o,c):(a.pageIndex=u,a.x=o,a.y=c)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:c,newPageIndex:u}]of t)s(a,o,c,u)},undo:()=>{for(const[a,{savedX:o,savedY:c,savedPageIndex:u}]of t)s(a,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#p)for(const s of this.#p.keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}isEditingMode(){return this.#T!==vt.NONE}get imageManager(){return yt(this,"imageManager",new Sd)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,p=e.rangeCount;f<p;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:s,y:a,width:o,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,p,b,y)=>({x:(p-a)/c,y:1-(f+b-s)/o,width:y/c,height:b/o});break;case"180":u=(f,p,b,y)=>({x:1-(f+b-s)/o,y:1-(p+y-a)/c,width:b/o,height:y/c});break;case"270":u=(f,p,b,y)=>({x:1-(p+y-a)/c,y:(f-s)/o,width:y/c,height:b/o});break;default:u=(f,p,b,y)=>({x:(f-s)/o,y:(p-a)/c,width:b/o,height:y/c});break}const d=[];for(let f=0,p=e.rangeCount;f<p;f++){const b=e.getRangeAt(f);if(!b.collapsed)for(const{x:y,y:A,width:w,height:S}of b.getClientRects())w===0||S===0||d.push(u(y,A,w,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const s=this.#s.getRawValue(e);s&&(this.#T===vt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,e,s){const a=this.#B?.get(t);a&&(a.setCanvas(e,s),this.#B.delete(t))}addMissingCanvas(t,e){(this.#B||=new Map).set(t,e)}}class an{#t=null;#e=!1;#n=null;#i=null;#r=null;#a=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,an.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){an._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#i=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",an.#f.missing),e.setAttribute("data-l10n-id",an.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",zi,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#s=!0,a(o))},{signal:s}),await this.#p(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await an._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:a,cancel:o=!1}){s&&(this.#l=s,this.#d=a),!(this.#t===t&&this.#e===e)&&(o||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#n&&(!t&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#n.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#r=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#n;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",an.#f[this.#m]),this.#i?.setAttribute("data-l10n-id",an.#f[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const a=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#r?.classList.remove("show")},{signal:o})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Ol{#t=null;#e=null;#n=!1;#i=null;#r=null;#a=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#i=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#i.commentButtonPosition;if(e){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const a=this.#i.commentButtonColor;a&&(s.backgroundColor=a)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#i.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:s}=this.#t.getBoundingClientRect(),{x:a,y:o,width:c,height:u}=this.#i.parent.boundingClientRect;return[(t-a)/c,(e+s-o)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const s=this.#i._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",zi,{signal:s}),e&&(t.addEventListener("focusin",o=>{this.#i._focusEventsAllowed=!1,ne(o)},{capture:!0,signal:s}),t.addEventListener("focusout",o=>{this.#i._focusEventsAllowed=!0,ne(o)},{capture:!0,signal:s})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),t===this.#e?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#n=!0,a(o))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:s}),t}edit(t){const e=this.commentPopupPositionInLayer;let s,a;if(e)[s,a]=e;else{[s,a]=this.#i.commentButtonPosition;const{width:p,height:b,x:y,y:A}=this.#i;s=y+s*p,a=A+a*b}const o=this.#i.parent.boundingClientRect,{x:c,y:u,width:d,height:f}=o;this.#i._uiManager.editComment(this.#i,c+s*d,u+a*f,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#r}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#a,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#a=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#r=t,this.data=t,this.#o=null,this.#a=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#a=null,this.#o=null,this.#i=null,this.#n=!1,this.#c=!1}}class hc{#t;#e=!1;#n=null;#i;#r;#a;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:c=null,signal:u}){this.#t=t,this.#n=s,this.#i=e,this.#r=a,this.#a=o,this.#s=c,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/rn.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,o=AbortSignal.any([this.#c,a.signal]),c=this.#t,u={capture:!0,signal:o,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ne(f),d(f))},u),c.addEventListener("pointerup",d,u),c.addEventListener("pointercancel",d,u);return}if(!this.#h){this.#h=new AbortController;const a=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,c={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",this.#m.bind(this),c);const u=this.#p.bind(this);o.addEventListener("touchend",u,c),o.addEventListener("touchcancel",u,c),c.capture=!0,o.addEventListener("pointerdown",ne,c),o.addEventListener("pointermove",ne,c),o.addEventListener("pointercancel",ne,c),o.addEventListener("pointerup",ne,c),this.#r?.()}if(ne(t),t.touches.length!==2||this.#n?.()){this.#l=null;return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;ne(t);let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:a,screenY:o}=e,{screenX:c,screenY:u}=s,d=this.#l,{touch0X:f,touch0Y:p,touch1X:b,touch1Y:y}=d,A=b-f,w=y-p,S=c-a,C=u-o,E=Math.hypot(S,C)||1,x=Math.hypot(A,w)||1;if(!this.#e&&Math.abs(x-E)<=hc.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=o,d.touch1X=c,d.touch1Y=u,!this.#e){this.#e=!0;return}const T=[(a+c)/2,(o+u)/2];this.#a?.(T,x,E)}#p(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(ne(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class dt{#t=null;#e=null;#n=null;#i=null;#r=null;#a=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#p=!1;#u=null;#g=!1;#b=!1;#v=!1;#y=null;#C=0;#E=0;#S=null;#x=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#_=dt._zIndex++;static _borderLineWidth=-1;static _colorManager=new wd;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=dt.prototype._resizeWithKeyboard,e=os.TRANSLATE_SMALL,s=os.TRANSLATE_BIG;return yt(this,"_resizerKeyboardManager",new co([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],dt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,a],this.pageTranslation=[o,c];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return yt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new z1({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(dt._l10n??=t,dt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),dt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);dt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Xt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(t){this.#A=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#z(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,a){const[o,c]=this.parentDimensions;[s,a]=this.screenToPageTranslation(s,a),this.x=(t+s)/o,this.y=(e+a)/c,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[s,a]=this.parentDimensions;this.setAt(t*s,e*a,this.width*s,this.height*a),this._onTranslated()}#R([t,e],s,a){[s,a]=this.screenToPageTranslation(s,a),this.x+=s/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#R(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:b,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,b,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[d,f]=this.getBaseTranslation();c+=d,u+=f;const{style:p}=s;p.left=`${(100*c).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=dt,a=s/t,o=s/e;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,a]}=this;let{x:o,y:c,width:u,height:d}=this;if(u*=s,d*=a,o*=s,c*=a,this._mustFixPosition)switch(t){case 0:o=je(o,0,s-u),c=je(c,0,a-d);break;case 90:o=je(o,0,s-d),c=je(c,u,a);break;case 180:o=je(o,u,s),c=je(c,d,a);break;case 270:o=je(o,d,s),c=je(c,0,a-u);break}this.x=o/=s,this.y=c/=a;const[f,p]=this.getBaseTranslation();o+=f,c+=p,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#D(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return dt.#D(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return dt.#D(t,e,360-this.parentRotation)}#M(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(){const{div:{style:t},width:e,height:s}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#P(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",s),a.setAttribute("data-resizer-name",s),a.addEventListener("pointerdown",this.#L.bind(this,s),{signal:e}),a.addEventListener("contextmenu",zi,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#c)}#L(t,e){e.preventDefault();const{isMac:s}=Ae.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#n?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",ne,{passive:!1,signal:c}),window.addEventListener("contextmenu",zi,{signal:c}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=u,this.div.style.cursor=d,this.#F()};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})}#k(t,e,s,a){this.width=s,this.height=a,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:a}=this.#d;this.#d=null;const o=this.x,c=this.y,u=this.width,d=this.height;o===t&&c===e&&u===s&&d===a||this.addCommands({cmd:this.#k.bind(this,o,c,u,d),undo:this.#k.bind(this,t,e,s,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,e){const[s,a]=this.parentDimensions,o=this.x,c=this.y,u=this.width,d=this.height,f=dt.MIN_SIZE/s,p=dt.MIN_SIZE/a,b=this.#M(this.rotation),y=(B,P)=>[b[0]*B+b[2]*P,b[1]*B+b[3]*P],A=this.#M(360-this.rotation),w=(B,P)=>[A[0]*B+A[2]*P,A[1]*B+A[3]*P];let S,C,E=!1,x=!1;switch(t){case"topLeft":E=!0,S=(B,P)=>[0,0],C=(B,P)=>[B,P];break;case"topMiddle":S=(B,P)=>[B/2,0],C=(B,P)=>[B/2,P];break;case"topRight":E=!0,S=(B,P)=>[B,0],C=(B,P)=>[0,P];break;case"middleRight":x=!0,S=(B,P)=>[B,P/2],C=(B,P)=>[0,P/2];break;case"bottomRight":E=!0,S=(B,P)=>[B,P],C=(B,P)=>[0,0];break;case"bottomMiddle":S=(B,P)=>[B/2,P],C=(B,P)=>[B/2,0];break;case"bottomLeft":E=!0,S=(B,P)=>[0,P],C=(B,P)=>[B,0];break;case"middleLeft":x=!0,S=(B,P)=>[0,P/2],C=(B,P)=>[B,P/2];break}const T=S(u,d),O=C(u,d);let R=y(...O);const L=dt._round(o+R[0]),k=dt._round(c+R[1]);let q=1,X=1,Z,Q;if(e.fromKeyboard)({deltaX:Z,deltaY:Q}=e);else{const{screenX:B,screenY:P}=e,[W,tt]=this.#l;[Z,Q]=this.screenToPageTranslation(B-W,P-tt),this.#l[0]=B,this.#l[1]=P}if([Z,Q]=w(Z/s,Q/a),E){const B=Math.hypot(u,d);q=X=Math.max(Math.min(Math.hypot(O[0]-T[0]-Z,O[1]-T[1]-Q)/B,1/u,1/d),f/u,p/d)}else x?q=je(Math.abs(O[0]-T[0]-Z),f,1)/u:X=je(Math.abs(O[1]-T[1]-Q),p,1)/d;const at=dt._round(u*q),pt=dt._round(d*X);R=y(...C(at,pt));const lt=L-R[0],St=k-R[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=at,this.height=pt,this.x=lt,this.y=St,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#b)return this._editToolbar;this._editToolbar=new Xr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,s]of t)await this._editToolbar.addButton(e,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(an.initialize(dt._l10n),this.#n=new an(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.canAddComment?this.#i||=new Ol(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#i.renderForStandalone(),this.div.append(this.#r))}}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:s,deleted:a}}=this.#i;return{text:e,richText:t,date:s,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new Ol(this),this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:s}){if(!e||(this.#i||=new Ol(this),this.#i.setInitialText(t,s),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(t){this.#i||=new Ol(this),this.#i.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[o]=this.pageDimensions,[c]=this.pageTranslation,u=c+o+1,d=a-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,f,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#i.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#a?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();const[e,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/s).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),dy(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#x||=new hc({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#q.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#q(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(t,e,s){let o=.7*(s/e)+1-.7;if(o===1)return;const c=this.#M(this.rotation),u=(L,k)=>[c[0]*L+c[2]*k,c[1]*L+c[3]*k],[d,f]=this.parentDimensions,p=this.x,b=this.y,y=this.width,A=this.height,w=dt.MIN_SIZE/d,S=dt.MIN_SIZE/f;o=Math.max(Math.min(o,1/y,1/A),w/y,S/A);const C=dt._round(y*o),E=dt._round(A*o);if(C===y&&E===A)return;this.#u||=[p,b,y,A];const x=u(y/2,A/2),T=dt._round(p+x[0]),O=dt._round(b+x[1]),R=u(C/2,E/2);this.x=T-R[0],this.y=O-R[1],this.width=C,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:e}=Ae.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#U(t);return}this.#N(t)}#N(t){const{isMac:e}=Ae.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),c={capture:!0,passive:!1,signal:o},u=f=>{a.abort(),this.#s=null,this.#p=!1,this._uiManager.endDragSession()||this.#N(f),s&&this._onStopDragging()};e&&(this.#C=t.clientX,this.#E=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:b,pointerId:y}=f;if(y!==this.#s){ne(f);return}const[A,w]=this.screenToPageTranslation(p-this.#C,b-this.#E);this.#C=p,this.#E=b,this._uiManager.dragSelectedEditors(A,w)},c),window.addEventListener("touchmove",ne,c),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#x||f.isPrimary)&&u(f),ne(f)},c));const d=f=>{if(!this.#s||this.#s===f.pointerId){u(f);return}ne(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const a=this.parentScale,[o,c]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/a,p=e/a,b=this.x*o,y=this.y*c,A=this.width*o,w=this.height*c;switch(s){case 0:return[b+f+u,c-y-p-w+d,b+f+A+u,c-y-p+d];case 90:return[b+p+u,c-y+f+d,b+p+w+u,c-y+f+A+d];case 180:return[b-f-A+u,c-y+p+d,b-f+u,c-y+p+w+d];case 270:return[b-p-w+u,c-y-f-A+d,b-p+u,c-y-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,a,o,c]=t,u=o-s,d=c-a;switch(this.rotation){case 0:return[s,e-c,u,d];case 90:return[s,e-a,d,u];case 180:return[o,e-a,u,d];case 270:return[o,e-c,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&dt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:s,opacity:a,deleted:o,richText:c},uid:u,pageIndex:d,creationDate:f,modificationDate:p}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:c,contentsObj:{str:t},creationDate:f,modificationDate:s||p,popupRef:!o,color:e,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#b=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#b=!1,!0):!1}isInEditMode(){return this.#b}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:c}=window;return e<c&&a>0&&t<o&&s>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,s){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[o,c]=a.pageDimensions,[u,d,f,p]=a.getRectInCurrentCoords(t.rect,c);return a.x=u/o,a.y=d/c,a.width=f/o,a.height=p/c,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#z(),this.removeEditToolbar(),this.#S){for(const t of this.#S.values())clearTimeout(t);this.#S=null}this.parent=null,this.#x?.destroy(),this.#x=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#P(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[s,a,o,c]=this.getPDFRect();return[dt._round(s+(o-s)*t),dt._round(a+(c-a)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const c=this.#Y.bind(this),u=this.#X.bind(this),d=this._uiManager._signal;for(const f of this.#e){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",this.#K.bind(this,p),{signal:d}),f.setAttribute("data-l10n-id",dt._l10nResizer[p])}}const s=this.#e[0];let a=0;for(const c of e){if(c===s)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==a){if(o<a)for(let u=0;u<a-o;u++)this.#c.append(this.#c.firstElementChild);else if(o>a)for(let u=0;u<o-a;u++)this.#c.firstElementChild.before(this.#c.lastElementChild);let c=0;for(const u of e){const f=this.#e[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",dt._l10nResizer[f])}}this.#j(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){dt._resizerKeyboardManager.exec(this,t)}#X(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#z()}#K(t){this.#m=this.#v?t:""}#j(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#v&&this.#B(this.#m,{deltaX:t,deltaY:e,fromKeyboard:!0})}#z(){this.#v=!1,this.#j(-1),this.#F()}_stopResizingWithKeyboard(){this.#z(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(t){this.#g=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#S||=new Map;const{action:s}=t;let a=this.#S.get(s);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#S.delete(s),this.#S.size===0&&(this.#S=null)},dt._telemetryTimeout),this.#S.set(s,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class z1 extends dt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ob=3285377520,Li=4294901760,nn=65535;class fy{constructor(t){this.h1=t?t&4294967295:ob,this.h2=t?t&4294967295:ob}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let S=0,C=t.length;S<C;S++){const E=t.charCodeAt(S);E<=255?e[s++]=E:(e[s++]=E>>>8,e[s++]=E&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=s>>2,o=s-a*4,c=new Uint32Array(e.buffer,0,a);let u=0,d=0,f=this.h1,p=this.h2;const b=3432918353,y=461845907,A=b&nn,w=y&nn;for(let S=0;S<a;S++)S&1?(u=c[S],u=u*b&Li|u*A&nn,u=u<<15|u>>>17,u=u*y&Li|u*w&nn,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=c[S],d=d*b&Li|d*A&nn,d=d<<15|d>>>17,d=d*y&Li|d*w&nn,p^=d,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,o){case 3:u^=e[a*4+2]<<16;case 2:u^=e[a*4+1]<<8;case 1:u^=e[a*4],u=u*b&Li|u*A&nn,u=u<<15|u>>>17,u=u*y&Li|u*w&nn,a&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Li|t*36045&nn,e=e*4283543511&Li|((e<<16|t>>>16)*2950163797&Li)>>>16,t^=e>>>1,t=t*444984403&Li|t*60499&nn,e=e*3301882366&Li|((e<<16|t>>>16)*3120437893&Li)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const id=Object.freeze({map:null,hash:"",transfer:void 0});class Ed{#t=!1;#e=null;#n=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=this.#i.get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return this.#i.get(t)}remove(t){const e=this.#i.get(t);if(e!==void 0&&(e instanceof dt&&this.#n.delete(e.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#i.values())if(s instanceof dt)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=this.#i.get(t);let a=!1;if(s!==void 0)for(const[o,c]of Object.entries(e))s[o]!==c&&(a=!0,s[o]=c);else a=!0,this.#i.set(t,e);a&&this.#r(),e instanceof dt&&((this.#n||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new gy(this)}get serializable(){if(this.#i.size===0)return id;const t=new Map,e=new fy,s=[],a=Object.create(null);let o=!1;for(const[c,u]of this.#i){const d=u instanceof dt?u.serialize(!1,a):u;d&&(t.set(c,d),e.update(`${c}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const c of t.values())c.bitmap&&s.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:id}get editorStats(){let t=null;const e=new Map;let s=0,a=0;for(const o of this.#i.values()){if(!(o instanceof dt)){o.popup&&(o.popup.deleted?a+=1:s+=1);continue}o.isCommentDeleted?a+=1:o.hasEditedComment&&(s+=1);const c=o.telemetryFinalData;if(!c)continue;const{type:u}=c;e.has(u)||e.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[u]||=new Map;for(const[f,p]of Object.entries(c)){if(f==="type")continue;let b=d.get(f);b||(b=new Map,d.set(f,b));const y=b.get(p)??0;b.set(p,y+1)}}if((a>0||s>0)&&(t||=Object.create(null),t.comments={deleted:a,edited:s}),!t)return null;for(const[o,c]of e)t[o]=c.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const s=this.#n?.get(t);return s?(s.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#n?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#n)for(const e of this.#n.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class gy extends Ed{#t;constructor(t){super();const{map:e,hash:s,transfer:a}=t.serializable,o=structuredClone(e,a?{transfer:a}:null);this.#t={map:o,hash:s,transfer:a}}get print(){Xt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return yt(this,"modifiedIds",{ids:new Set,hash:""})}}class P1{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Lt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:c}=t,u=new FontFace(a,o,c);this.addNativeFontFace(u);try{await u.load(),this.#t.add(a),s?.(t)}catch{bt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Xt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(a){throw bt(`Failed to load font '${s.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const a=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return yt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return yt(this,"isSyncFontLoadingSupported",He||Ae.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Lt(!a.done,"completeRequest() cannot be called twice."),a.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,a={done:!1,complete:e,callback:t};return s.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return yt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(O,R){return O.charCodeAt(R)<<24|O.charCodeAt(R+1)<<16|O.charCodeAt(R+2)<<8|O.charCodeAt(R+3)&255}function a(O,R,L,k){const q=O.substring(0,R),X=O.substring(R+L);return q+k+X}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function p(O,R){if(++f>30){bt("Load test font never loaded."),R();return}if(d.font="30px "+O,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(p.bind(null,O,R))}const b=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=a(y,976,b.length,b);const w=16,S=1482184792;let C=s(y,w);for(o=0,c=b.length-3;o<c;o+=4)C=C-S+s(b,o)|0;o<b.length&&(C=C-S+s(b+"XXX",o)|0),y=a(y,w,4,b1(C));const E=`url(data:font/opentype;base64,${btoa(y)});`,x=`@font-face {font-family:"${b}";src:${E}}`;this.insertRule(x);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const O of[t.loadedName,b]){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=O,T.append(R)}this._document.body.append(T),p(b,()=>{T.remove(),e.complete()})}}class F1{#t;constructor(t,e=null,s,a){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,s&&Object.assign(this,s),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${ly(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let a;try{a=t.get(s)}catch(c){bt(`getPathGenerator - ignoring character: "${c}".`)}const o=hy(a?.path);return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){yt(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){yt(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class Oa{#t;#e;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,s={};let a=0;for(const f of Oa.strings){const p=e.encode(t[f]);s[f]=p,a+=4+p.length}const o=new ArrayBuffer(a),c=new Uint8Array(o),u=new DataView(o);let d=0;for(const f of Oa.strings){const p=s[f],b=p.length;u.setUint32(d,b),c.set(p,d+4),d+=4+b}return Lt(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}#i(t){Lt(t<Oa.strings.length,"Invalid string index");let e=0;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const s=this.#e.getUint32(e);return this.#n.decode(new Uint8Array(this.#t,e+4,s))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}class La{#t;#e;#n;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,s={};let a=0;for(const y of La.strings){const A=e.encode(t[y]);s[y]=A,a+=4+A.length}a+=4;let o,c,u=1+a;t.style&&(o=e.encode(t.style.style),c=e.encode(t.style.weight),u+=4+o.length+4+c.length);const d=new ArrayBuffer(u),f=new Uint8Array(d),p=new DataView(d);let b=0;p.setUint8(b++,t.guessFallback?1:0),p.setUint32(b,0),b+=4,a=0;for(const y of La.strings){const A=s[y],w=A.length;a+=4+w,p.setUint32(b,w),f.set(A,b+4),b+=4+w}return p.setUint32(b-a-4,a),t.style&&(p.setUint32(b,o.length),f.set(o,b+4),b+=4+o.length,p.setUint32(b,c.length),f.set(c,b+4),b+=4+c.length),Lt(b<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(b)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#i(t){Lt(t<La.strings.length,"Invalid string index");let e=5;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const s=this.#e.getUint32(e);return this.#n.decode(new Uint8Array(this.#t,e+4,s))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),s=this.#n.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const a=this.#e.getUint32(t),o=this.#n.decode(new Uint8Array(this.#t,t+4,a));return{style:s,weight:o}}}class qt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#n=this.#e+1+8;static#i=this.#n+1+48;static#r=this.#i+1+6;#a;#s;#o;constructor({data:t,extra:e}){this.#a=t,this.#s=new TextDecoder,this.#o=new DataView(this.#a),e&&Object.assign(this,e)}#c(t){Lt(t<qt.bools.length,"Invalid boolean index");const e=Math.floor(t/4),s=t*2%8,a=this.#o.getUint8(e)>>s&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Lt(t<qt.numbers.length,"Invalid number index"),this.#o.getFloat64(qt.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=qt.#e;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<4;a++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=qt.#n;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<6;a++)s.push(this.#o.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=qt.#i;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<3;a++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}#d(t){Lt(t<qt.strings.length,"Invalid string index");let e=qt.#r+4;for(let o=0;o<t;o++)e+=this.#o.getUint32(e)+4;const s=this.#o.getUint32(e),a=new Uint8Array(s);return a.set(new Uint8Array(this.#a,e+4,s)),this.#s.decode(a)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=qt.#r;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#a,t+4,o)}clearData(){let t=qt.#r;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);new Uint8Array(this.#a,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=qt.#r;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);if(a===0)return null;const o=new Uint8Array(a);return o.set(new Uint8Array(this.#a,t+4,a)),new Oa(o.buffer)}get systemFontInfo(){let t=qt.#r;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);if(s===0)return null;const a=new Uint8Array(s);return a.set(new Uint8Array(this.#a,t+4,s)),new La(a.buffer)}static write(t){const e=t.systemFontInfo?La.write(t.systemFontInfo):null,s=t.cssFontInfo?Oa.write(t.cssFontInfo):null,a=new TextEncoder,o={};let c=0;for(const S of qt.strings)o[S]=a.encode(t[S]),c+=4+o[S].length;const u=qt.#r+4+c+4+(e?e.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(u),f=new Uint8Array(d),p=new DataView(d);let b=0;const y=qt.bools.length;let A=0,w=0;for(let S=0;S<y;S++){const C=t[qt.bools[S]];A|=(C===void 0?0:C?2:1)<<w,w+=2,(w===8||S===y-1)&&(p.setUint8(b++,A),A=0,w=0)}Lt(b===qt.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of qt.numbers)p.setFloat64(b,t[S]),b+=8;if(Lt(b===qt.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(b++,4);for(const S of t.bbox)p.setInt16(b,S,!0),b+=2}else p.setUint8(b++,0),b+=8;if(Lt(b===qt.#n,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(b++,6);for(const S of t.fontMatrix)p.setFloat64(b,S,!0),b+=8}else p.setUint8(b++,0),b+=48;if(Lt(b===qt.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(b++,1);for(const S of t.defaultVMetrics)p.setInt16(b,S,!0),b+=2}else p.setUint8(b++,0),b+=6;Lt(b===qt.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(qt.#r,0),b+=4;for(const S of qt.strings){const C=o[S],E=C.length;p.setUint32(b,E),f.set(C,b+4),b+=4+E}if(p.setUint32(qt.#r,b-qt.#r-4),!e)p.setUint32(b,0),b+=4;else{const S=e.byteLength;p.setUint32(b,S),Lt(b+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),b+4),b+=4+S}if(!s)p.setUint32(b,0),b+=4;else{const S=s.byteLength;p.setUint32(b,S),Lt(b+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(s),b+4),b+=4+S}return t.data===void 0?(p.setUint32(b,0),b+=4):(p.setUint32(b,t.data.length),f.set(t.data,b+4),b+=4+t.data.length),Lt(b<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(b)}}class Ce{static#t=0;static#e=1;static#n=2;static#i=3;static#r=4;static#a=8;static#s=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,s=null,a=[],o=[],c=[],u=[],d=null,f=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,s=t[2],c=t[3],e===1?a.push(...t[4],...t[5]):a.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,d=t[1],a=t[2],o=t[3],u=t[4]||[],s=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const p=Math.floor(a.length/2),b=Math.floor(o.length/3),y=c.length,A=u.length;let w=0;for(const R of u)w+=1,w=Math.ceil(w/4)*4,w+=4+R.coords.length*4,w+=4+R.colors.length*4,R.verticesPerRow!==void 0&&(w+=4);const S=20+p*8+b*3+y*8+(s?16:0)+(f?3:0)+w,C=new ArrayBuffer(S),E=new DataView(C),x=new Uint8Array(C);E.setUint8(Ce.#t,e),E.setUint8(Ce.#e,s?1:0),E.setUint8(Ce.#n,f?1:0),E.setUint8(Ce.#i,d),E.setUint32(Ce.#r,p,!0),E.setUint32(Ce.#a,b,!0),E.setUint32(Ce.#s,y,!0),E.setUint32(Ce.#o,A,!0);let T=20;new Float32Array(C,T,p*2).set(a),T+=p*8,x.set(o,T),T+=b*3;for(const[R,L]of c)E.setFloat32(T,R,!0),T+=4,E.setUint32(T,parseInt(L.slice(1),16),!0),T+=4;if(s)for(const R of s)E.setFloat32(T,R,!0),T+=4;f&&(x.set(f,T),T+=3);for(let R=0;R<u.length;R++){const L=u[R];E.setUint8(T,L.type),T+=1,T=Math.ceil(T/4)*4,E.setUint32(T,L.coords.length,!0),T+=4,new Int32Array(C,T,L.coords.length).set(L.coords),T+=L.coords.length*4,E.setUint32(T,L.colors.length,!0),T+=4,new Int32Array(C,T,L.colors.length).set(L.colors),T+=L.colors.length*4,L.verticesPerRow!==void 0&&(E.setUint32(T,L.verticesPerRow,!0),T+=4)}return C}getIR(){const t=this.view,e=this.data[Ce.#t],s=!!this.data[Ce.#e],a=!!this.data[Ce.#n],o=t.getUint32(Ce.#r,!0),c=t.getUint32(Ce.#a,!0),u=t.getUint32(Ce.#s,!0),d=t.getUint32(Ce.#o,!0);let f=20;const p=new Float32Array(this.buffer,f,o*2);f+=o*8;const b=new Uint8Array(this.buffer,f,c*3);f+=c*3;const y=[];for(let C=0;C<u;++C){const E=t.getFloat32(f,!0);f+=4;const x=t.getUint32(f,!0);f+=4,y.push([E,`#${x.toString(16).padStart(6,"0")}`])}let A=null;if(s){A=[];for(let C=0;C<4;++C)A.push(t.getFloat32(f,!0)),f+=4}let w=null;a&&(w=new Uint8Array(this.buffer,f,3),f+=3);const S=[];for(let C=0;C<d;++C){const E=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const x=t.getUint32(f,!0);f+=4;const T=new Int32Array(this.buffer,f,x);f+=x*4;const O=t.getUint32(f,!0);f+=4;const R=new Int32Array(this.buffer,f,O);f+=O*4;const L={type:E,coords:T,colors:R};E===Wh.LATTICE&&(L.verticesPerRow=t.getUint32(f,!0),f+=4),S.push(L)}if(e===1)return["RadialAxial","axial",A,y,Array.from(p.slice(0,2)),Array.from(p.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",A,y,[p[0],p[1]],[p[3],p[4]],p[2],p[5]];if(e===3){const C=this.data[Ce.#i];let E=null;if(p.length>0){let x=p[0],T=p[0],O=p[1],R=p[1];for(let L=0;L<p.length;L+=2){const k=p[L],q=p[L+1];x=x>k?k:x,O=O>q?q:O,T=T<k?k:T,R=R<q?q:R}E=[x,O,T,R]}return["Mesh",C,p,b,S,E,A,w]}throw new Error(`Unsupported pattern kind: ${e}`)}}class U1{static write(t){let e,s;return Ae.isFloat16ArraySupported?(s=new ArrayBuffer(t.length*2),e=new Float16Array(s)):(s=new ArrayBuffer(t.length*4),e=new Float32Array(s)),e.set(t),s}#t;constructor(t){this.#t=t}get path(){return Ae.isFloat16ArraySupported?new Float16Array(this.#t):new Float32Array(this.#t)}}function I1(h){if(h instanceof URL)return h.href;if(typeof h=="string"){if(He)return h;const t=URL.parse(h,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function H1(h){if(He&&typeof Buffer<"u"&&h instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return ao(h);if(h instanceof ArrayBuffer||ArrayBuffer.isView(h)||typeof h=="object"&&!isNaN(h?.length))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Ll(h){if(typeof h!="string")return null;if(h.endsWith("/"))return h;throw new Error(`Invalid factory url: "${h}" must include trailing slash.`)}const nd=h=>typeof h=="object"&&Number.isInteger(h?.num)&&h.num>=0&&Number.isInteger(h?.gen)&&h.gen>=0,j1=h=>typeof h=="object"&&typeof h?.name=="string",G1=w1.bind(null,nd,j1);class q1{#t=new Map;#e=Promise.resolve();postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,s)})}addEventListener(t,e,s=null){let a=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){bt("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,e);a=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}this.#t.set(e,a)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Nl={DATA:1,ERROR:2},fe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function lb(){}function ni(h){if(h instanceof rs||h instanceof Zh||h instanceof tb||h instanceof Ql||h instanceof Uh)return h;switch(h instanceof Error||typeof h=="object"&&h!==null||Xt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new rs(h.message);case"InvalidPDFException":return new Zh(h.message);case"PasswordException":return new tb(h.message,h.code);case"ResponseException":return new Ql(h.message,h.status,h.missing);case"UnknownErrorException":return new Uh(h.message,h.details)}return new Uh(h.message,h.toString())}class Hr{#t=new AbortController;constructor(t,e,s){this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const s=t.callbackId,a=this.callbackCapabilities[s];if(!a)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===Nl.DATA)a.resolve(t.data);else if(t.callback===Nl.ERROR)a.reject(ni(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(c){o.postMessage({sourceName:s,targetName:a,callback:Nl.DATA,callbackId:t.callbackId,data:c})},function(c){o.postMessage({sourceName:s,targetName:a,callback:Nl.ERROR,callbackId:t.callbackId,reason:ni(c)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},s)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,e,s,a){const o=this.streamId++,c=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:u,action:t,streamId:o,data:e,desiredSize:f.desiredSize},a),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[o].pullCall=p,d.postMessage({sourceName:c,targetName:u,stream:fe.PULL,streamId:o,desiredSize:f.desiredSize}),p.promise},cancel:f=>{Lt(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[o].cancelCall=p,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:c,targetName:u,stream:fe.CANCEL,streamId:o,reason:ni(f)}),p.promise}},s)}#n(t){const e=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,c=this,u=this.actionHandler[t.action],d={enqueue(f,p=1,b){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=p,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:a,stream:fe.ENQUEUE,streamId:e,chunk:f},b)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:fe.CLOSE,streamId:e}),delete c.streamSinks[e])},error(f){Lt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:fe.ERROR,streamId:e,reason:ni(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(u,t.data,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:fe.START_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:fe.START_COMPLETE,streamId:e,reason:ni(f)})})}#i(t){const e=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,c=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case fe.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(ni(t.reason));break;case fe.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(ni(t.reason));break;case fe.PULL:if(!u){o.postMessage({sourceName:s,targetName:a,stream:fe.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||lb).then(function(){o.postMessage({sourceName:s,targetName:a,stream:fe.PULL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:fe.PULL_COMPLETE,streamId:e,reason:ni(f)})});break;case fe.ENQUEUE:if(Lt(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case fe.CLOSE:if(Lt(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#r(c,e);break;case fe.ERROR:Lt(c,"error should have stream controller"),c.controller.error(ni(t.reason)),this.#r(c,e);break;case fe.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(ni(t.reason)),this.#r(c,e);break;case fe.CANCEL:if(!u)break;const d=ni(t.reason);Promise.try(u.onCancel||lb,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:fe.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:fe.CANCEL_COMPLETE,streamId:e,reason:ni(f)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class py{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Xt("Abstract method `_createCanvas` called.")}}class V1 extends py{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class my{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Xt("Abstract method `_fetch` called.")}}class cb extends my{async _fetch(t){const e=await ro(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):ao(e)}}class by{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,a,o){return"none"}destroy(t=!1){}}class X1 extends by{#t;#e;#n;#i;#r;#a;#s=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#r=e}get#o(){return this.#e||=new Map}get#c(){return this.#a||=new Map}get#l(){if(!this.#n){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const s=this.#r.createElementNS(Dn,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#r.createElementNS(Dn,"defs"),t.append(s),s.append(this.#n),this.#r.body.append(t)}return this.#n}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let b=0;b<256;b++)f[b]=d[b]/255;const p=f.join(",");return[p,p,p]}const[e,s,a]=t,o=new Array(256),c=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=e[d]/255,c[d]=s[d]/255,u[d]=a[d]/255;return[o.join(","),c.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(uc(e)?bt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=ay(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[s,a,o]=this.#d(t),c=t.length===1?s:`${s}${a}${o}`;if(e=this.#o.get(c),e)return this.#o.set(t,e),e;const u=`g_${this.#i}_transfer_map_${this.#s++}`,d=this.#h(u);this.#o.set(t,d),this.#o.set(c,d);const f=this.#p(u);return this.#g(s,a,o,f),d}addHCMFilter(t,e){const s=`${t}-${e}`,a="base";let o=this.#c.get(a);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(a,o)),!t||!e))return o.url;const c=this.#v(t);t=it.makeHexColor(...c);const u=this.#v(e);if(e=it.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return o.url;const d=new Array(256);for(let A=0;A<=255;A++){const w=A/255;d[A]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const f=d.join(","),p=`g_${this.#i}_hcm_filter`,b=o.filter=this.#p(p);this.#g(f,f,f,b),this.#m(b);const y=(A,w)=>{const S=c[A]/255,C=u[A]/255,E=new Array(w+1);for(let x=0;x<=w;x++)E[x]=S+x/w*(C-S);return E.join(",")};return this.#g(y(0,5),y(1,5),y(2,5),b),o.url=this.#h(p),o.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[s]=this.#d([t]),a=`alpha_${s}`;if(e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#i}_alpha_map_${this.#s++}`,c=this.#h(o);this.#o.set(t,c),this.#o.set(a,c);const u=this.#p(o);return this.#b(s,u),c}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let s,a;if(t?([s]=this.#d([t]),a=`luminosity_${s}`):a="luminosity",e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#i}_luminosity_map_${this.#s++}`,c=this.#h(o);this.#o.set(t,c),this.#o.set(a,c);const u=this.#p(o);return this.#f(u),t&&this.#b(s,u),c}addHighlightHCMFilter(t,e,s,a,o){const c=`${e}-${s}-${a}-${o}`;let u=this.#c.get(t);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#c.set(t,u)),!e||!s))return u.url;const[d,f]=[e,s].map(this.#v.bind(this));let p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),b=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[y,A]=[a,o].map(this.#v.bind(this));b<p&&([p,b,y,A]=[b,p,A,y]),this.#l.style.color="";const w=(E,x,T)=>{const O=new Array(256),R=(b-p)/T,L=E/255,k=(x-E)/(255*T);let q=0;for(let X=0;X<=T;X++){const Z=Math.round(p+X*R),Q=L+X*k;for(let at=q;at<=Z;at++)O[at]=Q;q=Z+1}for(let X=q;X<256;X++)O[X]=O[q-1];return O.join(",")},S=`g_${this.#i}_hcm_${t}_filter`,C=u.filter=this.#p(S);return this.#m(C),this.#g(w(y[0],A[0],5),w(y[1],A[1],5),w(y[2],A[2],5),C),u.url=this.#h(S),u.url}destroy(t=!1){t&&this.#a?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#a?.clear(),this.#a=null,this.#s=0)}#f(t){const e=this.#r.createElementNS(Dn,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#m(t){const e=this.#r.createElementNS(Dn,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){const e=this.#r.createElementNS(Dn,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,s){const a=this.#r.createElementNS(Dn,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",s),t.append(a)}#g(t,e,s,a){const o=this.#r.createElementNS(Dn,"feComponentTransfer");a.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",e),this.#u(o,"feFuncB",s)}#b(t,e){const s=this.#r.createElementNS(Dn,"feComponentTransfer");e.append(s),this.#u(s,"feFuncA",t)}#v(t){return this.#l.style.color=t,lo(getComputedStyle(this.#l).getPropertyValue("color"))}}class yy{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Xt("Abstract method `_fetch` called.")}}class ub extends yy{async _fetch(t){const e=await ro(t,"arraybuffer");return new Uint8Array(e)}}class vy{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Xt("Abstract method `_fetch` called.")}}class hb extends vy{async _fetch(t){const e=await ro(t,"arraybuffer");return new Uint8Array(e)}}He&&bt("Please use the `legacy` build in Node.js environments.");async function _d(h){const e=await process.getBuiltinModule("fs").promises.readFile(h);return new Uint8Array(e)}class Y1 extends by{}class K1 extends py{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class $1 extends my{async _fetch(t){return _d(t)}}class Q1 extends yy{async _fetch(t){return _d(t)}}class W1 extends vy{async _fetch(t){return _d(t)}}const Ea="__forcedDependency",{floor:db,ceil:fb}=Math;function kl(h,t,e,s,a,o){h[t*4+0]=Math.min(h[t*4+0],e),h[t*4+1]=Math.min(h[t*4+1],s),h[t*4+2]=Math.max(h[t*4+2],a),h[t*4+3]=Math.max(h[t*4+3],o)}const sd=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class Z1{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===sd}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const Bl=(h,t)=>{if(!h)return;let e=h.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},h.set(t,e)),e};class J1{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[Ea]:[]};#n=new Map;#i=[];#r=[];#a=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#p;#u;#g;constructor(t,e,s=!1){this.#f=t.width,this.#m=t.height,this.#b(e),s&&(this.#g=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#b(t,this.#u)}#b(t,e){const s=new ArrayBuffer(t*4);this.#p=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),e&&e.length>0?(this.#u.set(e),this.#u.fill(sd,e.length)):this.#u.fill(sd)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[Ea]:{__proto__:this.#e[Ea]}},this.#s={__proto__:this.#s},this.#i.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const s=this.#i.pop();return s!==void 0&&(Bl(this.#g,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){const e=this.#i.pop();return e!==void 0&&(Bl(this.#g,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const e=this.#r.pop();return e!==void 0&&(Bl(this.#g,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#a.push(it.multiplyByDOMMatrix(this.#a.at(-1),t.getTransform())),this}popBaseTransform(){return this.#a.length>1&&this.#a.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#n.set(t,e),this}recordSimpleDataFromNamed(t,e,s){this.#t[t]=this.#n.get(e)??s}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Ea,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(Ea,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,s,a,o,c){const u=it.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];it.axialAlignedBoundingBox([s,o,a,c],u,d);const f=it.intersect(this.#s,d);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,e,s,a,o,c){const u=this.#s;if(u[0]===1/0)return this;const d=it.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform());if(u[0]===-1/0)return it.axialAlignedBoundingBox([s,o,a,c],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return it.axialAlignedBoundingBox([s,o,a,c],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,e,s,a=1,o=0,c=0,u){const d=s.bbox;let f,p;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(s),f!==!1&&(p=[0,0,0,0],it.axialAlignedBoundingBox(d,s.fontMatrix,p),(a!==1||o!==0||c!==0)&&it.scaleMinMax([a,0,0,-a,o,c],p),f)))return this.recordBBox(t,e,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(t);const b=u();return d&&p&&f===void 0&&(f=p[0]<=o-b.actualBoundingBoxLeft&&p[2]>=o+b.actualBoundingBoxRight&&p[1]<=c-b.actualBoundingBoxAscent&&p[3]>=c+b.actualBoundingBoxDescent,this.#h.set(s,f),f)?this.recordBBox(t,e,p[0],p[2],p[1],p[3]):this.recordBBox(t,e,o-b.actualBoundingBoxLeft,o+b.actualBoundingBoxRight,c-b.actualBoundingBoxAscent,c+b.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#m,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const s=this.#l,a=this.#t,o=this.#e;for(const c of e)c in this.#t?s.add(a[c]):c in o&&o[c].forEach(s.add,s);return this}recordNamedDependency(t,e){return this.#n.has(e)&&this.#l.add(this.#n.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Ea]),this.#g){const s=Bl(this.#g,t),{dependencies:a}=s;this.#l.forEach(a.add,a),this.#i.forEach(a.add,a),this.#r.forEach(a.add,a),a.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=db(this.#o[0]*256/this.#f),a=db(this.#o[1]*256/this.#m),o=fb(this.#o[2]*256/this.#f),c=fb(this.#o[3]*256/this.#m);kl(this.#p,t,s,a,o,c);for(const u of this.#l)u!==t&&kl(this.#p,u,s,a,o,c);for(const u of this.#i)u!==t&&kl(this.#p,u,s,a,o,c);for(const u of this.#r)u!==t&&kl(this.#p,u,s,a,o,c);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const s=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const a of s)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new Z1(this.#u,this.#p)}takeDebugMetadata(){return this.#g}}class Wl{#t;#e;#n;#i=0;#r=0;constructor(t,e,s){if(t instanceof Wl&&t.#n===!!s)return t;this.#t=t,this.#e=e,this.#n=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,s){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#n||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,s,a,o,c){return this.#n||this.#t.recordClipBox(this.#e,e,s,a,o,c),this}recordBBox(t,e,s,a,o,c){return this.#n||this.#t.recordBBox(this.#e,e,s,a,o,c),this}recordCharacterBBox(t,e,s,a,o,c,u){return this.#n||this.#t.recordCharacterBBox(this.#e,e,s,a,o,c,u),this}recordFullPageBBox(t){return this.#n||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#n||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Ni={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},ke={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function ad(h,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,s),h.clip(a)}class Cd{isModifyingCurrentTransform(){return!1}getPattern(){Xt("Abstract method `getPattern` called.")}}class tw extends Cd{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let s,a=this._p0,o=this._p1;if(e&&(a=a.slice(),o=o.slice(),it.applyTransform(a,e),it.applyTransform(o,e)),this._type==="axial")s=t.createLinearGradient(a[0],a[1],o[0],o[1]);else if(this._type==="radial"){let c=this._r0,u=this._r1;if(e){const d=new Float32Array(2);it.singularValueDecompose2dScale(e,d),c*=d[0],u*=d[0]}s=t.createRadialGradient(a[0],a[1],c,o[0],o[1],u)}for(const c of this._colorStops)s.addColorStop(c[0],c[1]);return s}getPattern(t,e,s,a){let o;if(a===ke.STROKE||a===ke.FILL){if(this.isOriginBased()){let y=it.transform(s,e.baseTransform);this.matrix&&(y=it.transform(y,this.matrix));const A=.001,w=Math.hypot(y[0],y[1]),S=Math.hypot(y[2],y[3]),C=(y[0]*y[2]+y[1]*y[3])/(w*S);if(Math.abs(C)<A)if(this.isRadial()){if(Math.abs(w-S)<A)return this._createGradient(t,y)}else return this._createGradient(t,y)}const c=e.current.getClippedPathBoundingBox(a,Jt(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,d),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-c[0],-c[1]),s=it.transform(s,[1,0,0,1,c[0],c[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),ad(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),o=t.createPattern(f.canvas,"no-repeat");const b=new DOMMatrix(s);o.setTransform(b)}else ad(t,this._bbox),o=this._createGradient(t);return o}}function jh(h,t,e,s,a,o,c,u){const d=t.coords,f=t.colors,p=h.data,b=h.width*4;let y;d[e+1]>d[s+1]&&(y=e,e=s,s=y,y=o,o=c,c=y),d[s+1]>d[a+1]&&(y=s,s=a,a=y,y=c,c=u,u=y),d[e+1]>d[s+1]&&(y=e,e=s,s=y,y=o,o=c,c=y);const A=(d[e]+t.offsetX)*t.scaleX,w=(d[e+1]+t.offsetY)*t.scaleY,S=(d[s]+t.offsetX)*t.scaleX,C=(d[s+1]+t.offsetY)*t.scaleY,E=(d[a]+t.offsetX)*t.scaleX,x=(d[a+1]+t.offsetY)*t.scaleY;if(w>=x)return;const T=f[o],O=f[o+1],R=f[o+2],L=f[c],k=f[c+1],q=f[c+2],X=f[u],Z=f[u+1],Q=f[u+2],at=Math.round(w),pt=Math.round(x);let lt,St,B,P,W,tt,ft,D;for(let F=at;F<=pt;F++){if(F<C){const ut=F<w?0:(w-F)/(w-C);lt=A-(A-S)*ut,St=T-(T-L)*ut,B=O-(O-k)*ut,P=R-(R-q)*ut}else{let ut;F>x?ut=1:C===x?ut=0:ut=(C-F)/(C-x),lt=S-(S-E)*ut,St=L-(L-X)*ut,B=k-(k-Z)*ut,P=q-(q-Q)*ut}let K;F<w?K=0:F>x?K=1:K=(w-F)/(w-x),W=A-(A-E)*K,tt=T-(T-X)*K,ft=O-(O-Z)*K,D=R-(R-Q)*K;const J=Math.round(Math.min(lt,W)),ct=Math.round(Math.max(lt,W));let ot=b*F+J*4;for(let ut=J;ut<=ct;ut++)K=(lt-ut)/(lt-W),K<0?K=0:K>1&&(K=1),p[ot++]=St-(St-tt)*K|0,p[ot++]=B-(B-ft)*K|0,p[ot++]=P-(P-D)*K|0,p[ot++]=255}}function ew(h,t,e){const s=t.coords,a=t.colors;let o,c;switch(t.type){case Wh.LATTICE:const u=t.verticesPerRow,d=Math.floor(s.length/u)-1,f=u-1;for(o=0;o<d;o++){let p=o*u;for(let b=0;b<f;b++,p++)jh(h,e,s[p],s[p+1],s[p+u],a[p],a[p+1],a[p+u]),jh(h,e,s[p+u+1],s[p+1],s[p+u],a[p+u+1],a[p+1],a[p+u])}break;case Wh.TRIANGLES:for(o=0,c=s.length;o<c;o+=3)jh(h,e,s[o],s[o+1],s[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class iw extends Cd{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,s){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-d,b=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),A=f/b,w=p/y,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/A,scaleY:1/w},C=b+4,E=y+4,x=s.getCanvas("mesh",C,E),T=x.context,O=T.createImageData(b,y);if(e){const L=O.data;for(let k=0,q=L.length;k<q;k+=4)L[k]=e[0],L[k+1]=e[1],L[k+2]=e[2],L[k+3]=255}for(const L of this._figures)ew(O,L,S);return T.putImageData(O,2,2),{canvas:x.canvas,offsetX:u-2*A,offsetY:d-2*w,scaleX:A,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,e,s,a){ad(t,this._bbox);const o=new Float32Array(2);if(a===ke.SHADING)it.singularValueDecompose2dScale(Jt(t),o);else if(this.matrix){it.singularValueDecompose2dScale(this.matrix,o);const[u,d]=o;it.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=u,o[1]*=d}else it.singularValueDecompose2dScale(e.baseTransform,o);const c=this._createMeshCanvas(o,a===ke.SHADING?null:this._background,e.cachedCanvases);return a!==ke.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class nw extends Cd{getPattern(){return"hotpink"}}function sw(h){switch(h[0]){case"RadialAxial":return new tw(h);case"Mesh":return new iw(h);case"Dummy":return new nw}throw new Error(`Unknown IR type: ${h[0]}`)}const gb={COLORED:1,UNCOLORED:2};class Td{static MAX_PATTERN_SIZE=3e3;constructor(t,e,s,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(t,e){const{bbox:s,operatorList:a,paintType:o,tilingType:c,color:u,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),cc("TilingType: "+c);const b=s[0],y=s[1],A=s[2],w=s[3],S=A-b,C=w-y,E=new Float32Array(2);it.singularValueDecompose2dScale(this.matrix,E);const[x,T]=E;it.singularValueDecompose2dScale(this.baseTransform,E);const O=x*E[0],R=T*E[1];let L=S,k=C,q=!1,X=!1;const Z=Math.ceil(f*O),Q=Math.ceil(p*R),at=Math.ceil(S*O),pt=Math.ceil(C*R);Z>=at?L=f:q=!0,Q>=pt?k=p:X=!0;const lt=this.getSizeAndScale(L,this.ctx.canvas.width,O),St=this.getSizeAndScale(k,this.ctx.canvas.height,R),B=t.cachedCanvases.getCanvas("pattern",lt.size,St.size),P=B.context,W=d.createCanvasGraphics(P,e);if(W.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(W,o,u),P.translate(-lt.scale*b,-St.scale*y),W.transform(0,lt.scale,0,0,St.scale,0,0),P.save(),W.dependencyTracker?.save(),this.clipBbox(W,b,y,A,w),W.baseTransform=Jt(W.ctx),W.executeOperatorList(a),W.endDrawing(),W.dependencyTracker?.restore(),P.restore(),q||X){const tt=B.canvas;q&&(L=f),X&&(k=p);const ft=this.getSizeAndScale(L,this.ctx.canvas.width,O),D=this.getSizeAndScale(k,this.ctx.canvas.height,R),F=ft.size,K=D.size,J=t.cachedCanvases.getCanvas("pattern-workaround",F,K),ct=J.context,ot=q?Math.floor(S/f):0,ut=X?Math.floor(C/p):0;for(let Ft=0;Ft<=ot;Ft++)for(let Et=0;Et<=ut;Et++)ct.drawImage(tt,F*Ft,K*Et,F,K,0,0,F,K);return{canvas:J.canvas,scaleX:ft.scale,scaleY:D.scale,offsetX:b,offsetY:y}}return{canvas:B.canvas,scaleX:lt.scale,scaleY:St.scale,offsetX:b,offsetY:y}}getSizeAndScale(t,e,s){const a=Math.max(Td.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*s);return o>=a?o=a:s=o/t,{scale:s,size:o}}clipBbox(t,e,s,a,o){const c=a-e,u=o-s;t.ctx.rect(e,s,c,u),it.axialAlignedBoundingBox([e,s,a,o],Jt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const a=t.ctx,o=t.current;switch(e){case gb.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;a.fillStyle=o.fillColor=c,a.strokeStyle=o.strokeColor=u;break;case gb.UNCOLORED:a.fillStyle=a.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new m1(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,s,a,o){let c=s;a!==ke.SHADING&&(c=it.transform(c,e.baseTransform),this.matrix&&(c=it.transform(c,this.matrix)));const u=this.createPatternCanvas(e,o);let d=new DOMMatrix(c);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(d),f}}function aw({src:h,srcPos:t=0,dest:e,width:s,height:a,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=Ae.isLittleEndian?4278190080:255,[d,f]=c?[o,u]:[u,o],p=s>>3,b=s&7,y=h.length;e=new Uint32Array(e.buffer);let A=0;for(let w=0;w<a;w++){for(const C=t+p;t<C;t++){const E=t<y?h[t]:255;e[A++]=E&128?f:d,e[A++]=E&64?f:d,e[A++]=E&32?f:d,e[A++]=E&16?f:d,e[A++]=E&8?f:d,e[A++]=E&4?f:d,e[A++]=E&2?f:d,e[A++]=E&1?f:d}if(b===0)continue;const S=t<y?h[t++]:255;for(let C=0;C<b;C++)e[A++]=S&1<<7-C?f:d}return{srcPos:t,destPos:A}}const pb=16,mb=100,rw=15,bb=10,si=16,Gh=new DOMMatrix,pi=new Float32Array(2),Da=new Float32Array([1/0,1/0,-1/0,-1/0]);function ow(h,t){if(h._removeMirroring)throw new Error("Context is already forwarding operations.");h.__originalSave=h.save,h.__originalRestore=h.restore,h.__originalRotate=h.rotate,h.__originalScale=h.scale,h.__originalTranslate=h.translate,h.__originalTransform=h.transform,h.__originalSetTransform=h.setTransform,h.__originalResetTransform=h.resetTransform,h.__originalClip=h.clip,h.__originalMoveTo=h.moveTo,h.__originalLineTo=h.lineTo,h.__originalBezierCurveTo=h.bezierCurveTo,h.__originalRect=h.rect,h.__originalClosePath=h.closePath,h.__originalBeginPath=h.beginPath,h._removeMirroring=()=>{h.save=h.__originalSave,h.restore=h.__originalRestore,h.rotate=h.__originalRotate,h.scale=h.__originalScale,h.translate=h.__originalTranslate,h.transform=h.__originalTransform,h.setTransform=h.__originalSetTransform,h.resetTransform=h.__originalResetTransform,h.clip=h.__originalClip,h.moveTo=h.__originalMoveTo,h.lineTo=h.__originalLineTo,h.bezierCurveTo=h.__originalBezierCurveTo,h.rect=h.__originalRect,h.closePath=h.__originalClosePath,h.beginPath=h.__originalBeginPath,delete h._removeMirroring},h.save=function(){t.save(),this.__originalSave()},h.restore=function(){t.restore(),this.__originalRestore()},h.translate=function(e,s){t.translate(e,s),this.__originalTranslate(e,s)},h.scale=function(e,s){t.scale(e,s),this.__originalScale(e,s)},h.transform=function(e,s,a,o,c,u){t.transform(e,s,a,o,c,u),this.__originalTransform(e,s,a,o,c,u)},h.setTransform=function(e,s,a,o,c,u){t.setTransform(e,s,a,o,c,u),this.__originalSetTransform(e,s,a,o,c,u)},h.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},h.rotate=function(e){t.rotate(e),this.__originalRotate(e)},h.clip=function(e){t.clip(e),this.__originalClip(e)},h.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},h.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},h.bezierCurveTo=function(e,s,a,o,c,u){t.bezierCurveTo(e,s,a,o,c,u),this.__originalBezierCurveTo(e,s,a,o,c,u)},h.rect=function(e,s,a,o){t.rect(e,s,a,o),this.__originalRect(e,s,a,o)},h.closePath=function(){t.closePath(),this.__originalClosePath()},h.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class lw{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,s)):(a=this.canvasFactory.create(e,s),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function zl(h,t,e,s,a,o,c,u,d,f){const[p,b,y,A,w,S]=Jt(h);if(b===0&&y===0){const x=c*p+w,T=Math.round(x),O=u*A+S,R=Math.round(O),L=(c+d)*p+w,k=Math.abs(Math.round(L)-T)||1,q=(u+f)*A+S,X=Math.abs(Math.round(q)-R)||1;return h.setTransform(Math.sign(p),0,0,Math.sign(A),T,R),h.drawImage(t,e,s,a,o,0,0,k,X),h.setTransform(p,b,y,A,w,S),[k,X]}if(p===0&&A===0){const x=u*y+w,T=Math.round(x),O=c*b+S,R=Math.round(O),L=(u+f)*y+w,k=Math.abs(Math.round(L)-T)||1,q=(c+d)*b+S,X=Math.abs(Math.round(q)-R)||1;return h.setTransform(0,Math.sign(b),Math.sign(y),0,T,R),h.drawImage(t,e,s,a,o,0,0,X,k),h.setTransform(p,b,y,A,w,S),[X,k]}h.drawImage(t,e,s,a,o,c,u,d,f);const C=Math.hypot(p,b),E=Math.hypot(y,A);return[C*d,E*f]}class yb{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Qh;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=ye.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,s){s?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Da.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=ke.FILL,e=null){const s=this.minMax.slice();if(t===ke.STROKE){e||Xt("Stroke bounding box must include transform."),it.singularValueDecompose2dScale(e,pi);const a=pi[0]*this.lineWidth/2,o=pi[1]*this.lineWidth/2;s[0]-=a,s[1]-=o,s[2]+=a,s[3]+=o}return s}updateClipFromPath(){const t=it.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Da,0)}getClippedPathBoundingBox(t=ke.FILL,e=null){return it.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function vb(h,t){if(t instanceof ImageData){h.putImageData(t,0,0);return}const e=t.height,s=t.width,a=e%si,o=(e-a)/si,c=a===0?o:o+1,u=h.createImageData(s,si);let d=0,f;const p=t.data,b=u.data;let y,A,w,S;if(t.kind===Hl.GRAYSCALE_1BPP){const C=p.byteLength,E=new Uint32Array(b.buffer,0,b.byteLength>>2),x=E.length,T=s+7>>3,O=4294967295,R=Ae.isLittleEndian?4278190080:255;for(y=0;y<c;y++){for(w=y<o?si:a,f=0,A=0;A<w;A++){const L=C-d;let k=0;const q=L>T?s:L*8-7,X=q&-8;let Z=0,Q=0;for(;k<X;k+=8)Q=p[d++],E[f++]=Q&128?O:R,E[f++]=Q&64?O:R,E[f++]=Q&32?O:R,E[f++]=Q&16?O:R,E[f++]=Q&8?O:R,E[f++]=Q&4?O:R,E[f++]=Q&2?O:R,E[f++]=Q&1?O:R;for(;k<q;k++)Z===0&&(Q=p[d++],Z=128),E[f++]=Q&Z?O:R,Z>>=1}for(;f<x;)E[f++]=0;h.putImageData(u,0,y*si)}}else if(t.kind===Hl.RGBA_32BPP){for(A=0,S=s*si*4,y=0;y<o;y++)b.set(p.subarray(d,d+S)),d+=S,h.putImageData(u,0,A),A+=si;y<c&&(S=s*a*4,b.set(p.subarray(d,d+S)),h.putImageData(u,0,A))}else if(t.kind===Hl.RGB_24BPP)for(w=si,S=s*w,y=0;y<c;y++){for(y>=o&&(w=a,S=s*w),f=0,A=S;A--;)b[f++]=p[d++],b[f++]=p[d++],b[f++]=p[d++],b[f++]=255;h.putImageData(u,0,y*si)}else throw new Error(`bad image kind: ${t.kind}`)}function Ab(h,t){if(t.bitmap){h.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,a=e%si,o=(e-a)/si,c=a===0?o:o+1,u=h.createImageData(s,si);let d=0;const f=t.data,p=u.data;for(let b=0;b<c;b++){const y=b<o?si:a;({srcPos:d}=aw({src:f,srcPos:d,dest:p,width:s,height:y,nonBlackColor:0})),h.putImageData(u,0,b*si)}}function kr(h,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)h[s]!==void 0&&(t[s]=h[s]);h.setLineDash!==void 0&&(t.setLineDash(h.getLineDash()),t.lineDashOffset=h.lineDashOffset)}function Pl(h){h.strokeStyle=h.fillStyle="#000000",h.fillRule="nonzero",h.globalAlpha=1,h.lineWidth=1,h.lineCap="butt",h.lineJoin="miter",h.miterLimit=10,h.globalCompositeOperation="source-over",h.font="10px sans-serif",h.setLineDash!==void 0&&(h.setLineDash([]),h.lineDashOffset=0);const{filter:t}=h;t!=="none"&&t!==""&&(h.filter="none")}function Sb(h,t){if(t)return!0;it.singularValueDecompose2dScale(h,pi);const e=Math.fround(rn.pixelRatio*za.PDF_TO_CSS_UNITS);return pi[0]<=e&&pi[1]<=e}const cw=["butt","round","square"],uw=["miter","round","bevel"],hw={},wb={};class Na{constructor(t,e,s,a,o,{optionalContentConfig:c,markedContentStack:u=null},d,f,p){this.ctx=t,this.current=new yb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new lw(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,e,s=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):s}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:a=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,s){const d=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Jt(this.compositeCtx))}this.ctx.save(),Pl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Jt(this.ctx)}executeOperatorList(t,e,s,a,o){const c=t.argsArray,u=t.fnArray;let d=e||0;const f=c.length;if(f===d)return d;const p=f-d>bb&&typeof s=="function",b=p?Date.now()+rw:0;let y=0;const A=this.commonObjs,w=this.objs;let S,C;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,s),d;if(!o||o(d))if(S=u[d],C=c[d]??null,S!==Wr.dependency)C===null?this[S](d):this[S](d,...C);else for(const E of C){this.dependencyTracker?.recordNamedData(E,d);const x=E.startsWith("g_")?A:w;if(!x.has(E))return x.get(E,s),d}if(d++,d===f)return d;if(p&&++y>bb){if(Date.now()>b)return s(),d;y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const s=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),u=s,d=a,f="prescale1",p,b;for(;o>2&&u>1||c>2&&d>1;){let y=u,A=d;o>2&&u>1&&(y=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/y),c>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/A),p=this.cachedCanvases.getCanvas(f,y,A),b=p.context,b.clearRect(0,0,y,A),b.drawImage(t,0,0,u,d,0,0,y,A),t=p.canvas,u=y,d=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t,e){const s=this.ctx,{width:a,height:o}=e,c=this.current.fillColor,u=this.current.patternFill,d=Jt(s);let f,p,b,y;if((e.bitmap||e.data)&&e.count>1){const Z=e.bitmap||e.data.buffer;p=JSON.stringify(u?d:[d.slice(0,4),c]),f=this._cachedBitmapsMap.get(Z),f||(f=new Map,this._cachedBitmapsMap.set(Z,f));const Q=f.get(p);if(Q&&!u){const at=Math.round(Math.min(d[0],d[2])+d[4]),pt=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,Ni.transformAndFill),{canvas:Q,offsetX:at,offsetY:pt}}b=Q}b||(y=this.cachedCanvases.getCanvas("maskCanvas",a,o),Ab(y.context,e));let A=it.transform(d,[1/a,0,0,-1/o,0,0]);A=it.transform(A,[1,0,0,1,0,-o]);const w=Da.slice();it.axialAlignedBoundingBox([0,0,a,o],A,w);const[S,C,E,x]=w,T=Math.round(E-S)||1,O=Math.round(x-C)||1,R=this.cachedCanvases.getCanvas("fillCanvas",T,O),L=R.context,k=S,q=C;L.translate(-k,-q),L.transform(...A),b||(b=this._scaleImage(y.canvas,en(L)),b=b.img,f&&u&&f.set(p,b)),L.imageSmoothingEnabled=Sb(Jt(L),e.interpolate),zl(L,b,0,0,b.width,b.height,0,0,a,o),L.globalCompositeOperation="source-in";const X=it.transform(en(L),[1,0,0,1,-k,-q]);return L.fillStyle=u?c.getPattern(s,this,X,ke.FILL,t):c,L.fillRect(0,0,a,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,R.canvas)),this.dependencyTracker?.recordDependencies(t,Ni.transformAndFill),{canvas:R.canvas,offsetX:Math.round(k),offsetY:Math.round(q)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=cw[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=uw[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,s){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(e),a.lineDashOffset=s)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[s,a]of e)switch(s){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,s=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(a,e,s);this.suspendedCtx=this.ctx;const c=this.ctx=o.context;c.setTransform(this.suspendedCtx.getTransform()),kr(this.suspendedCtx,c),ow(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),kr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,a){const o=a[0],c=a[1],u=a[2]-o,d=a[3]-c;u===0||d===0||(this.genericComposeSMask(e.context,s,u,d,e.subtype,e.backdrop,e.transferMap,o,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,a,o,c,u,d,f,p,b){let y=t.canvas,A=d-p,w=f-b;if(c)if(A<0||w<0||A+s>y.width||w+a>y.height){const C=this.cachedCanvases.getCanvas("maskExtension",s,a),E=C.context;E.drawImage(y,-A,-w),E.globalCompositeOperation="destination-atop",E.fillStyle=c,E.fillRect(0,0,s,a),E.globalCompositeOperation="source-over",y=C.canvas,A=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(A,w,s,a),t.clip(C),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(A,w,s,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(d,f,s,a),e.clip(S),e.globalCompositeOperation="destination-in",e.drawImage(y,A,w,s,a,d,f,s,a),e.restore()}save(t){this.inSMaskMode&&kr(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&kr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,s,a,o,c,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,s,a,o,c,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s,a){let[o]=s;if(!a){o||=s[0]=new Path2D,this[e](t,o);return}if(this.dependencyTracker!==null){const c=e===Wr.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-c,a[2]+c,a[1]-c,a[3]+c).recordDependencies(t,["transform"])}o instanceof Path2D||(o=s[0]=hy(o)),it.axialAlignedBoundingBox(a,Jt(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,s=!0){const a=this.ctx,o=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const c=o.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=o.getPattern(a,this,en(a),ke.STROKE,t),c){const u=new Path2D;u.addPath(e,a.getTransform().invertSelf().multiplySelf(c)),e=u}this.rescaleAndStroke(e,!1),a.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,Ni.stroke),s&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(ke.STROKE,Jt(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,s=!0){const a=this.ctx,o=this.current.fillColor,c=this.current.patternFill;let u=!1;if(c){const f=o.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=o.getPattern(a,this,en(a),ke.FILL,t),f){const p=new Path2D;p.addPath(e,a.getTransform().invertSelf().multiplySelf(f)),e=p}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(e,"evenodd"),this.pendingEOFill=!1):a.fill(e)),this.dependencyTracker?.recordDependencies(t,Ni.fill),u&&(a.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,Ni.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=hw}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=wb}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;e!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(e!==void 0){const a=new Path2D,o=s.getTransform().invertSelf();for(const{transform:c,x:u,y:d,fontSize:f,path:p}of e)p&&a.addPath(p,new DOMMatrix(c).preMultiplySelf(o).translate(u,d).scale(f,-f));s.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const a=this.commonObjs.get(e),o=this.current;if(!a)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=a.fontMatrix||Qh,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&bt("Invalid font matrix for font "+e),s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=s,a.isType3Font)return;const c=a.loadedName||"sans-serif",u=a.systemFontInfo?.css||`"${c}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const f=a.italic?"italic":"normal";let p=s;s<pb?p=pb:s>mb&&(p=mb),this.current.fontSizeScale=s/p,this.ctx.font=`${f} ${d} ${p}px ${u}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,e,s){this.setLeading(t,-s),this.moveText(t,e,s)}setTextMatrix(t,e){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=e,s.textMatrixScale=Math.hypot(e[0],e[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,e,s){const a=new Path2D;return a.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),a}paintChar(t,e,s,a,o,c){const u=this.ctx,d=this.current,f=d.font,p=d.textRenderingMode,b=d.fontSize/d.fontSizeScale,y=p&ye.FILL_STROKE_MASK,A=!!(p&ye.ADD_TO_PATH_FLAG),w=d.patternFill&&!f.missingFile,S=d.patternStroke&&!f.missingFile;let C;if((f.disableFontFace||A||w||S)&&!f.missingFile&&(C=f.getPathGenerator(this.commonObjs,e)),C&&(f.disableFontFace||w||S)){u.save(),u.translate(s,a),u.scale(b,-b),this.dependencyTracker?.recordCharacterBBox(t,u,f);let E;if(y===ye.FILL||y===ye.FILL_STROKE)if(o){E=u.getTransform(),u.setTransform(...o);const x=this.#n(C,E,o);u.fill(x)}else u.fill(C);if(y===ye.STROKE||y===ye.FILL_STROKE)if(c){E||=u.getTransform(),u.setTransform(...c);const{a:x,b:T,c:O,d:R}=E,L=it.inverseTransform(c),k=it.transform([x,T,O,R,0,0],L);it.singularValueDecompose2dScale(k,pi),u.lineWidth*=Math.max(pi[0],pi[1])/b,u.stroke(this.#n(C,E,c))}else u.lineWidth/=b,u.stroke(C);u.restore()}else(y===ye.FILL||y===ye.FILL_STROKE)&&(u.fillText(e,s,a),this.dependencyTracker?.recordCharacterBBox(t,u,f,b,s,a,()=>u.measureText(e))),(y===ye.STROKE||y===ye.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,b,s,a,()=>u.measureText(e)).recordDependencies(t,Ni.stroke),u.strokeText(e,s,a));A&&((this.pendingTextPaths||=[]).push({transform:Jt(u),x:s,y:a,fontSize:b,path:C}),this.dependencyTracker?.recordCharacterBBox(t,u,f,b,s,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){s=!0;break}return yt(this,"isFontSubpixelAAEnabled",s)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Ni.showText).resetBBox(t),this.current.textRenderingMode&ye.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,a=s.font;if(a.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const o=s.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const c=this.ctx,u=s.fontSizeScale,d=s.charSpacing,f=s.wordSpacing,p=s.fontDirection,b=s.textHScale*p,y=e.length,A=a.vertical,w=A?1:-1,S=a.defaultVMetrics,C=o*s.fontMatrix[0],E=s.textRenderingMode===ye.FILL&&!a.disableFontFace&&!s.patternFill;c.save(),s.textMatrix&&c.transform(...s.textMatrix),c.translate(s.x,s.y+s.textRise),p>0?c.scale(b,-1):c.scale(b,1);let x,T;const O=s.textRenderingMode&ye.FILL_STROKE_MASK,R=O===ye.FILL||O===ye.FILL_STROKE,L=O===ye.STROKE||O===ye.FILL_STROKE;if(R&&s.patternFill){c.save();const Q=s.fillColor.getPattern(c,this,en(c),ke.FILL,t);x=Jt(c),c.restore(),c.fillStyle=Q}if(L&&s.patternStroke){c.save();const Q=s.strokeColor.getPattern(c,this,en(c),ke.STROKE,t);T=Jt(c),c.restore(),c.strokeStyle=Q}let k=s.lineWidth;const q=s.textMatrixScale;if(q===0||k===0?L&&(k=this.getSinglePixelWidth()):k/=q,u!==1&&(c.scale(u,u),k/=u),c.lineWidth=k,a.isInvalidPDFjsFont){const Q=[];let at=0;for(const lt of e)Q.push(lt.unicode),at+=lt.width;const pt=Q.join("");if(c.fillText(pt,0,0),this.dependencyTracker!==null){const lt=c.measureText(pt);this.dependencyTracker.recordBBox(t,this.ctx,-lt.actualBoundingBoxLeft,lt.actualBoundingBoxRight,-lt.actualBoundingBoxAscent,lt.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=at*C*b,c.restore(),this.compose();return}let X=0,Z;for(Z=0;Z<y;++Z){const Q=e[Z];if(typeof Q=="number"){X+=w*Q*o/1e3;continue}let at=!1;const pt=(Q.isSpace?f:0)+d,lt=Q.fontChar,St=Q.accent;let B,P,W=Q.width;if(A){const D=Q.vmetric||S,F=-(Q.vmetric?D[1]:W*.5)*C,K=D[2]*C;W=D?-D[0]:W,B=F/u,P=(X+K)/u}else B=X/u,P=0;let tt;if(a.remeasure&&W>0){tt=c.measureText(lt);const D=tt.width*1e3/o*u;if(W<D&&this.isFontSubpixelAAEnabled){const F=W/D;at=!0,c.save(),c.scale(F,1),B/=F}else W!==D&&(B+=(W-D)/2e3*o/u)}if(this.contentVisible&&(Q.isInFont||a.missingFile)){if(E&&!St)c.fillText(lt,B,P),this.dependencyTracker?.recordCharacterBBox(t,c,tt?{bbox:null}:a,o/u,B,P,()=>tt??c.measureText(lt));else if(this.paintChar(t,lt,B,P,x,T),St){const D=B+o*St.offset.x/u,F=P-o*St.offset.y/u;this.paintChar(t,St.fontChar,D,F,x,T)}}const ft=A?W*C-pt*p:W*C+pt*p;X+=ft,at&&c.restore()}A?s.y-=X:s.x+=X*b,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const s=this.ctx,a=this.current,o=a.font,c=a.fontSize,u=a.fontDirection,d=o.vertical?1:-1,f=a.charSpacing,p=a.wordSpacing,b=a.textHScale*u,y=a.fontMatrix||Qh,A=e.length,w=a.textRenderingMode===ye.INVISIBLE;let S,C,E,x;if(w||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),a.textMatrix&&s.transform(...a.textMatrix),s.translate(a.x,a.y+a.textRise),s.scale(b,u);const T=this.dependencyTracker;for(this.dependencyTracker=T?new Wl(T,t):null,S=0;S<A;++S){if(C=e[S],typeof C=="number"){x=d*C*c/1e3,this.ctx.translate(x,0),a.x+=x*b;continue}const O=(C.isSpace?p:0)+f,R=o.charProcOperatorList[C.operatorListId];R?this.contentVisible&&(this.save(),s.scale(c,c),s.transform(...y),this.executeOperatorList(R),this.restore()):bt(`Type3 character "${C.operatorListId}" is not available.`);const L=[C.width,0];it.applyTransform(L,y),E=L[0]*c+O,s.translate(E,0),a.x+=E*b}s.restore(),T&&(this.dependencyTracker=T)}setCharWidth(t,e,s){}setCharWidthAndBounds(t,e,s,a,o,c,u){const d=new Path2D;d.rect(a,o,c-a,u-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,a,c,o,u).recordClipBox(t,this.ctx,a,c,o,u),this.endPath(t)}getColorN_Pattern(t,e){let s;if(e[0]==="TilingPattern"){const a=this.baseTransform||Jt(this.ctx),o={createCanvasGraphics:(c,u)=>new Na(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Wl(this.dependencyTracker,u,!0):null)};s=new Td(e,this.ctx,o,a)}else s=this._getPattern(t,e[1],e[2]);return s}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,s=null){let a;return this.cachedPatterns.has(e)?a=this.cachedPatterns.get(e):(a=sw(this.getObject(t,e)),this.cachedPatterns.set(e,a)),s&&(a.matrix=s),a}shadingFill(t,e){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const a=this._getPattern(t,e);s.fillStyle=a.getPattern(s,this,en(s),ke.SHADING,t);const o=en(s);if(o){const{width:c,height:u}=s.canvas,d=Da.slice();it.axialAlignedBoundingBox([0,0,c,u],o,d);const[f,p,b,y]=d;this.ctx.fillRect(f,p,b-f,y-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Ni.transform).recordDependencies(t,Ni.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Xt("Should not call beginInlineImage")}beginImageData(){Xt("Should not call beginImageData")}paintFormXObjectBegin(t,e,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Jt(this.ctx),s)){it.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[a,o,c,u]=s,d=new Path2D;d.rect(a,o,c-a,u-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,a,c,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;e.isolated||cc("TODO: Support non-isolated groups."),e.knockout&&bt("Knockout groups not supported.");const a=Jt(s);if(e.matrix&&s.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=Da.slice();it.axialAlignedBoundingBox(e.bbox,Jt(s),o);const c=[0,0,s.canvas.width,s.canvas.height];o=it.intersect(o,c)||[0,0,0,0];const u=Math.floor(o[0]),d=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),p=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,p]);let b="groupAt"+this.groupLevel;e.smask&&(b+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(b,f,p),A=y.context;A.translate(-u,-d),A.transform(...a);let w=new Path2D;const[S,C,E,x]=e.bbox;if(w.rect(S,C,E-S,x-C),e.matrix){const T=new Path2D;T.addPath(w,new DOMMatrix(e.matrix)),w=T}A.clip(w),e.smask&&this.smaskStack.push({canvas:y.canvas,context:A,offsetX:u,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,d),s.save()),kr(s,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Jt(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const c=Da.slice();it.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,c),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(t,e,s,a,o,c){if(this.#t(),Pl(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],d=s[3]-s[1];if(c&&this.annotationCanvasMap){a=a.slice(),a[4]-=s[0],a[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=d,it.singularValueDecompose2dScale(Jt(this.ctx),pi);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),b=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,b);const{canvas:y,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(e,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(pi[0],0,0,-pi[1],0,d*pi[1]),Pl(this.ctx)}else{Pl(this.ctx),this.endPath(t);const f=new Path2D;f.rect(s[0],s[1],u,d),this.ctx.clip(f)}}this.current=new yb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const s=e.count;e=this.getObject(t,e.data,e),e.count=s;const a=this.ctx,o=this._createMaskCanvas(t,e),c=o.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(c,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+c.width,o.offsetY,o.offsetY+c.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s,a=0,o=0,c,u){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const f=Jt(d);d.transform(s,a,o,c,0,0);const p=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let b=0,y=u.length;b<y;b+=2){const A=it.transform(f,[s,a,o,c,u[b],u[b+1]]);d.drawImage(p.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+p.canvas.width,A[5],A[5]+p.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx,a=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,Ni.transformAndFill);for(const c of e){const{data:u,width:d,height:f,transform:p}=c,b=this.cachedCanvases.getCanvas("maskCanvas",d,f),y=b.context;y.save();const A=this.getObject(t,u,c);Ab(y,A),y.globalCompositeOperation="source-in",y.fillStyle=o?a.getPattern(y,this,en(s),ke.FILL,t):a,y.fillRect(0,0,d,f),y.restore(),s.save(),s.transform(...p),s.scale(1,-1),zl(s,b.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,d,0,f),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const s=this.getObject(t,e);if(!s){bt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,e,s,a,o){if(!this.contentVisible)return;const c=this.getObject(t,e);if(!c){bt("Dependent image isn't ready yet");return}const u=c.width,d=c.height,f=[];for(let p=0,b=o.length;p<b;p+=2)f.push({transform:[s,0,0,a,o[p],o[p+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(t,c,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,a),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const s=e.width,a=e.height,o=this.ctx;this.save(t);const{filter:c}=o;c!=="none"&&c!==""&&(o.filter="none"),o.scale(1/s,-1/a);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const p=this.cachedCanvases.getCanvas("inlineImage",s,a).context;vb(p,e),u=this.applyTransferMapsToCanvas(p)}const d=this._scaleImage(u,en(o));o.imageSmoothingEnabled=Sb(Jt(o),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,s,-a,0).recordDependencies(t,Ni.imageXObject).recordOperation(t),zl(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,s,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,s){if(!this.contentVisible)return;const a=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const c=e.width,u=e.height,f=this.cachedCanvases.getCanvas("inlineImage",c,u).context;vb(f,e),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const c of s)a.save(),a.transform(...c.transform),a.scale(1,-1),zl(a,o,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Ni.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,s){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,s){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,s){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const o=this.ctx;this.pendingClip?(a||(this.pendingClip===wb?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Jt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:a,d:o}=this.ctx.getTransform();let c,u;if(s===0&&a===0){const d=Math.abs(e),f=Math.abs(o);if(d===f)if(t===0)c=u=1/d;else{const p=d*t;c=u=p<1?1/p:1}else if(t===0)c=1/d,u=1/f;else{const p=d*t,b=f*t;c=p<1?1/p:1,u=b<1?1/b:1}}else{const d=Math.abs(e*o-s*a),f=Math.hypot(e,s),p=Math.hypot(a,o);if(t===0)c=p/d,u=f/d;else{const b=t*d;c=p>b?p/b:1,u=f>b?f/b:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:s,current:{lineWidth:a}}=this,[o,c]=this.getScaleForStroking();if(o===c){s.lineWidth=(a||1)*o,s.stroke(t);return}const u=s.getLineDash();e&&s.save(),s.scale(o,c),Gh.a=1/o,Gh.d=1/c;const d=new Path2D;if(d.addPath(t,Gh),u.length>0){const f=Math.max(o,c);s.setLineDash(u.map(p=>p/f)),s.lineDashOffset/=f}s.lineWidth=a||1,s.stroke(d),e&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const h in Wr)Na.prototype[h]!==void 0&&(Na.prototype[Wr[h]]=Na.prototype[h]);class ka{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class dw{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Ca=Symbol("INTERNAL");class fw{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:e,intent:s,usage:a,rbGroups:o}){this.#t=!!(t&fi.DISPLAY),this.#e=!!(t&fi.PRINT),this.name=e,this.intent=s,this.usage=a,this.rbGroups=o}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,s=!1){t!==Ca&&Xt("Internal method `_setVisible` called."),this.#n=s,this.#i=e}}class gw{#t=null;#e=new Map;#n=null;#i=null;constructor(t,e=fi.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const s of t.groups)this.#e.set(s.id,new fw(e,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(Ca,!1);for(const s of t.on)this.#e.get(s)._setVisible(Ca,!0);for(const s of t.off)this.#e.get(s)._setVisible(Ca,!1);this.#n=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let a=1;a<e;a++){const o=t[a];let c;if(Array.isArray(o))c=this.#r(o);else if(this.#e.has(o))c=this.#e.get(o).visible;else return bt(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return cc("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(bt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return bt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return bt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return bt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return bt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return bt(`Unknown optional content policy ${t.policy}.`),!0}return bt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){const a=this.#e.get(t);if(!a){bt(`Optional content group not found: ${t}`);return}if(s&&e&&a.rbGroups.length)for(const o of a.rbGroups)for(const c of o)c!==t&&this.#e.get(c)?._setVisible(Ca,!1,!0);a._setVisible(Ca,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let s;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":s=a;continue}const o=this.#e.get(a);if(o)switch(s){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!o.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new fy;for(const[e,s]of this.#e)t.update(`${e}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class pw{constructor(t,{disableRange:e=!1,disableStream:s=!1}){Lt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:c,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(s),!0)});Lt(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Lt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new mw(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new bw(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class mw{constructor(t,e,s=!1,a=null){this._stream=t,this._done=s||!1,this._filename=Ad(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class bw{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function yw(h){let t=!0,e=s("filename\\*","i").exec(h);if(e){e=e[1];let p=u(e);return p=unescape(p),p=d(p),p=f(p),o(p)}if(e=c(h),e){const p=f(e);return o(p)}if(e=s("filename","i").exec(h),e){e=e[1];let p=u(e);return p=f(p),o(p)}function s(p,b){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function a(p,b){if(p){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const y=new TextDecoder(p,{fatal:!0}),A=ao(b);b=y.decode(A),t=!1}catch{}}return b}function o(p){return t&&/[\x80-\xff]/.test(p)&&(p=a("utf-8",p),t&&(p=a("iso-8859-1",p))),p}function c(p){const b=[];let y;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=A.exec(p))!==null;){let[,S,C,E]=y;if(S=parseInt(S,10),S in b){if(S===0)break;continue}b[S]=[C,E]}const w=[];for(let S=0;S<b.length&&S in b;++S){let[C,E]=b[S];E=u(E),C&&(E=unescape(E),S===0&&(E=d(E))),w.push(E)}return w.join("")}function u(p){if(p.startsWith('"')){const b=p.slice(1).split('\\"');for(let y=0;y<b.length;++y){const A=b[y].indexOf('"');A!==-1&&(b[y]=b[y].slice(0,A),b.length=y+1),b[y]=b[y].replaceAll(/\\(.)/g,"$1")}p=b.join('"')}return p}function d(p){const b=p.indexOf("'");if(b===-1)return p;const y=p.slice(0,b),w=p.slice(b+1).replace(/^[^']*'/,"");return a(y,w)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,y,A,w){if(A==="q"||A==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,C){return String.fromCharCode(parseInt(C,16))}),a(y,w);try{w=atob(w)}catch{}return a(y,w)})}return""}function Ay(h,t){const e=new Headers;if(!h||!t||typeof t!="object")return e;for(const s in t){const a=t[s];a!==void 0&&e.append(s,a)}return e}function dc(h){return URL.parse(h)?.origin??null}function Sy({responseHeaders:h,isHttp:t,rangeChunkSize:e,disableRange:s}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(h.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*e)||s||!t||h.get("Accept-Ranges")!=="bytes"||(h.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function wy(h){const t=h.get("Content-Disposition");if(t){let e=yw(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Ad(e))return e}return null}function uo(h,t){return new Ql(`Unexpected server response (${h}) while retrieving PDF "${t}".`,h,h===404||h===0&&t.startsWith("file:"))}function Ey(h){return h===200||h===206}function _y(h,t,e){return{method:"GET",headers:h,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Cy(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(bt(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class vw{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Ay(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Lt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Aw(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new Sw(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Aw{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),a=e.url;fetch(a,_y(s,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=dc(o.url),!Ey(o.status))throw uo(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const c=o.headers,{allowRangeRequests:u,suggestedLength:d}=Sy({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=wy(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new rs("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Cy(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class Sw{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${s-1}`);const c=a.url;fetch(c,_y(o,this._withCredentials,this._abortController)).then(u=>{const d=dc(u.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!Ey(u.status))throw uo(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Cy(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const qh=200,Vh=206;function ww(h){const t=h.response;return typeof t!="string"?t:ao(t).buffer}class Ew{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Ay(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,a=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,c]of this.headers)e.setRequestHeader(o,c);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=Vh):a.expectedStatus=qh,e.responseType="arraybuffer",Lt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){const s=this.pendingRequests[t];s&&s.onProgress?.(e)}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const a=s.xhr;if(a.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){s.onError(a.status);return}const o=a.status||qh;if(!(o===qh&&s.expectedStatus===Vh)&&o!==s.expectedStatus){s.onError(a.status);return}const u=ww(a);if(o===Vh){const d=a.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?s.onDone({begin:parseInt(f[1],10),chunk:u}):(bt('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class _w{constructor(t){this._source=t,this._manager=new Ew(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Lt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Cw(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new Tw(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Cw{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=dc(e.responseURL);const s=e.getAllResponseHeaders(),a=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[d,...f]=u.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:c}=Sy({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=wy(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=uo(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Tw{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=dc(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=uo(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const xw=/^[a-z][a-z0-9\-+.]+:/i;function Dw(h){if(xw.test(h))return new URL(h);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(h))}class Mw{constructor(t){this.source=t,this.url=Dw(t.url),Lt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Lt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Rw(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new Ow(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Rw{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=uo(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new rs("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Ow{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Br=Symbol("INITIAL_DATA");class Ty{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Br}}get(t,e=null){if(e){const a=this.#e(t);return a.promise.then(()=>e(a.data)),null}const s=this.#t[t];if(!s||s.data===Br)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=this.#t[t];return!!e&&e.data!==Br}delete(t){const e=this.#t[t];return!e||e.data===Br?!1:(delete this.#t[t],!0)}resolve(t,e=null){const s=this.#e(t);s.data=e,s.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Br&&(yield[t,e])}}}const Lw=1e5,Eb=30;class gi{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#a=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#p=null;#u=[];#g=new WeakMap;#b=null;static#v=new Map;static#y=new Map;static#C=new WeakMap;static#E=null;static#S=new Set;constructor({textContentSource:t,container:e,viewport:s}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=s.scale*rn.pixelRatio,this.#d=s.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:o,pageX:c,pageY:u}=s.rawDims;this.#b=[1,0,0,-1,-c,u+o],this.#o=a,this.#s=o,gi.#M(),e.style.setProperty("--min-font-size",gi.#E),Ls(e,s),this.#t.promise.finally(()=>{gi.#S.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Ae.platform;return yt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:s})=>{if(s){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#x(e.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),gi.#S.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const s=t.scale*rn.pixelRatio,a=t.rotation;if(a!==this.#d&&(e?.(),this.#d=a,Ls(this.#l,{rotation:a})),s!==this.#h){e?.(),this.#h=s;const o={div:null,properties:null,ctx:gi.#R(this.#r)};for(const c of this.#u)o.properties=this.#g.get(c),o.div=c,this.#_(o)}}cancel(){const t=new rs("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#x(t){if(this.#n)return;this.#a.ctx??=gi.#R(this.#r);const e=this.#u,s=this.#m;for(const a of t){if(e.length>Lw){bt("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),o.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(a.str),this.#A(a)}}#A(t){const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const a=it.transform(this.#b,t.transform);let o=Math.atan2(a[1],a[0]);const c=this.#f[t.fontName];c.vertical&&(o+=Math.PI/2);let u=this.#i&&c.fontSubstitution||c.fontFamily;u=gi.fontFamilyMap.get(u)||u;const d=Math.hypot(a[2],a[3]),f=d*gi.#P(u,c,this.#r);let p,b;o===0?(p=a[4],b=a[5]-f):(p=a[4]+f*Math.sin(o),b=a[5]-f*Math.cos(o));const y=e.style;y.left=`${(100*p/this.#o).toFixed(2)}%`,y.top=`${(100*b/this.#s).toFixed(2)}%`,y.setProperty("--font-height",`${d.toFixed(2)}px`),y.fontFamily=u,s.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);w!==S&&Math.max(w,S)/Math.min(w,S)>1.5&&(A=!0)}if(A&&(s.canvasWidth=c.vertical?t.height:t.width),this.#g.set(e,s),this.#a.div=e,this.#a.properties=s,this.#_(this.#a),s.hasText&&this.#e.append(e),s.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#e.append(w)}}#_(t){const{div:e,properties:s,ctx:a}=t,{style:o}=e;if(s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=o,{canvasWidth:u,fontSize:d}=s;gi.#D(a,d*this.#h,c);const{width:f}=a.measureText(e.textContent);f>0&&o.setProperty("--scale-x",u*this.#h/f)}s.angle!==0&&o.setProperty("--rotate",`${s.angle}deg`)}static cleanup(){if(!(this.#S.size>0)){this.#v.clear();for(const{canvas:t}of this.#y.values())t.remove();this.#y.clear()}}static#R(t=null){let e=this.#y.get(t||="");if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(t,e),this.#C.set(e,{size:0,family:""})}return e}static#D(t,e,s){const a=this.#C.get(t);e===a.size&&s===a.family||(t.font=`${e}px ${s}`,a.size=e,a.family=s)}static#M(){if(this.#E!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#E=t.getBoundingClientRect().height,t.remove()}static#P(t,e,s){const a=this.#v.get(t);if(a)return a;const o=this.#R(s);o.canvas.width=o.canvas.height=Eb,this.#D(o,Eb,t);const c=o.measureText(""),u=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+d):(Ae.platform.isFirefox&&bt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#v.set(t,f),f}}const Nw=100;function xy(h={}){typeof h=="string"||h instanceof URL?h={url:h}:(h instanceof ArrayBuffer||ArrayBuffer.isView(h))&&(h={data:h});const t=new xd,{docId:e}=t,s=h.url?I1(h.url):null,a=h.data?H1(h.data):null,o=h.httpHeaders||null,c=h.withCredentials===!0,u=h.password??null,d=h.range instanceof Dy?h.range:null,f=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:2**16;let p=h.worker instanceof Jr?h.worker:null;const b=h.verbosity,y=typeof h.docBaseUrl=="string"&&!uc(h.docBaseUrl)?h.docBaseUrl:null,A=Ll(h.cMapUrl),w=h.cMapPacked!==!1,S=h.CMapReaderFactory||(He?$1:cb),C=Ll(h.iccUrl),E=Ll(h.standardFontDataUrl),x=h.StandardFontDataFactory||(He?Q1:ub),T=Ll(h.wasmUrl),O=h.WasmFactory||(He?W1:hb),R=h.stopAtErrors!==!0,L=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,k=h.isEvalSupported!==!1,q=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!He,X=typeof h.isImageDecoderSupported=="boolean"?h.isImageDecoderSupported:!He&&(Ae.platform.isFirefox||!globalThis.chrome),Z=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,Q=typeof h.disableFontFace=="boolean"?h.disableFontFace:He,at=h.fontExtraProperties===!0,pt=h.enableXfa===!0,lt=h.ownerDocument||globalThis.document,St=h.disableRange===!0,B=h.disableStream===!0,P=h.disableAutoFetch===!0,W=h.pdfBug===!0,tt=h.CanvasFactory||(He?K1:V1),ft=h.FilterFactory||(He?Y1:X1),D=h.enableHWA===!0,F=h.useWasm!==!1,K=d?d.length:h.length??NaN,J=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!He&&!Q,ct=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:!!(S===cb&&x===ub&&O===hb&&A&&E&&T&&Ir(A,document.baseURI)&&Ir(E,document.baseURI)&&Ir(T,document.baseURI)),ot=null;f1(b);const ut={canvasFactory:new tt({ownerDocument:lt,enableHWA:D}),filterFactory:new ft({docId:e,ownerDocument:lt}),cMapReaderFactory:ct?null:new S({baseUrl:A,isCompressed:w}),standardFontDataFactory:ct?null:new x({baseUrl:E}),wasmFactory:ct?null:new O({baseUrl:T})};p||(p=Jr.create({verbosity:b,port:ka.workerPort}),t._worker=p);const Ft={docId:e,apiVersion:"5.4.530",data:a,password:u,disableAutoFetch:P,rangeChunkSize:f,length:K,docBaseUrl:y,enableXfa:pt,evaluatorOptions:{maxImageSize:L,disableFontFace:Q,ignoreErrors:R,isEvalSupported:k,isOffscreenCanvasSupported:q,isImageDecoderSupported:X,canvasMaxAreaInBytes:Z,fontExtraProperties:at,useSystemFonts:J,useWasm:F,useWorkerFetch:ct,cMapUrl:A,iccUrl:C,standardFontDataUrl:E,wasmUrl:T}},Et={ownerDocument:lt,pdfBug:W,styleElement:ot,loadingParams:{disableAutoFetch:P,enableXfa:pt}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Tt=p.messageHandler.sendWithPromise("GetDocRequest",Ft,a?[a.buffer]:null);let Ve;if(d)Ve=new pw(d,{disableRange:St,disableStream:B});else if(!a){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Se=Ir(s)?vw:He?Mw:_w;Ve=new Se({url:s,length:K,httpHeaders:o,withCredentials:c,rangeChunkSize:f,disableRange:St,disableStream:B})}return Tt.then(Se=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const mi=new Hr(e,Se,p.port),pe=new zw(mi,t,Ve,Et,ut,D);t._transport=pe,mi.send("Ready",null)})}).catch(t._capability.reject),t}class xd{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${xd.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class Dy{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#r=[];constructor(t,e,s=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=a}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const s of this.#r)s(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const s of this.#i)s(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#n)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Xt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class kw{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return yt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Bw{#t=!1;constructor(t,e,s,a=!1){this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=a?new ib:null,this._pdfBug=a,this.commonObjs=s.commonObjs,this.objs=new Ty,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}={}){return new oo({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return yt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:s,intent:a="display",annotationMode:o=ns.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:b=null,isEditing:y=!1,recordOperations:A=!1,operationsFilter:w=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(a,o,b,y),{renderingIntent:C,cacheKey:E}=S;this.#t=!1,d||=this._transport.getOptionalContentConfig(C);let x=this._intentStates.get(E);x||(x=Object.create(null),this._intentStates.set(E,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const T=!!(C&fi.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const O=!!(this._pdfBug&&globalThis.StepperManager?.enabled),R=!this.recordedBBoxes&&(A||O),L=X=>{if(x.renderTasks.delete(k),R){const Z=k.gfx?.dependencyTracker.take();Z&&(k.stepper&&k.stepper.setOperatorBBoxes(Z,k.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=Z))}T&&(this.#t=!0),this.#e(),X?(k.capability.reject(X),this._abortOperatorList({intentState:x,reason:X instanceof Error?X:new Error(X)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new Ma({callback:L,params:{canvas:e,canvasContext:t,dependencyTracker:R?new J1(e,x.operatorList.length,O):null,viewport:s,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:w});(x.renderTasks||=new Set).add(k);const q=k.task;return Promise.all([x.displayReadyCapability.promise,d]).then(([X,Z])=>{if(this.destroyed){L();return}if(this._stats?.time("Rendering"),!(Z.renderingIntent&C))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:X,optionalContentConfig:Z}),k.operatorListChanged()}).catch(L),q}getOperatorList({intent:t="display",annotationMode:e=ns.ENABLE,printAnnotationStorage:s=null,isEditing:a=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const c=this._transport.getRenderingIntent(t,e,s,a,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Zr.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,a){function o(){c.read().then(function({value:d,done:f}){if(f){s(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},a)}const c=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new ib),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const s=this._intentStates.get(e);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let s=0,a=t.length;s<a;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:a}){const{map:o,transfer:c}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:a},c).getReader(),f=this._intentStates.get(e);f.streamReader=d;const p=()=>{d.read().then(({value:b,done:y})=>{if(y){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(b,f),p())},b=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const y of f.renderTasks)y.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(b);else if(f.opListReadCapability)f.opListReadCapability.reject(b);else throw b}})};p()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof vd){let a=Nw;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new rs(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var ss,Gi,Rn,Ms,Jl,Rs,Os,Ge,jl,My,Ry,jr,Ba,Gl;const Wt=class Wt{constructor({name:t=null,port:e=null,verbosity:s=g1()}={}){Ji(this,Ge);Ji(this,ss,Promise.withResolvers());Ji(this,Gi,null);Ji(this,Rn,null);Ji(this,Ms,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,e){if(Qt(Wt,Os).has(e))throw new Error("Cannot use more than one PDFWorker per port.");Qt(Wt,Os).set(e,this),tn(this,Ge,My).call(this,e)}else tn(this,Ge,Ry).call(this)}get promise(){return Qt(this,ss).promise}get port(){return Qt(this,Rn)}get messageHandler(){return Qt(this,Gi)}destroy(){this.destroyed=!0,Qt(this,Ms)?.terminate(),ii(this,Ms,null),Qt(Wt,Os).delete(Qt(this,Rn)),ii(this,Rn,null),Qt(this,Gi)?.destroy(),ii(this,Gi,null)}static create(t){const e=Qt(this,Os).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Wt(t)}static get workerSrc(){if(ka.workerSrc)return ka.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return yt(this,"_setupFakeWorkerGlobal",(async()=>Qt(this,Ba,Gl)?Qt(this,Ba,Gl):(await import(this.workerSrc)).WorkerMessageHandler)())}};ss=new WeakMap,Gi=new WeakMap,Rn=new WeakMap,Ms=new WeakMap,Jl=new WeakMap,Rs=new WeakMap,Os=new WeakMap,Ge=new WeakSet,jl=function(){Qt(this,ss).resolve(),Qt(this,Gi).send("configure",{verbosity:this.verbosity})},My=function(t){ii(this,Rn,t),ii(this,Gi,new Hr("main","worker",t)),Qt(this,Gi).on("ready",()=>{}),tn(this,Ge,jl).call(this)},Ry=function(){if(Qt(Wt,Rs)||Qt(Wt,Ba,Gl)){tn(this,Ge,jr).call(this);return}let{workerSrc:t}=Wt;try{Wt._isSameOrigin(window.location,t)||(t=Wt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new Hr("main","worker",e),a=()=>{o.abort(),s.destroy(),e.terminate(),this.destroyed?Qt(this,ss).reject(new Error("Worker was destroyed")):tn(this,Ge,jr).call(this)},o=new AbortController;e.addEventListener("error",()=>{Qt(this,Ms)||a()},{signal:o.signal}),s.on("test",u=>{if(o.abort(),this.destroyed||!u){a();return}ii(this,Gi,s),ii(this,Rn,e),ii(this,Ms,e),tn(this,Ge,jl).call(this)}),s.on("ready",u=>{if(o.abort(),this.destroyed){a();return}try{c()}catch{tn(this,Ge,jr).call(this)}});const c=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};c();return}catch{cc("The worker has been disabled.")}tn(this,Ge,jr).call(this)},jr=function(){Qt(Wt,Rs)||(bt("Setting up fake worker."),ii(Wt,Rs,!0)),Wt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Qt(this,ss).reject(new Error("Worker was destroyed"));return}const e=new q1;ii(this,Rn,e);const s=`fake${Tm(Wt,Jl)._++}`,a=new Hr(s+"_worker",s,e);t.setup(a,e),ii(this,Gi,new Hr(s,s+"_worker",e)),tn(this,Ge,jl).call(this)}).catch(t=>{Qt(this,ss).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Ba=new WeakSet,Gl=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Ji(Wt,Ba),Ji(Wt,Jl,0),Ji(Wt,Rs,!1),Ji(Wt,Os,new WeakMap),He&&(ii(Wt,Rs,!0),ka.workerSrc||="./pdf.worker.mjs"),Wt._isSameOrigin=(t,e)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const a=new URL(e,s);return s.origin===a.origin},Wt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Wt.fromPort=t=>{if(T1("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Wt.create(t)};let Jr=Wt;class zw{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#r=null;constructor(t,e,s,a,o,c){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Ty,this.fontLoader=new P1({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=c,this.setupMessageHandler()}#a(t,e=null){const s=this.#t.get(t);if(s)return s;const a=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,a),a}get annotationStorage(){return yt(this,"annotationStorage",new Ed)}getRenderingIntent(t,e=ns.ENABLE,s=null,a=!1,o=!1){let c=fi.DISPLAY,u=id;switch(t){case"any":c=fi.ANY;break;case"display":break;case"print":c=fi.PRINT;break;default:bt(`getRenderingIntent - invalid intent: ${t}`)}const d=c&fi.PRINT&&s instanceof gy?s:this.annotationStorage;switch(e){case ns.DISABLE:c+=fi.ANNOTATIONS_DISABLE;break;case ns.ENABLE:break;case ns.ENABLE_FORMS:c+=fi.ANNOTATIONS_FORMS;break;case ns.ENABLE_STORAGE:c+=fi.ANNOTATIONS_STORAGE,u=d.serializable;break;default:bt(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(c+=fi.IS_EDITING),o&&(c+=fi.OPLIST);const{ids:f,hash:p}=d.modifiedIds,b=[c,u.hash,p];return{renderingIntent:c,cacheKey:b.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),gi.cleanup(),this._networkStream?.cancelAllRequests(new rs("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,a)=>{Lt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){a.close();return}Lt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:c}=this._fullReader;return(!a||!o)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{e.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:c}}),t.on("GetRangeReader",(s,a)=>{Lt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){a.close();return}Lt(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{a.error(c)})},a.onCancel=c=>{o.cancel(c),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new kw(s,this))}),t.on("DocException",s=>{e._capability.reject(ni(s))}),t.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw ni(s);const a=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};e.onPassword(a,s.code)}catch(a){this.#r.reject(a)}return this.#r.promise}),t.on("DataLoaded",s=>{e.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,a,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(a){case"Font":if("error"in o){const b=o.error;bt(`Error during font loading: ${b}`),this.commonObjs.resolve(s,b);break}const c=new qt(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(b,y)=>globalThis.FontInspector.fontAdded(b,y):null,d=new F1(c,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:f}=o;Lt(f,"The imageRef must be defined.");for(const b of this.#e.values())for(const[,y]of b.objs)if(y?.ref===f)return y.dataLen?(this.commonObjs.resolve(s,structuredClone(y)),y.dataLen):null;break;case"FontPath":this.commonObjs.resolve(s,new U1(o));break;case"Image":this.commonObjs.resolve(s,o);break;case"Pattern":const p=new Ce(o);this.commonObjs.resolve(s,p.getIR());break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([s,a,o,c])=>{if(this.destroyed)return;const u=this.#e.get(a);if(!u.objs.has(s)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(s,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||e.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[s.type];if(!a)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&bt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=this.#n.get(e);if(s)return s;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#i.set(o.refStr,t);const c=new Bw(e,o,this,this._params.pdfBug);return this.#e.set(e,c),c});return this.#n.set(e,a),a}getPageIndex(t){return nd(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#a("GetOptionalContentConfig").then(e=>new gw(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new dw(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:a[2]}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),gi.cleanup()}}cachedPageNumber(t){if(!nd(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(e)??null}}class Pw{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class Ma{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:s,commonObjs:a,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:b=!1,pageColors:y=null,enableHWA:A=!1,operationsFilter:w=null}){this.callback=t,this.params=e,this.objs=s,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=b,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Pw(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=A,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(Ma.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Ma.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:a,background:o,dependencyTracker:c}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Na(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:a,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Ma.#e.delete(this._canvas),t||=new vd(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Ma.#e.delete(this._canvas),this.callback())))}}const Fw="5.4.530",Uw="50cc4adac";class ki{#t=null;#e=null;#n;#i=null;#r=!1;#a=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return yt(this,"_keyboardManager",new co([[["Escape","mac+Escape"],ki.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ki.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ki.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ki.prototype._moveToPrevious],[["Home","mac+Home"],ki.prototype._moveToBeginning],[["End","mac+End"],ki.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#a=!1,this.#s=t):this.#a=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#n=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",ki.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#p.bind(this),{signal:e}),t.addEventListener("keydown",this.#m.bind(this),{signal:e});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#n,t.append(s),t}renderMainDropdown(){const t=this.#i=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",zi,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[s,a]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=s,o.setAttribute("data-l10n-id",ki.#d[s]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=a,o.ariaSelected=a===this.#n,o.addEventListener("click",this.#f.bind(this,a),{signal:e}),t.append(o)}return t.addEventListener("keydown",this.#m.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Ot.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#g){this.#p(t);return}if(t.target===this.#t){this.#i.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstElementChild||t.target===this.#t){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#g){this.#p(t);return}this.#i.firstElementChild?.focus()}_moveToEnd(t){if(!this.#g){this.#p(t);return}this.#i.lastElementChild?.focus()}#m(t){ki._keyboardManager.exec(this,t)}#p(t){if(this.#g){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const e=this.#i=this.#h();this.#t.append(e)}#u(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#g(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#g){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const e=this.#l.highlightColors.values();for(const s of this.#i.children)s.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class to{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,to.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,color:s}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=s||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",to.#i[t]),a.addEventListener("input",()=>{this.#n.updateParams(e,a.value)},{signal:this.#n._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function _b(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function zr(h){return Math.max(0,Math.min(255,255*h))}class Cb{static CMYK_G([t,e,s,a]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=zr(t),[t,t,t]}static G_HTML([t]){const e=_b(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(zr)}static RGB_HTML(t){return`#${t.map(_b).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,s+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,s,a]){return[zr(1-Math.min(1,t+a)),zr(1-Math.min(1,s+a)),zr(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const a=1-t,o=1-e,c=1-s,u=Math.min(a,o,c);return["CMYK",a,o,c,u]}}class Iw{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),s||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Xt("Abstract method `_createSVG` called.")}}class Zl extends Iw{_createSVG(t){return document.createElementNS(Dn,t)}}const Hw=9,Ns=new WeakSet,jw=new Date().getTimezoneOffset()*60*1e3;class Xh{static create(t){switch(t.data.annotationType){case ge.LINK:return new Dd(t);case ge.TEXT:return new qw(t);case ge.WIDGET:switch(t.data.fieldType){case"Tx":return new Vw(t);case"Btn":return t.data.radioButton?new Oy(t):t.data.checkBox?new Yw(t):new Kw(t);case"Ch":return new $w(t);case"Sig":return new Xw(t)}return new Bs(t);case ge.POPUP:return new rd(t);case ge.FREETEXT:return new Ly(t);case ge.LINE:return new Ww(t);case ge.SQUARE:return new Zw(t);case ge.CIRCLE:return new Jw(t);case ge.POLYLINE:return new Ny(t);case ge.CARET:return new eE(t);case ge.INK:return new Md(t);case ge.POLYGON:return new tE(t);case ge.HIGHLIGHT:return new ky(t);case ge.UNDERLINE:return new iE(t);case ge.SQUIGGLY:return new nE(t);case ge.STRIKEOUT:return new sE(t);case ge.STAMP:return new By(t);case ge.FILEATTACHMENT:return new aE(t);default:return new te(t)}}}class te{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(s)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return te._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:s,rect:a}=this.data;let o=-1/0,c=-1/0;if(e?.length>=8){for(let u=0;u<e.length;u+=8)e[u+1]>c?(c=e[u+1],o=e[u+2]):e[u+1]===c&&(o=Math.max(o,e[u+2]));return[o,c]}if(s?.length>=1){for(const u of s)for(let d=0,f=u.length;d<f;d+=2)u[d+1]>c?(c=u[d+1],o=u[d]):u[d+1]===c&&(o=Math.max(o,u[d]));if(o!==1/0)return[o,c]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:c}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/s,t[1]=100*(t[1]-c)/a,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Qr}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:s})||this.annotationStorage.setValue(`${Qr}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:s}=t;e&&this.#i(e);let a=this.#n?.popup||this.popup;!a&&s?.text&&(this._createPopup(s),a=this.#n.popup),a&&(a.updateEdited(t),s?.deleted&&(a.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:e},data:{rect:s,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:d}}}}=this;s?.splice(0,4,...t),e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(c-t[3]+d)/c}%`,a===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(a)}_createContainer(t){const{data:e,parent:{page:s,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof Bs)&&!(this instanceof Dd)&&(o.tabIndex=0);const{style:c}=o;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof rd){const{rotation:S}=e;return!e.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:d}=this;if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const S=e.borderStyle.horizontalCornerRadius,C=e.borderStyle.verticalCornerRadius;if(S>0||C>0){const x=`calc(${S}px * var(--total-scale-factor)) / calc(${C}px * var(--total-scale-factor))`;c.borderRadius=x}else if(this instanceof Oy){const x=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;c.borderRadius=x}switch(e.borderStyle.style){case _a.SOLID:c.borderStyle="solid";break;case _a.DASHED:c.borderStyle="dashed";break;case _a.BEVELED:bt("Unimplemented border style: beveled");break;case _a.INSET:bt("Unimplemented border style: inset");break;case _a.UNDERLINE:c.borderBottomStyle="solid";break}const E=e.borderColor||null;E?(this.#e=!0,c.borderColor=it.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):c.borderWidth=0}const f=it.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:p,pageHeight:b,pageX:y,pageY:A}=a.rawDims;c.left=`${100*(f[0]-y)/p}%`,c.top=`${100*(f[1]-A)/b}%`;const{rotation:w}=e;return e.hasOwnCanvas||w===0?(c.width=`${100*u/p}%`,c.height=`${100*d/b}%`):this.setRotation(w,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:c}=this;t%180!==0&&([o,c]=[c,o]),e.style.width=`${100*o/s}%`,e.style.height=`${100*c/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,a)=>{const o=a.detail[e],c=o[0],u=o.slice(1);a.target.style[s]=Cb[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:Cb[`${c}_rgb`](u)})};return yt(this,"_commonActions",{display:e=>{const{display:s}=e.detail,a=s%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const a of Object.keys(e.detail))(t[a]||s[a])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[a,o]of Object.entries(e)){const c=s[a];if(c){const u={detail:{[a]:o},target:t};c(u),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,a,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,C,E,x]=t.subarray(2,6);if(a===S&&o===C&&e===E&&s===x)return}const{style:c}=this.container;let u;if(this.#e){const{borderColor:S,borderWidth:C}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const d=a-e,f=o-s,{svgFactory:p}=this,b=p.createElement("svg");b.classList.add("quadrilateralsContainer"),b.setAttribute("width",0),b.setAttribute("height",0),b.role="none";const y=p.createElement("defs");b.append(y);const A=p.createElement("clipPath"),w=`clippath_${this.data.id}`;A.setAttribute("id",w),A.setAttribute("clipPathUnits","objectBoundingBox"),y.append(A);for(let S=2,C=t.length;S<C;S+=8){const E=t[S],x=t[S+1],T=t[S+2],O=t[S+3],R=p.createElement("rect"),L=(T-e)/d,k=(o-x)/f,q=(E-T)/d,X=(x-O)/f;R.setAttribute("x",L),R.setAttribute("y",k),R.setAttribute("width",q),R.setAttribute("height",X),A.append(R),u?.push(`<rect vector-effect="non-scaling-stroke" x="${L}" y="${k}" width="${q}" height="${X}"/>`)}this.#e&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(b),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:e}=this;let s,a;t?(s={str:t.text},a=t.date):(s=e.contentsObj,a=e.modificationDate),this.#n=new rd({data:{color:e.color,titleObj:e.titleObj,modificationDate:a,contentsObj:s,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){Xt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:c,exportValues:u}of a){if(o===-1||c===e)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!Ns.has(f)){bt(`_getElementsByName - element not allowed: ${c}`);continue}s.push({id:c,exportValue:d,domElement:f})}return s}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,c=a.getAttribute("data-element-id");c!==e&&Ns.has(a)&&s.push({id:c,exportValue:o,domElement:a})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class Gw extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class Dd extends te{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let a=!1;return t.url?(e.addLinkAttributes(s,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#n(s,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),a=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(s,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&(this.contentElement=s,this.container.append(s)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,s=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,e,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),s&&(t.title=s),this.#t()}#e(t,e,s="",a=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,a),!1),this.#t()}#n(t,e,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const o=s.get(a);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){bt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:a,refs:o,include:c}=e,u=[];if(a.length!==0||o.length!==0){const p=new Set(o);for(const b of a){const y=this._fieldObjects[b]||[];for(const{id:A}of y)p.add(A)}for(const b of Object.values(this._fieldObjects))for(const y of b)p.has(y.id)===c&&u.push(y)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const d=this.annotationStorage,f=[];for(const p of u){const{id:b}=p;switch(f.push(b),p.type){case"text":{const A=p.defaultValue||"";d.setValue(b,{value:A});break}case"checkbox":case"radiobutton":{const A=p.defaultValue===p.exportValues;d.setValue(b,{value:A});break}case"combobox":case"listbox":{const A=p.defaultValue||"";d.setValue(b,{value:A});break}default:continue}const y=document.querySelector(`[data-element-id="${b}"]`);if(y){if(!Ns.has(y)){bt(`_bindResetFormAction - element not allowed: ${b}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class qw extends te{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class Bs extends te{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ae.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,a,o){s.includes("mouse")?t.addEventListener(s,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(s,c=>{if(s==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c)}})})}_setEventListeners(t,e,s,a){for(const[o,c]of s)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,o,c,a),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":it.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||Hw,o=t.style;let c;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/(Fh*a))||1,b=f/p;c=Math.min(a,d(b/Fh))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(a,d(f/Fh))}o.fontSize=`calc(${c}px * var(--total-scale-factor))`,o.color=it.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Vw extends Bs{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,a){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=s),o.setValue(c.id,{[a]:s})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let o=a.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=a.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Ns.add(s),this.contentElement=s,s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:b}=this.data,y=!!p&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(s,"value",w.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",w=>{const S=this.data.defaultFieldValue??"";s.value=d.userValue=S,d.formattedValue=null});let A=w=>{const{formattedValue:S}=d;S!=null&&(w.target.value=S),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{if(d.focused)return;const{target:C}=S;if(y&&(C.type=p,b&&(C.step=b)),d.userValue){const E=d.userValue;if(y)if(p==="time"){const x=new Date(E),T=[x.getHours(),x.getMinutes(),x.getSeconds()];C.value=T.map(O=>O.toString().padStart(2,"0")).join(":")}else C.value=new Date(E-jw).toISOString().split(p==="date"?"T":".",1)[0];else C.value=E}d.lastCommittedValue=C.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const C={value(E){d.userValue=E.detail.value??"",y||t.setValue(e,{value:d.userValue.toString()}),E.target.value=d.userValue},formattedValue(E){const{formattedValue:x}=E.detail;d.formattedValue=x,x!=null&&E.target!==document.activeElement&&(E.target.value=x);const T={formattedValue:x};y&&(T.value=x),t.setValue(e,T)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:x}=E.detail,{target:T}=E;if(x===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",x);let O=d.userValue;!O||O.length<=x||(O=O.slice(0,x),T.value=d.userValue=O,t.setValue(e,{value:O}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:O,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(C,S)}),s.addEventListener("keydown",S=>{d.commitKey=1;let C=-1;if(S.key==="Escape"?C=0:S.key==="Enter"&&!this.data.multiLine?C=2:S.key==="Tab"&&(d.commitKey=3),C===-1)return;const{value:E}=S.target;d.lastCommittedValue!==E&&(d.lastCommittedValue=E,d.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:C,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const w=A;A=null,s.addEventListener("blur",S=>{if(!d.focused||!S.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:C}=S;let{value:E}=C;if(y){if(E&&p==="time"){const x=E.split(":").map(T=>parseInt(T,10));E=new Date(2e3,0,1,x[0],x[1],x[2]||0).valueOf(),C.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();C.type="text"}d.userValue=E,d.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:d.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),w(S)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",S=>{d.lastCommittedValue=null;const{data:C,target:E}=S,{value:x,selectionStart:T,selectionEnd:O}=E;let R=T,L=O;switch(S.inputType){case"deleteWordBackward":{const k=x.substring(0,T).match(/\w*[^\w]*$/);k&&(R-=k[0].length);break}case"deleteWordForward":{const k=x.substring(T).match(/^[^\w]*\w*/);k&&(L+=k[0].length);break}case"deleteContentBackward":T===O&&(R-=1);break;case"deleteContentForward":T===O&&(L+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,change:C||"",willCommit:!1,selStart:R,selEnd:L}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(A&&s.addEventListener("blur",A),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Xw extends Bs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Yw extends Bs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let a=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(s,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Ns.add(o),o.setAttribute("data-element-id",s),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,s)){const p=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(s,{value:d})}),o.addEventListener("resetform",c=>{const u=e.defaultFieldValue||"Off";c.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Oy extends Bs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let a=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(s,{value:a})),a)for(const c of this._getElementsByName(e.fieldName,s))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(Ns.add(o),o.setAttribute("data-element-id",s),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,s))t.setValue(f.id,{value:!1});t.setValue(s,{value:d})}),o.addEventListener("resetform",c=>{const u=e.defaultFieldValue;c.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const p=c===f.detail.value;for(const b of this._getElementsByName(f.target.name)){const y=p&&b.id===s;b.domElement&&(b.domElement.checked=y),t.setValue(b.id,{value:y})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Kw extends Dd{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class $w extends Bs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");Ns.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",p=>{const b=this.data.defaultFieldValue;for(const y of a.options)y.selected=y.value===b});for(const p of this.data.options){const b=document.createElement("option");b.textContent=p.displayValue,b.value=p.exportValue,s.value.includes(p.exportValue)&&(b.setAttribute("selected",!0),o=!1),a.append(b)}let c=null;if(o){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),a.prepend(p),c=()=>{p.remove(),a.removeEventListener("input",c),c=null},a.addEventListener("input",c)}const u=p=>{const b=p?"value":"textContent",{options:y,multiple:A}=a;return A?Array.prototype.filter.call(y,w=>w.selected).map(w=>w[b]):y.selectedIndex===-1?null:y[y.selectedIndex][b]};let d=u(!1);const f=p=>{const b=p.target.options;return Array.prototype.map.call(b,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",p=>{const b={value(y){c?.();const A=y.detail.value,w=new Set(Array.isArray(A)?A:[A]);for(const S of a.options)S.selected=w.has(S.value);t.setValue(e,{value:u(!0)}),d=u(!1)},multipleSelection(y){a.multiple=!0},remove(y){const A=a.options,w=y.detail.remove;A[w].selected=!1,a.remove(w),A.length>0&&Array.prototype.findIndex.call(A,C=>C.selected)===-1&&(A[0].selected=!0),t.setValue(e,{value:u(!0),items:f(y)}),d=u(!1)},clear(y){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=u(!1)},insert(y){const{index:A,displayValue:w,exportValue:S}=y.detail.insert,C=a.children[A],E=document.createElement("option");E.textContent=w,E.value=S,C?C.before(E):a.append(E),t.setValue(e,{value:u(!0),items:f(y)}),d=u(!1)},items(y){const{items:A}=y.detail;for(;a.length!==0;)a.remove(0);for(const w of A){const{displayValue:S,exportValue:C}=w,E=document.createElement("option");E.textContent=S,E.value=C,a.append(E)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(y)}),d=u(!1)},indices(y){const A=new Set(y.detail.indices);for(const w of y.target.options)w.selected=A.has(w.index);t.setValue(e,{value:u(!0)}),d=u(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(b,p)}),a.addEventListener("input",p=>{const b=u(!0),y=u(!1);t.setValue(e,{value:b}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:y,changeEx:b,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):a.addEventListener("input",function(p){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class rd extends te{constructor(t){const{data:e,elements:s,parent:a}=t,o=!!a._commentManager;if(super(t,{isRenderable:!o&&te._hasPopupData(e)}),this.elements=s,o&&te._hasPopupData(e)){const c=this.popup=this.#t();for(const u of s)u.popup=c}else this.popup=null}#t(){return new Qw({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),s=[];for(const a of this.elements)a.popup=e,a.container.ariaHasPopup="dialog",s.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(a=>`${xa}${a}`).join(",")),this.container}}class Qw{#t=null;#e=this.#q.bind(this);#n=this.#U.bind(this);#i=this.#N.bind(this);#r=this.#w.bind(this);#a=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#p=null;#u=null;#g=null;#b=null;#v=null;#y=null;#C=null;#E=null;#S=null;#x=!1;#A=null;#_=null;constructor({container:t,color:e,elements:s,titleObj:a,modificationDate:o,contentsObj:c,richText:u,parent:d,rect:f,parentRect:p,open:b,commentManager:y=null}){this.#s=t,this.#E=a,this.#o=c,this.#C=u,this.#d=d,this.#a=e,this.#y=f,this.#h=p,this.#l=s,this.#t=y,this.#A=s[0],this.#c=Jh.toDateObject(o),this.trigger=s.flatMap(A=>A.getElementsToTriggerPopup()),y||(this.#R(),this.#s.hidden=!0,b&&this.#w())}#R(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const e of this.trigger)e.addEventListener("click",this.#r,{signal:t}),e.addEventListener("pointerenter",this.#i,{signal:t}),e.addEventListener("pointerleave",this.#n,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#D(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#b=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#g){this.#g.parentNode||this.#A.container.after(this.#g);return}if(this.#b||this.#D(),!this.#b)return;const{signal:t}=this.#p=new AbortController,e=this.#A.hasOwnCommentButton,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},a=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#g=this.#A.container;for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",s,{signal:t}),c.addEventListener("pointerenter",a,{signal:t}),c.addEventListener("pointerleave",o,{signal:t}),c.classList.add("popupTriggerArea")}else{const c=this.#g=document.createElement("button");c.className="annotationCommentButton";const u=this.#A.container;c.style.zIndex=u.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#P(),this.#M(),c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",s,{signal:t}),c.addEventListener("pointerenter",a,{signal:t}),c.addEventListener("pointerleave",o,{signal:t}),u.after(c)}}#M(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.#g||this.renderCommentButton();const[t,e]=this.#b,{style:s}=this.#g;s.left=`calc(${t}%)`,s.top=`calc(${e}% - var(--comment-button-dim))`}#P(){this.#A.extraPopupElement||(this.#g||this.renderCommentButton(),this.#g.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#A.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#g?.focus()},0)}getData(){const{richText:t,color:e,opacity:s,creationDate:a,modificationDate:o}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:s,creationDate:a,modificationDate:o}}get elementBeforePopup(){return this.#g}get comment(){return this.#_||=this.#A.commentText,this.#_}set comment(t){t!==this.comment&&(this.#A.commentText=this.#_=t)}focus(){this.#A.container?.focus()}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#g&&(this.#g.classList.toggle("selected",t),this.#g.ariaExpanded=e)}setSelectedCommentButton(t){this.#g.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:e,height:s}=this.#g.getBoundingClientRect(),{x:a,y:o,width:c,height:u}=this.#A.layer.getBoundingClientRect();return[(t-a)/c,(e+s-o)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#b}get commentButtonWidth(){return this.#g.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,s]=this.#v||this.commentButtonPosition.map(f=>f/100),a=this.parentBoundingClientRect,{x:o,y:c,width:u,height:d}=a;this.#t.showDialog(null,this,o+e*u,c+s*d,{...t,parentDimensions:a})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#a){const s=t.style.outlineColor=it.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#E?.str){const s=document.createElement("span");s.className="title",e.append(s),{dir:s.dir,str:s.textContent}=this.#E}if(t.append(e),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),e.append(s)}uy({html:this.#L||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#L(){const t=this.#C,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#C.html||null}get#k(){return this.#L?.attributes?.style?.fontSize||0}get#F(){return this.#L?.attributes?.style?.color||null}#B(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#F,fontSize:this.#k?`calc(${this.#k}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:a});return s}#q(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:t,popup:e,deleted:s}){if(this.#t){s?(this.remove(),this.#_=null):e&&(e.deleted?this.remove():(this.#P(),this.#_=e.text)),t&&(this.#b=null,this.#D(),this.#M());return}if(s||e?.deleted){this.remove();return}this.#R(),this.#S||={contentsObj:this.#o,richText:this.#C},t&&(this.#u=null),e&&e.text&&(this.#C=this.#B(e.text),this.#c=Jh.toDateObject(e.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#S&&({contentsObj:this.#o,richText:this.#C}=this.#S,this.#S=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#m?.remove(),this.#m=null,this.#x=!1,this.#f=!1,this.#g?.remove(),this.#g=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:a,pageY:o}}}=this.#d;let c=!!this.#h,u=c?this.#h:this.#y;for(const w of this.#l)if(!u||it.intersect(w.data.rect,u)!==null){u=w.data.rect,c=!0;break}const d=it.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=c?u[2]-u[0]+5:0,b=d[0]+p,y=d[1];this.#u=[100*(b-a)/e,100*(y-o)/s];const{style:A}=this.#s;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#w(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#N(),this.#s.addEventListener("click",this.#r),this.#s.addEventListener("keydown",this.#e)):(this.#U(),this.#s.removeEventListener("click",this.#r),this.#s.removeEventListener("keydown",this.#e))}#N(){this.#m||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#T(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#U(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#x=this.isVisible,this.#x&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#R(),this.#x&&(this.#m||this.#N(),this.#x=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class Ly extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=vt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class Ww extends te{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:s}=this,a=this.svgFactory.create(e,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Zw extends te{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:s}=this,a=this.svgFactory.create(e,s,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",o/2),c.setAttribute("y",o/2),c.setAttribute("width",e-o),c.setAttribute("height",s-o),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Jw extends te{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:s}=this,a=this.svgFactory.create(e,s,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",e/2),c.setAttribute("cy",s/2),c.setAttribute("rx",e/2-o/2),c.setAttribute("ry",s/2-o/2),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ny extends te{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:s,popupRef:a},width:o,height:c}=this;if(!e)return this.container;const u=this.svgFactory.create(o,c,!0);let d=[];for(let p=0,b=e.length;p<b;p+=2){const y=e[p]-t[0],A=t[3]-e[p+1];d.push(`${y},${A}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class tE extends Ny{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class eE extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class Md extends te{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?vt.HIGHLIGHT:vt.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:s,borderStyle:a,popupRef:o}}=this,{transform:c,width:u,height:d}=this.#n(e,t),f=this.svgFactory.create(u,d,!0),p=this.#t=this.svgFactory.createElement("svg:g");f.append(p),p.setAttribute("stroke-width",a.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",c);for(let b=0,y=s.length;b<y;b++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",s[b].join(",")),p.append(A)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:s,rect:a}=t,o=this.#t;if(e>=0&&o.setAttribute("stroke-width",e||1),s)for(let c=0,u=this.#e.length;c<u;c++)this.#e[c].setAttribute("points",s[c].join(","));if(a){const{transform:c,width:u,height:d}=this.#n(this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),o.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class ky extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=vt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class iE extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class nE extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class sE extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class By extends te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=vt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class aE extends te{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let s;e.hasAppearance||e.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:a}=Ae.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Rd{#t=null;#e=null;#n=null;#i=new Map;#r=null;#a=null;#s=[];#o=!1;constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:a,page:o,viewport:c,structTreeLayer:u,commentManager:d,linkService:f,annotationStorage:p}){this.div=t,this.#t=e,this.#e=s,this.#r=u||null,this.#a=f||null,this.#n=p||new Ed,this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=d||null}hasEditableAnnotations(){return this.#i.size>0}async render(t){const{annotations:e}=t,s=this.div;Ls(s,this.viewport);const a=new Map,o=[],c={data:null,layer:s,linkService:this.#a,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Zl,annotationStorage:this.#n,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const d=u.annotationType===ge.POPUP;if(d){const b=a.get(u.id);if(!b)continue;if(!this._commentManager){o.push(u);continue}c.elements=b}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;c.data=u;const f=Xh.create(c);if(!f.isRenderable)continue;if(!d&&(this.#s.push(f),u.popupRef)){const b=a.get(u.popupRef);b?b.push(f):a.set(u.popupRef,[f])}const p=f.render();u.hidden&&(p.style.visibility="hidden"),f._isEditable&&(this.#i.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const u of o){const d=c.elements=a.get(u.id);c.data=u;const f=Xh.create(c);if(!f.isRenderable)continue;const p=f.render();f.contentElement.id=`${xa}${u.id}`,u.hidden&&(p.style.visibility="hidden"),d.at(-1).container.after(p)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:s,data:{id:a}}of this.#s){const o=s.id=`${xa}${a}`;t.push(this.#r?.getAriaAttributes(o).then(c=>{if(c)for(const[u,d]of c)s.setAttribute(u,d)}))}}this.#s.sort(({data:{rect:[s,a,o,c]}},{data:{rect:[u,d,f,p]}})=>{if(s===o&&a===c)return 1;if(u===f&&d===p)return-1;const b=c,y=a,A=(a+c)/2,w=p,S=d,C=(d+p)/2;if(A>=w&&C<=y)return-1;if(C>=b&&A<=S)return 1;const E=(s+o)/2,x=(u+f)/2;return E-x});const e=document.createDocumentFragment();for(const s of this.#s)e.append(s.container),this._commentManager?(s.extraPopupElement?.popup||s.popup)?.renderCommentButton():s.extraPopupElement&&e.append(s.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),this.#t)for(const s of this.#s)this.#t.addPointerInTextLayer(s.contentElement,!1)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#a,svgFactory:new Zl,parent:this};for(const s of t){s.borderStyle||=Rd._defaultBorderStyle,e.data=s;const a=Xh.create(e);a.isRenderable&&(a.render(),a.contentElement.id=`${xa}${s.id}`,this.#s.push(a))}await this.#c()}update({viewport:t}){const e=this.div;this.viewport=t,Ls(e,{rotation:t.rotation}),this.#l(),e.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[e,s]of this.#e){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;s.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):a.append(s);const c=this.#i.get(e);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,a.id,s),c._hasNoCanvas=!1):c.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:s,rotation:a}=t,o=new Gw({data:{id:s,rect:t.getPDFRect(),rotation:a},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#a,annotationStorage:this.#n});return o.render(),o.contentElement.id=`${xa}${s}`,o.createOrUpdatePopup(),this.#s.push(o),o}removeAnnotation(t){const e=this.#s.findIndex(a=>a.data.id===t);if(e<0)return;const[s]=this.#s.splice(e,1);this.#t?.removePointerInTextLayer(s.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return yt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:_a.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Fl=/\r\n?|\n/g;class Te extends dt{#t="";#e=`${this.id}-editor`;#n=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Te.prototype,e=o=>o.isEmpty(),s=os.TRANSLATE_SMALL,a=os.TRANSLATE_BIG;return yt(this,"_keyboardManager",new co([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=vt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||Te._defaultColor||dt._defaultLineColor,this.#i=t.fontSize||Te._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,e){dt.initialize(t,e);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Ot.FREETEXT_SIZE:Te._defaultFontSize=e;break;case Ot.FREETEXT_COLOR:Te._defaultColor=e;break}}updateParams(t,e){switch(t){case Ot.FREETEXT_SIZE:this.#r(e);break;case Ot.FREETEXT_COLOR:this.#a(e);break}}static get defaultPropertiesToUpdate(){return[[Ot.FREETEXT_SIZE,Te._defaultFontSize],[Ot.FREETEXT_COLOR,Te._defaultColor||dt._defaultLineColor]]}get propertiesToUpdate(){return[[Ot.FREETEXT_SIZE,this.#i],[Ot.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new to(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ot.FREETEXT_COLOR}#r(t){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#i)*this.parentScale),this.#i=a,this.#o()},s=this.#i;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ot.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#a(t){const e=a=>{this.color=a,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ot.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Te._internalPadding*t,-(Te._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let e=null;for(const s of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(Te.#c(s)),e=s);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,c=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=c,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/e):(this.width=s.height/t,this.height=s.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#s().trimEnd();if(t===e)return;const s=a=>{if(this.#t=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(e)},undo:()=>{s(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Te._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[f,p]=this.pageDimensions,[b,y]=this.pageTranslation;let A,w;switch(this.rotation){case 0:A=t+(c[0]-b)/f,w=e+this.height-(c[1]-y)/p;break;case 90:A=t+(c[0]-b)/f,w=e-(c[1]-y)/p,[u,d]=[d,-u];break;case 180:A=t-this.width+(c[0]-b)/f,w=e-(c[1]-y)/p,[u,d]=[-u,-d];break;case 270:A=t+(c[0]-b-this.height*p)/f,w=e+(c[1]-y-this.width*f)/p,[u,d]=[-d,u];break}this.setAt(A*a,w*o,u,d)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Fl,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:s}=e;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const a=Te.#h(e.getData("text")||"").replaceAll(Fl,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const c=o.getRangeAt(0);if(!a.includes(`
`)){c.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=c,f=[],p=[];if(u.nodeType===Node.TEXT_NODE){const A=u.parentElement;if(p.push(u.nodeValue.slice(d).replaceAll(Fl,"")),A!==this.editorDiv){let w=f;for(const S of this.editorDiv.childNodes){if(S===A){w=p;continue}w.push(Te.#c(S))}}f.push(u.nodeValue.slice(0,d).replaceAll(Fl,""))}else if(u===this.editorDiv){let A=f,w=0;for(const S of this.editorDiv.childNodes)w++===d&&(A=p),A.push(Te.#c(S))}this.#t=`${f.join(`
`)}${a}${p.join(`
`)}`,this.#l();const b=new Range;let y=Math.sumPrecise(f.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const w=A.nodeValue.length;if(y<=w){b.setStart(A,y),b.setEnd(A,y);break}y-=w}o.removeAllRanges(),o.addRange(b)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Te._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,s){let a=null;if(t instanceof Ly){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:d,rotation:f,id:p,popupRef:b,richText:y,contentsObj:A,creationDate:w,modificationDate:S},textContent:C,textPosition:E,parent:{page:{pageNumber:x}}}=t;if(!C||C.length===0)return null;a=t={annotationType:vt.FREETEXT,color:Array.from(u),fontSize:c,value:C.join(`
`),position:E,pageIndex:x-1,rect:d.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:b,comment:A?.str||null,richText:y,creationDate:w,modificationDate:S}}const o=await super.deserialize(t,e,s);return o.#i=t.fontSize,o.color=it.makeHexColor(...t.color),o.#t=Te.#h(t.value),o._initialData=a,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=dt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:e,fontSize:this.#i,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:e,fontSize:s,color:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==s||t.color.some((c,u)=>c!==a[u])||t.pageIndex!==o}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:s}=e;s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,e.replaceChildren();for(const a of this.#t.split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),e.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class nt{static PRECISION=1e-4;toSVGPath(){Xt("Abstract method `toSVGPath` must be implemented.")}get box(){Xt("Abstract getter `box` must be implemented.")}serialize(t,e){Xt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,a,o,c){c||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)c[u]=e+t[u]*a,c[u+1]=s+t[u+1]*o;return c}static _rescaleAndSwap(t,e,s,a,o,c){c||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)c[u]=e+t[u+1]*a,c[u+1]=s+t[u]*o;return c}static _translate(t,e,s,a){a||=new Float32Array(t.length);for(let o=0,c=t.length;o<c;o+=2)a[o]=e+t[o],a[o+1]=s+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,a,o){switch(o){case 90:return[1-e/s,t/a];case 180:return[1-t/s,1-e/a];case 270:return[e/s,1-t/a];default:return[t/s,e/a]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,a,o,c){return[(t+5*s)/6,(e+5*a)/6,(5*s+o)/6,(5*a+c)/6,(s+o)/2,(a+c)/2]}}class Ds{#t;#e=[];#n;#i;#r=[];#a=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#m=8;static#p=2;static#u=Ds.#m+Ds.#p;constructor({x:t,y:e},s,a,o,c,u=0){this.#t=s,this.#h=o*a,this.#i=c,this.#a.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=u,this.#l=Ds.#m*a,this.#c=Ds.#u*a,this.#d=a,this.#f.push(t,e)}isEmpty(){return isNaN(this.#a[8])}#g(){const t=this.#a.subarray(4,6),e=this.#a.subarray(16,18),[s,a,o,c]=this.#t;return[(this.#s+(t[0]-e[0])/2-s)/o,(this.#o+(t[1]-e[1])/2-a)/c,(this.#s+(e[0]-t[0])/2-s)/o,(this.#o+(e[1]-t[1])/2-a)/c]}add({x:t,y:e}){this.#s=t,this.#o=e;const[s,a,o,c]=this.#t;let[u,d,f,p]=this.#a.subarray(8,12);const b=t-f,y=e-p,A=Math.hypot(b,y);if(A<this.#c)return!1;const w=A-this.#l,S=w/A,C=S*b,E=S*y;let x=u,T=d;u=f,d=p,f+=C,p+=E,this.#f?.push(t,e);const O=-E/w,R=C/w,L=O*this.#h,k=R*this.#h;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([f+L,p+k],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([f-L,p-k],16),isNaN(this.#a[6])?(this.#r.length===0&&(this.#a.set([u+L,d+k],2),this.#r.push(NaN,NaN,NaN,NaN,(u+L-s)/o,(d+k-a)/c),this.#a.set([u-L,d-k],14),this.#e.push(NaN,NaN,NaN,NaN,(u-L-s)/o,(d-k-a)/c)),this.#a.set([x,T,u,d,f,p],6),!this.isEmpty()):(this.#a.set([x,T,u,d,f,p],6),Math.abs(Math.atan2(T-d,x-u)-Math.atan2(E,C))<Math.PI/2?([u,d,f,p]=this.#a.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+f)/2-s)/o,((d+p)/2-a)/c),[u,d,x,T]=this.#a.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((x+u)/2-s)/o,((T+d)/2-a)/c),!0):([x,T,u,d,f,p]=this.#a.subarray(0,6),this.#r.push(((x+5*u)/6-s)/o,((T+5*d)/6-a)/c,((5*u+f)/6-s)/o,((5*d+p)/6-a)/c,((u+f)/2-s)/o,((d+p)/2-a)/c),[f,p,u,d,x,T]=this.#a.subarray(12,18),this.#e.push(((x+5*u)/6-s)/o,((T+5*d)/6-a)/c,((5*u+f)/6-s)/o,((5*d+p)/6-a)/c,((u+f)/2-s)/o,((d+p)/2-a)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#b();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?s.push(`L${t[a+4]} ${t[a+5]}`):s.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#y(s);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?s.push(`L${e[a+4]} ${e[a+5]}`):s.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#v(s),s.join(" ")}#b(){const[t,e,s,a]=this.#t,[o,c,u,d]=this.#g();return`M${(this.#a[2]-t)/s} ${(this.#a[3]-e)/a} L${(this.#a[4]-t)/s} ${(this.#a[5]-e)/a} L${o} ${c} L${u} ${d} L${(this.#a[16]-t)/s} ${(this.#a[17]-e)/a} L${(this.#a[14]-t)/s} ${(this.#a[15]-e)/a} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#y(t){const[e,s,a,o]=this.#t,c=this.#a.subarray(4,6),u=this.#a.subarray(16,18),[d,f,p,b]=this.#g();t.push(`L${(c[0]-e)/a} ${(c[1]-s)/o} L${d} ${f} L${p} ${b} L${(u[0]-e)/a} ${(u[1]-s)/o}`)}newFreeDrawOutline(t,e,s,a,o,c){return new zy(t,e,s,a,o,c)}getOutlines(){const t=this.#r,e=this.#e,s=this.#a,[a,o,c,u]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let b=0,y=d.length-2;b<y;b+=2)d[b]=(this.#f[b]-a)/c,d[b+1]=(this.#f[b+1]-o)/u;if(d[d.length-2]=(this.#s-a)/c,d[d.length-1]=(this.#o-o)/u,isNaN(s[6])&&!this.isEmpty())return this.#C(d);const f=new Float32Array(this.#r.length+24+this.#e.length);let p=t.length;for(let b=0;b<p;b+=2){if(isNaN(t[b])){f[b]=f[b+1]=NaN;continue}f[b]=t[b],f[b+1]=t[b+1]}p=this.#S(f,p);for(let b=e.length-6;b>=6;b-=6)for(let y=0;y<6;y+=2){if(isNaN(e[b+y])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=e[b+y],f[p+1]=e[b+y+1],p+=2}return this.#E(f,p),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#n,this.#i)}#C(t){const e=this.#a,[s,a,o,c]=this.#t,[u,d,f,p]=this.#g(),b=new Float32Array(36);return b.set([NaN,NaN,NaN,NaN,(e[2]-s)/o,(e[3]-a)/c,NaN,NaN,NaN,NaN,(e[4]-s)/o,(e[5]-a)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(e[16]-s)/o,(e[17]-a)/c,NaN,NaN,NaN,NaN,(e[14]-s)/o,(e[15]-a)/c],0),this.newFreeDrawOutline(b,t,this.#t,this.#d,this.#n,this.#i)}#E(t,e){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6}#S(t,e){const s=this.#a.subarray(4,6),a=this.#a.subarray(16,18),[o,c,u,d]=this.#t,[f,p,b,y]=this.#g();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-c)/d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,b,y,NaN,NaN,NaN,NaN,(a[0]-o)/u,(a[1]-c)/d],e),e+=24}}class zy extends nt{#t;#e=new Float32Array(4);#n;#i;#r;#a;#s;constructor(t,e,s,a,o,c){super(),this.#s=t,this.#r=e,this.#t=s,this.#a=a,this.#n=o,this.#i=c,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(c);const[u,d,f,p]=this.#e;for(let b=0,y=t.length;b<y;b+=2)t[b]=(t[b]-u)/f,t[b+1]=(t[b+1]-d)/p;for(let b=0,y=e.length;b<y;b+=2)e[b]=(e[b]-u)/f,e[b+1]=(e[b+1]-d)/p}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let e=6,s=this.#s.length;e<s;e+=6){if(isNaN(this.#s[e])){t.push(`L${this.#s[e+4]} ${this.#s[e+5]}`);continue}t.push(`C${this.#s[e]} ${this.#s[e+1]} ${this.#s[e+2]} ${this.#s[e+3]} ${this.#s[e+4]} ${this.#s[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,s,a],o){const c=s-t,u=a-e;let d,f;switch(o){case 0:d=nt._rescale(this.#s,t,a,c,-u),f=nt._rescale(this.#r,t,a,c,-u);break;case 90:d=nt._rescaleAndSwap(this.#s,t,e,c,u),f=nt._rescaleAndSwap(this.#r,t,e,c,u);break;case 180:d=nt._rescale(this.#s,s,e,-c,u),f=nt._rescale(this.#r,s,e,-c,u);break;case 270:d=nt._rescaleAndSwap(this.#s,s,a,-c,-u),f=nt._rescaleAndSwap(this.#r,s,a,-c,-u);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const e=this.#s;let s=e[4],a=e[5];const o=[s,a,s,a];let c=s,u=a,d=s,f=a;const p=t?Math.max:Math.min,b=new Float32Array(4);for(let A=6,w=e.length;A<w;A+=6){const S=e[A+4],C=e[A+5];isNaN(e[A])?(it.pointBoundingBox(S,C,o),u>C?(c=S,u=C):u===C&&(c=p(c,S)),f<C?(d=S,f=C):f===C&&(d=p(d,S))):(b[0]=b[1]=1/0,b[2]=b[3]=-1/0,it.bezierBoundingBox(s,a,...e.slice(A,A+6),b),it.rectBoundingBox(b[0],b[1],b[2],b[3],o),u>b[1]?(c=b[0],u=b[1]):u===b[1]&&(c=p(c,b[0])),f<b[3]?(d=b[2],f=b[3]):f===b[3]&&(d=p(d,b[2]))),s=S,a=C}const y=this.#e;y[0]=o[0]-this.#n,y[1]=o[1]-this.#n,y[2]=o[2]-o[0]+2*this.#n,y[3]=o[3]-o[1]+2*this.#n,this.firstPoint=[c,u],this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,e,s,a,o,c=0){return new Ds(t,e,s,a,o,c)}getNewOutline(t,e){const[s,a,o,c]=this.#e,[u,d,f,p]=this.#t,b=o*f,y=c*p,A=s*f+u,w=a*p+d,S=this.newOutliner({x:this.#r[0]*b+A,y:this.#r[1]*y+w},this.#t,this.#a,t,this.#i,e??this.#n);for(let C=2;C<this.#r.length;C+=2)S.add({x:this.#r[C]*b+A,y:this.#r[C+1]*y+w});return S.getOutlines()}}class od{#t;#e;#n;#i=[];#r=[];constructor(t,e=0,s=0,a=!0){const o=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:S,y:C,width:E,height:x}of t){const T=Math.floor((S-e)/c)*c,O=Math.ceil((S+E+e)/c)*c,R=Math.floor((C-e)/c)*c,L=Math.ceil((C+x+e)/c)*c,k=[T,R,L,!0],q=[O,R,L,!1];this.#i.push(k,q),it.rectBoundingBox(T,R,O,L,o)}const u=o[2]-o[0]+2*s,d=o[3]-o[1]+2*s,f=o[0]-s,p=o[1]-s;let b=a?-1/0:1/0,y=1/0;const A=this.#i.at(a?-1:-2),w=[A[0],A[2]];for(const S of this.#i){const[C,E,x,T]=S;!T&&a?E<y?(y=E,b=C):E===y&&(b=Math.max(b,C)):T&&!a&&(E<y?(y=E,b=C):E===y&&(b=Math.min(b,C))),S[0]=(C-f)/u,S[1]=(E-p)/d,S[2]=(x-p)/d}this.#t=new Float32Array([f,p,u,d]),this.#e=[b,y],this.#n=w}getOutlines(){this.#i.sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of this.#i)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#a(t)}#a(t){const e=[],s=new Set;for(const c of t){const[u,d,f]=c;e.push([u,d,c],[u,f,c])}e.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=e.length;c<u;c+=2){const d=e[c][2],f=e[c+1][2];d.push(f),f.push(d),s.add(d),s.add(f)}const a=[];let o;for(;s.size>0;){const c=s.values().next().value;let[u,d,f,p,b]=c;s.delete(c);let y=u,A=d;for(o=[u,f],a.push(o);;){let w;if(s.has(p))w=p;else if(s.has(b))w=b;else break;s.delete(w),[u,d,f,p,b]=w,y!==u&&(o.push(y,A,u,A===d?d:f),y=u),A=A===d?f:d}o.push(y,A)}return new rE(a,this.#t,this.#e,this.#n)}#s(t){const e=this.#r;let s=0,a=e.length-1;for(;s<=a;){const o=s+a>>1,c=e[o][0];if(c===t)return o;c<t?s=o+1:a=o-1}return a+1}#o([,t,e]){const s=this.#s(t);this.#r.splice(s,0,[t,e])}#c([,t,e]){const s=this.#s(t);for(let a=s;a<this.#r.length;a++){const[o,c]=this.#r[a];if(o!==t)break;if(o===t&&c===e){this.#r.splice(a,1);return}}for(let a=s-1;a>=0;a--){const[o,c]=this.#r[a];if(o!==t)break;if(o===t&&c===e){this.#r.splice(a,1);return}}}#l(t){const[e,s,a]=t,o=[[e,s,a]],c=this.#s(a);for(let u=0;u<c;u++){const[d,f]=this.#r[u];for(let p=0,b=o.length;p<b;p++){const[,y,A]=o[p];if(!(f<=y||A<=d)){if(y>=d){if(A>f)o[p][1]=f;else{if(b===1)return[];o.splice(p,1),p--,b--}continue}o[p][2]=d,A>f&&o.push([e,f,A])}}}return o}}class rE extends nt{#t;#e;constructor(t,e,s,a){super(),this.#e=t,this.#t=e,this.firstPoint=s,this.lastPoint=a}toSVGPath(){const t=[];for(const e of this.#e){let[s,a]=e;t.push(`M${s} ${a}`);for(let o=2;o<e.length;o+=2){const c=e[o],u=e[o+1];c===s?(t.push(`V${u}`),a=u):u===a&&(t.push(`H${c}`),s=c)}t.push("Z")}return t.join(" ")}serialize([t,e,s,a],o){const c=[],u=s-t,d=a-e;for(const f of this.#e){const p=new Array(f.length);for(let b=0;b<f.length;b+=2)p[b]=t+f[b]*u,p[b+1]=a-f[b+1]*d;c.push(p)}return c}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class ld extends Ds{newFreeDrawOutline(t,e,s,a,o,c){return new oE(t,e,s,a,o,c)}}class oE extends zy{newOutliner(t,e,s,a,o,c=0){return new ld(t,e,s,a,o,c)}}class le extends dt{#t=null;#e=0;#n;#i=null;#r=null;#a=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#p=null;#u="";#g;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=vt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=le.prototype;return yt(this,"_keyboardManager",new co([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||le._defaultColor,this.#g=t.thickness||le._defaultThickness,this.opacity=t.opacity||le._defaultOpacity,this.#n=t.boxes||null,this.#b=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#y(t),this.#A()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new od(this.#n,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new od(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#a=e.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:a}=this.#a;this.#m=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#y({highlightOutlines:t,highlightId:e,clipPathId:s}){this.#l=t;const a=1.5;if(this.#a=t.getNewOutline(this.#g/2+a,.0025),e>=0)this.#d=e,this.#i=s,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const b=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:le.#_(this.#l.box,(b-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:le.#_(this.#a.box,b),path:{d:this.#a.toSVGPath()}})}const[o,c,u,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=c,this.width=u,this.height=d;break;case 90:{const[b,y]=this.parentDimensions;this.x=c,this.y=1-o,this.width=u*y/b,this.height=d*b/y;break}case 180:this.x=1-o,this.y=1-c,this.width=u,this.height=d;break;case 270:{const[b,y]=this.parentDimensions;this.x=1-c,this.y=o,this.width=u*y/b,this.height=d*b/y;break}}const{firstPoint:f}=t;this.#f=[(f[0]-o)/u,(f[1]-c)/d];const{lastPoint:p}=this.#a;this.#m=[(p[0]-o)/u,(p[1]-c)/d]}static initialize(t,e){dt.initialize(t,e),le._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Ot.HIGHLIGHT_COLOR:le._defaultColor=e;break;case Ot.HIGHLIGHT_THICKNESS:le._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Ot.HIGHLIGHT_COLOR:this.#C(e);break;case Ot.HIGHLIGHT_THICKNESS:this.#E(e);break}}static get defaultPropertiesToUpdate(){return[[Ot.HIGHLIGHT_COLOR,le._defaultColor],[Ot.HIGHLIGHT_THICKNESS,le._defaultThickness]]}get propertiesToUpdate(){return[[Ot.HIGHLIGHT_COLOR,this.color||le._defaultColor],[Ot.HIGHLIGHT_THICKNESS,this.#g||le._defaultThickness],[Ot.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#C(t){const e=(o,c)=>{this.color=o,this.opacity=c,this.onUpdatedColor()},s=this.color,a=this.opacity;this.addCommands({cmd:e.bind(this,t,le._defaultOpacity),undo:e.bind(this,s,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ot.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#E(t){const e=this.#g,s=a=>{this.#g=a,this.#S(a)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ot.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new ki({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#x(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#x():t&&(this.#A(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#S(t){this.#h&&(this.#y({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#x(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#A(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#_([t,e,s,a],o){switch(o){case 90:return[1-e-a,t,a,s];case 180:return[1-t-s,1-e-a,s,a];case 270:return[e,1-t-s,a,s]}return[t,e,s,a]}rotate(t){const{drawLayer:e}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=le.#_(this.#l.box,t)):s=le.#_([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:le.#_(this.#a.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i,this.setDims(),dy(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#R(t){le._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#D(!0);break;case 1:case 3:this.#D(!1);break}}#D(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#s,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#D(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#M(){return this.#h?this.rotation:0}#P(){if(this.#h)return null;const[t,e]=this.pageDimensions,[s,a]=this.pageTranslation,o=this.#n,c=new Float32Array(o.length*8);let u=0;for(const{x:d,y:f,width:p,height:b}of o){const y=d*t+s,A=(1-f)*e+a;c[u]=c[u+4]=y,c[u+1]=c[u+3]=A,c[u+2]=c[u+6]=y+p*t,c[u+5]=c[u+7]=A-b*e,u+=8}return c}#L(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,e,{target:s,x:a,y:o}){const{x:c,y:u,width:d,height:f}=s.getBoundingClientRect(),p=new AbortController,b=t.combinedSignal(p),y=A=>{p.abort(),this.#F(t,A)};window.addEventListener("blur",y,{signal:b}),window.addEventListener("pointerup",y,{signal:b}),window.addEventListener("pointerdown",ne,{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",zi,{signal:b}),s.addEventListener("pointermove",this.#k.bind(this,t),{signal:b}),this._freeHighlight=new ld({x:a,y:o},[c,u,d,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#k(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,s){let a=null;if(t instanceof ky){const{data:{quadPoints:w,rect:S,rotation:C,id:E,color:x,opacity:T,popupRef:O,richText:R,contentsObj:L,creationDate:k,modificationDate:q},parent:{page:{pageNumber:X}}}=t;a=t={annotationType:vt.HIGHLIGHT,color:Array.from(x),opacity:T,quadPoints:w,boxes:null,pageIndex:X-1,rect:S.slice(0),rotation:C,annotationElementId:E,id:E,deleted:!1,popupRef:O,richText:R,comment:L?.str||null,creationDate:k,modificationDate:q}}else if(t instanceof Md){const{data:{inkLists:w,rect:S,rotation:C,id:E,color:x,borderStyle:{rawWidth:T},popupRef:O,richText:R,contentsObj:L,creationDate:k,modificationDate:q},parent:{page:{pageNumber:X}}}=t;a=t={annotationType:vt.HIGHLIGHT,color:Array.from(x),thickness:T,inkLists:w,boxes:null,pageIndex:X-1,rect:S.slice(0),rotation:C,annotationElementId:E,id:E,deleted:!1,popupRef:O,richText:R,comment:L?.str||null,creationDate:k,modificationDate:q}}const{color:o,quadPoints:c,inkLists:u,opacity:d}=t,f=await super.deserialize(t,e,s);f.color=it.makeHexColor(...o),f.opacity=d||1,u&&(f.#g=t.thickness),f._initialData=a,t.comment&&f.setCommentData(t);const[p,b]=f.pageDimensions,[y,A]=f.pageTranslation;if(c){const w=f.#n=[];for(let S=0;S<c.length;S+=8)w.push({x:(c[S]-y)/p,y:1-(c[S+1]-A)/b,width:(c[S+2]-c[S])/p,height:(c[S+1]-c[S+5])/b});f.#v(),f.#A(),f.rotate(f.rotation)}else if(u){f.#h=!0;const w=u[0],S={x:w[0]-y,y:b-(w[1]-A)},C=new ld(S,[0,0,p,b],1,f.#g/2,!0,.001);for(let T=0,O=w.length;T<O;T+=2)S.x=w[T]-y,S.y=b-(w[T+1]-A),C.add(S);const{id:E,clipPathId:x}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);f.#y({highlightOutlines:C.getOutlines(),highlightId:E,clipPathId:x}),f.#A(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=dt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:e,opacity:this.opacity,thickness:this.#g,quadPoints:this.#P(),outlines:this.#L(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#B(s)?null:(s.id=this.annotationElementId,s)}#B(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((s,a)=>s!==e[a])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class Py{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,s)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Xt("Not implemented")}}class zt extends dt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#r=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#a(t),this.#c())}#a({drawOutlines:t,drawId:e,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,e){const{id:s}=e.drawLayer.draw(zt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,e){const s=new Set(Object.keys(t));for(const[a,o]of Object.entries(e))s.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){Xt("Not implemented")}static get typesMap(){Xt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,e),this._currentParent&&(zt.#n.updateProperty(s,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[s,a]of this.typesMap)t.push([s,e[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[s,a]of this.constructor.typesMap)t.push([s,e[a]]);return t}_updateProperty(t,e,s){const a=this._drawingOptions,o=a[e],c=u=>{a.updateProperty(e,u);const d=this.#t.updateProperty(e,u);d&&this.#h(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,s),undo:c.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#l([t,e,s,a]){const{parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[e,1-t,s*(c/o),a*(o/c)];case 180:return[1-t,1-e,s,a];case 270:return[1-e,t,s*(c/o),a*(o/c)];default:return[t,e,s,a]}}#d(){const{x:t,y:e,width:s,height:a,parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[1-e,t,s*(o/c),a*(c/o)];case 180:return[1-t,1-e,s,a];case 270:return[e,1-t,s*(o/c),a*(c/o)];default:return[t,e,s,a]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:e,width:s,height:a,rotation:o,parentRotation:c,parentDimensions:[u,d]}=this;switch((o*4+c)/90){case 1:return[1-e-a,t,a,s];case 2:return[1-t-s,1-e-a,s,a];case 3:return[e,1-t-s,a,s];case 4:return[t,e-s*(u/d),a*(d/u),s*(u/d)];case 5:return[1-e,t,s*(u/d),a*(d/u)];case 6:return[1-t-a*(d/u),1-e,a*(d/u),s*(u/d)];case 7:return[e-s*(u/d),1-t-a*(d/u),s*(u/d),a*(d/u)];case 8:return[t-s,e-a,s,a];case 9:return[1-e,t-s,a,s];case 10:return[1-t,1-e,s,a];case 11:return[e-a,1-t,a,s];case 12:return[t-a*(d/u),e,a*(d/u),s*(u/d)];case 13:return[1-e-s*(u/d),t-a*(d/u),s*(u/d),a*(d/u)];case 14:return[1-t,1-e-s*(u/d),a*(d/u),s*(u/d)];case 15:return[e,1-t,s*(u/d),a*(d/u)];default:return[t,e,s,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const s=super.render();s.classList.add("draw");const a=document.createElement("div");return s.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),s}static createDrawerInstance(t,e,s,a,o){Xt("Not implemented")}static startDrawing(t,e,s,a){const{target:o,offsetX:c,offsetY:u,pointerId:d,pointerType:f}=a;if(Pt.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:p}}=t,{width:b,height:y}=o.getBoundingClientRect(),A=zt.#i=new AbortController,w=t.combinedSignal(A);if(Pt.setPointer(f,d),window.addEventListener("pointerup",S=>{Pt.isSamePointerIdOrRemove(S.pointerId)&&this._endDraw(S)},{signal:w}),window.addEventListener("pointercancel",S=>{Pt.isSamePointerIdOrRemove(S.pointerId)&&this._currentParent.endDrawingSession()},{signal:w}),window.addEventListener("pointerdown",S=>{Pt.isSamePointerType(S.pointerType)&&(Pt.initializeAndAddPointerId(S.pointerId),zt.#n.isCancellable()&&(zt.#n.removeLastElement(),zt.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",zi,{signal:w}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),o.addEventListener("touchmove",S=>{Pt.isSameTimeStamp(S.timeStamp)&&ne(S)},{signal:w}),t.toggleDrawing(),e._editorUndoBar?.hide(),zt.#n){t.drawLayer.updateProperties(this._currentDrawId,zt.#n.startNew(c,u,b,y,p));return}e.updateUIForDefaultProperties(this),zt.#n=this.createDrawerInstance(c,u,b,y,p),zt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(zt.#r.toSVGProperties(),zt.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Pt.isSameTimeStamp(t.timeStamp),!zt.#n)return;const{offsetX:e,offsetY:s,pointerId:a}=t;if(Pt.isSamePointerId(a)){if(Pt.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,zt.#n.add(e,s)),Pt.setTimeStamp(t.timeStamp),ne(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,zt.#n=null,zt.#r=null,Pt.clearTimeStamp()),zt.#i&&(zt.#i.abort(),zt.#i=null,Pt.clearPointerIds())}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,zt.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=zt.#n,a=this._currentDrawId,o=s.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(a,s.setLastElement(o))},undo:()=>{e.drawLayer.updateProperties(a,s.removeLastElement())},mustExec:!1,type:Ot.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Ot.DRAW_STEP),!zt.#n.isEmpty()){const{pageDimensions:[s,a],scale:o}=e,c=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:zt.#n.getOutlines(s*o,a*o,o,this._INNER_MARGIN),drawingOptions:zt.#r,mustBeCommitted:!t});return this._cleanup(!0),c}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,s,a,o,c){Xt("Not implemented")}static async deserialize(t,e,s){const{rawDims:{pageWidth:a,pageHeight:o,pageX:c,pageY:u}}=e.viewport,d=this.deserializeDraw(c,u,a,o,this._INNER_MARGIN,t),f=await super.deserialize(t,e,s);return f.createDrawingOptions(t),f.#a({drawOutlines:d}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,s]=this.pageTranslation,[a,o]=this.pageDimensions;return this.#t.serialize([e,s,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class lE{#t=new Float64Array(6);#e;#n;#i;#r;#a;#s="";#o=0;#c=new ho;#l;#d;constructor(t,e,s,a,o,c){this.#l=s,this.#d=a,this.#i=o,this.#r=c,[t,e]=this.#h(t,e);const u=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e],this.#n=[{line:u,points:this.#a}],this.#t.set(u,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#h(t,e){return nt._normalizePoint(t,e,this.#l,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#a.length<=10}add(t,e){[t,e]=this.#h(t,e);const[s,a,o,c]=this.#t.subarray(2,6),u=t-o,d=e-c;return Math.hypot(this.#l*u,this.#d*d)<=2?null:(this.#a.push(t,e),isNaN(s)?(this.#t.set([o,c,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,a,o,c,t,e],0),this.#e.push(...nt.createBezierPoints(s,a,o,c,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,a,o){this.#l=s,this.#d=a,this.#i=o,[t,e]=this.#h(t,e);const c=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:c,points:this.#a}),this.#t.set(c,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#a=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#s="";for(let t=0,e=this.#n.length;t<e;t++){const{line:s,points:a}=this.#n[t];this.#e=s,this.#a=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=nt.svgRound(this.#e[4]),e=nt.svgRound(this.#e[5]);if(this.#a.length===2)return this.#s=`${this.#s} M ${t} ${e} Z`,this.#s;if(this.#a.length<=6){const a=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,a)} M ${t} ${e}`,this.#o=6}if(this.#a.length===4){const a=nt.svgRound(this.#e[10]),o=nt.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${a} ${o}`,this.#o=12,this.#s}const s=[];this.#o===0&&(s.push(`M ${t} ${e}`),this.#o=6);for(let a=this.#o,o=this.#e.length;a<o;a+=6){const[c,u,d,f,p,b]=this.#e.slice(a,a+6).map(nt.svgRound);s.push(`C${c} ${u} ${d} ${f} ${p} ${b}`)}return this.#s+=s.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,e,s,a){const o=this.#n.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#n,t,e,s,this.#i,this.#r,a),this.#t=null,this.#e=null,this.#n=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class ho extends nt{#t;#e=0;#n;#i;#r;#a;#s;#o;#c;build(t,e,s,a,o,c,u){this.#r=e,this.#a=s,this.#s=a,this.#o=o,this.#c=c,this.#n=u??0,this.#i=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#i){if(t.push(`M${nt.svgRound(e[4])} ${nt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${nt.svgRound(e[10])} ${nt.svgRound(e[11])}`);continue}for(let s=6,a=e.length;s<a;s+=6){const[o,c,u,d,f,p]=e.subarray(s,s+6).map(nt.svgRound);t.push(`C${o} ${c} ${u} ${d} ${f} ${p}`)}}return t.join("")}serialize([t,e,s,a],o){const c=[],u=[],[d,f,p,b]=this.#d();let y,A,w,S,C,E,x,T,O;switch(this.#o){case 0:O=nt._rescale,y=t,A=e+a,w=s,S=-a,C=t+d*s,E=e+(1-f-b)*a,x=t+(d+p)*s,T=e+(1-f)*a;break;case 90:O=nt._rescaleAndSwap,y=t,A=e,w=s,S=a,C=t+f*s,E=e+d*a,x=t+(f+b)*s,T=e+(d+p)*a;break;case 180:O=nt._rescale,y=t+s,A=e,w=-s,S=a,C=t+(1-d-p)*s,E=e+f*a,x=t+(1-d)*s,T=e+(f+b)*a;break;case 270:O=nt._rescaleAndSwap,y=t+s,A=e+a,w=-s,S=-a,C=t+(1-f-b)*s,E=e+(1-d-p)*a,x=t+(1-f)*s,T=e+(1-d)*a;break}for(const{line:R,points:L}of this.#i)c.push(O(R,y,A,w,S,o?new Array(R.length):null)),u.push(O(L,y,A,w,S,o?new Array(L.length):null));return{lines:c,points:u,rect:[C,E,x,T]}}static deserialize(t,e,s,a,o,{paths:{lines:c,points:u},rotation:d,thickness:f}){const p=[];let b,y,A,w,S;switch(d){case 0:S=nt._rescale,b=-t/s,y=e/a+1,A=1/s,w=-1/a;break;case 90:S=nt._rescaleAndSwap,b=-e/a,y=-t/s,A=1/a,w=1/s;break;case 180:S=nt._rescale,b=t/s+1,y=-e/a,A=-1/s,w=1/a;break;case 270:S=nt._rescaleAndSwap,b=e/a+1,y=t/s+1,A=-1/a,w=-1/s;break}if(!c){c=[];for(const E of u){const x=E.length;if(x===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(x===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const T=new Float32Array(3*(x-2));c.push(T);let[O,R,L,k]=E.subarray(0,4);T.set([NaN,NaN,NaN,NaN,O,R],0);for(let q=4;q<x;q+=2){const X=E[q],Z=E[q+1];T.set(nt.createBezierPoints(O,R,L,k,X,Z),(q-2)*3),[O,R,L,k]=[L,k,X,Z]}}}for(let E=0,x=c.length;E<x;E++)p.push({line:S(c[E].map(T=>T??NaN),b,y,A,w),points:S(u[E].map(T=>T??NaN),b,y,A,w)});const C=new this.prototype.constructor;return C.build(p,s,a,1,d,f,o),C}#l(t=this.#c){const e=this.#n+t/2*this.#s;return this.#o%180===0?[e/this.#r,e/this.#a]:[e/this.#a,e/this.#r]}#d(){const[t,e,s,a]=this.#t,[o,c]=this.#l(0);return[t+o,e+c,s-2*o,a-2*c]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#i){if(a.length<=12){for(let u=4,d=a.length;u<d;u+=6)it.pointBoundingBox(a[u],a[u+1],t);continue}let o=a[4],c=a[5];for(let u=6,d=a.length;u<d;u+=6){const[f,p,b,y,A,w]=a.subarray(u,u+6);it.bezierBoundingBox(o,c,f,p,b,y,A,w,t),o=A,c=w}}const[e,s]=this.#l();t[0]=je(t[0]-e,0,1),t[1]=je(t[1]-s,0,1),t[2]=je(t[2]+e,0,1),t[3]=je(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,s]=this.#l();this.#c=t;const[a,o]=this.#l(),[c,u]=[a-e,o-s],d=this.#t;return d[0]-=c,d[1]-=u,d[2]+=2*c,d[3]+=2*u,d}updateParentDimensions([t,e],s){const[a,o]=this.#l();this.#r=t,this.#a=e,this.#s=s;const[c,u]=this.#l(),d=c-a,f=u-o,p=this.#t;return p[0]-=d,p[1]-=f,p[2]+=2*d,p[3]+=2*f,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(nt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let s=0,a=0,o=0,c=0,u=0,d=0;switch(this.#e){case 90:a=e/t,o=-t/e,u=t;break;case 180:s=-1,c=-1,u=t,d=e;break;case 270:a=-e/t,o=t/e,d=e;break;default:return""}return`matrix(${s} ${a} ${o} ${c} ${nt.svgRound(u)} ${nt.svgRound(d)})`}getPathResizingSVGProperties([t,e,s,a]){const[o,c]=this.#l(),[u,d,f,p]=this.#t;if(Math.abs(f-o)<=nt.PRECISION||Math.abs(p-c)<=nt.PRECISION){const S=t+s/2-(u+f/2),C=e+a/2-(d+p/2);return{path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${S} ${C})`}}}const b=(s-2*o)/(f-2*o),y=(a-2*c)/(p-2*c),A=f/s,w=p/a;return{path:{"transform-origin":`${nt.svgRound(u)} ${nt.svgRound(d)}`,transform:`${this.rotationTransform} scale(${A} ${w}) translate(${nt.svgRound(o)} ${nt.svgRound(c)}) scale(${b} ${y}) translate(${nt.svgRound(-o)} ${nt.svgRound(-c)})`}}}getPathResizedSVGProperties([t,e,s,a]){const[o,c]=this.#l(),u=this.#t,[d,f,p,b]=u;if(u[0]=t,u[1]=e,u[2]=s,u[3]=a,Math.abs(p-o)<=nt.PRECISION||Math.abs(b-c)<=nt.PRECISION){const C=t+s/2-(d+p/2),E=e+a/2-(f+b/2);for(const{line:x,points:T}of this.#i)nt._translate(x,C,E,x),nt._translate(T,C,E,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(s-2*o)/(p-2*o),A=(a-2*c)/(b-2*c),w=-y*(d+o)+t+o,S=-A*(f+c)+e+c;if(y!==1||A!==1||w!==0||S!==0)for(const{line:C,points:E}of this.#i)nt._rescale(C,w,S,y,A,C),nt._rescale(E,w,S,y,A,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],s){const[a,o]=s,c=this.#t,u=t-c[0],d=e-c[1];if(this.#r===a&&this.#a===o)for(const{line:f,points:p}of this.#i)nt._translate(f,u,d,f),nt._translate(p,u,d,p);else{const f=this.#r/a,p=this.#a/o;this.#r=a,this.#a=o;for(const{line:b,points:y}of this.#i)nt._rescale(b,u,d,f,p,b),nt._rescale(y,u,d,f,p,y);c[2]*=f,c[3]*=p}return c[0]=t,c[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${nt.svgRound(t[0])} ${nt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class fc extends Py{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:dt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new fc(this._viewParameters);return t.updateAll(this),t}}class Od extends zt{static _type="ink";static _editorType=vt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){dt.initialize(t,e),this._defaultDrawingOptions=new fc(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return yt(this,"typesMap",new Map([[Ot.INK_THICKNESS,"stroke-width"],[Ot.INK_COLOR,"stroke"],[Ot.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,s,a,o){return new lE(t,e,s,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,s,a,o,c){return ho.deserialize(t,e,s,a,o,c)}static async deserialize(t,e,s){let a=null;if(t instanceof Md){const{data:{inkLists:c,rect:u,rotation:d,id:f,color:p,opacity:b,borderStyle:{rawWidth:y},popupRef:A,richText:w,contentsObj:S,creationDate:C,modificationDate:E},parent:{page:{pageNumber:x}}}=t;a=t={annotationType:vt.INK,color:Array.from(p),thickness:y,opacity:b,paths:{points:c},boxes:null,pageIndex:x-1,rect:u.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:A,richText:w,comment:S?.str||null,creationDate:C,modificationDate:E}}const o=await super.deserialize(t,e,s);return o._initialData=a,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new to(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ot.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:s}=this;e.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:s}){this._drawingOptions=Od.getDefaultDrawingOptions({stroke:it.makeHexColor(...t),"stroke-width":e,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":c}}=this,u=Object.assign(super.serialize(t),{color:dt._colorManager.convert(a),opacity:o,thickness:c,paths:{lines:e,points:s}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:e,thickness:s,opacity:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((c,u)=>c!==e[u])||t.thickness!==s||t.opacity!==a||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class cd extends ho{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Ul=8,Pr=3;class Ta{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,s,a){return s-=t,a-=e,s===0?a>0?0:4:s===1?a+6:2-a}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,e,s,a,o,c,u){const d=this.#e(s,a,o,c);for(let f=0;f<8;f++){const p=(-f+d-u+16)%8,b=this.#n[2*p],y=this.#n[2*p+1];if(t[(s+b)*e+(a+y)]!==0)return p}return-1}static#r(t,e,s,a,o,c,u){const d=this.#e(s,a,o,c);for(let f=0;f<8;f++){const p=(f+d+u+16)%8,b=this.#n[2*p],y=this.#n[2*p+1];if(t[(s+b)*e+(a+y)]!==0)return p}return-1}static#a(t,e,s,a){const o=t.length,c=new Int32Array(o);for(let p=0;p<o;p++)c[p]=t[p]<=a?1:0;for(let p=1;p<s-1;p++)c[p*e]=c[p*e+e-1]=0;for(let p=0;p<e;p++)c[p]=c[e*s-1-p]=0;let u=1,d;const f=[];for(let p=1;p<s-1;p++){d=1;for(let b=1;b<e-1;b++){const y=p*e+b,A=c[y];if(A===0)continue;let w=p,S=b;if(A===1&&c[y-1]===0)u+=1,S-=1;else if(A>=1&&c[y+1]===0)u+=1,S+=1,A>1&&(d=A);else{A!==1&&(d=Math.abs(A));continue}const C=[b,p],E=S===b+1,x={isHole:E,points:C,id:u,parent:0};f.push(x);let T;for(const Q of f)if(Q.id===d){T=Q;break}T?T.isHole?x.parent=E?T.parent:d:x.parent=E?d:T.parent:x.parent=E?d:0;const O=this.#i(c,e,p,b,w,S,0);if(O===-1){c[y]=-u,c[y]!==1&&(d=Math.abs(c[y]));continue}let R=this.#n[2*O],L=this.#n[2*O+1];const k=p+R,q=b+L;w=k,S=q;let X=p,Z=b;for(;;){const Q=this.#r(c,e,X,Z,w,S,1);R=this.#n[2*Q],L=this.#n[2*Q+1];const at=X+R,pt=Z+L;C.push(pt,at);const lt=X*e+Z;if(c[lt+1]===0?c[lt]=-u:c[lt]===1&&(c[lt]=u),at===p&&pt===b&&X===k&&Z===q){c[y]!==1&&(d=Math.abs(c[y]));break}else w=X,S=Z,X=at,Z=pt}}}return f}static#s(t,e,s,a){if(s-e<=4){for(let k=e;k<s-2;k+=2)a.push(t[k],t[k+1]);return}const o=t[e],c=t[e+1],u=t[s-4]-o,d=t[s-3]-c,f=Math.hypot(u,d),p=u/f,b=d/f,y=p*c-b*o,A=d/u,w=1/f,S=Math.atan(A),C=Math.cos(S),E=Math.sin(S),x=w*(Math.abs(C)+Math.abs(E)),T=w*(1-x+x**2),O=Math.max(Math.atan(Math.abs(E+C)*T),Math.atan(Math.abs(E-C)*T));let R=0,L=e;for(let k=e+2;k<s-2;k+=2){const q=Math.abs(y-p*t[k+1]+b*t[k]);q>R&&(L=k,R=q)}R>(f*O)**2?(this.#s(t,e,L+2,a),this.#s(t,L,s,a)):a.push(o,c)}static#o(t){const e=[],s=t.length;return this.#s(t,0,s,e),e.push(t[s-2],t[s-1]),e.length<=4?null:e}static#c(t,e,s,a,o,c){const u=new Float32Array(c**2),d=-2*a**2,f=c>>1;for(let S=0;S<c;S++){const C=(S-f)**2;for(let E=0;E<c;E++)u[S*c+E]=Math.exp((C+(E-f)**2)/d)}const p=new Float32Array(256),b=-2*o**2;for(let S=0;S<256;S++)p[S]=Math.exp(S**2/b);const y=t.length,A=new Uint8Array(y),w=new Uint32Array(256);for(let S=0;S<s;S++)for(let C=0;C<e;C++){const E=S*e+C,x=t[E];let T=0,O=0;for(let L=0;L<c;L++){const k=S+L-f;if(!(k<0||k>=s))for(let q=0;q<c;q++){const X=C+q-f;if(X<0||X>=e)continue;const Z=t[k*e+X],Q=u[L*c+q]*p[Math.abs(Z-x)];T+=Z*Q,O+=Q}}const R=A[E]=Math.round(T/O);w[R]++}return[A,w]}static#l(t){const e=new Uint32Array(256);for(const s of t)e[s]++;return e}static#d(t){const e=t.length,s=new Uint8ClampedArray(e>>2);let a=-1/0,o=1/0;for(let u=0,d=s.length;u<d;u++){const f=s[u]=t[u<<2];a=Math.max(a,f),o=Math.min(o,f)}const c=255/(a-o);for(let u=0,d=s.length;u<d;u++)s[u]=(s[u]-o)*c;return s}static#h(t){let e,s=-1/0,a=-1/0;const o=t.findIndex(d=>d!==0);let c=o,u=o;for(e=o;e<256;e++){const d=t[e];d>s&&(e-c>a&&(a=e-c,u=e-1),s=d,c=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:s,height:a}=t,{maxDim:o}=this.#t;let c=s,u=a;if(s>o||a>o){let y=s,A=a,w=Math.log2(Math.max(s,a)/o);const S=Math.floor(w);w=w===S?S-1:S;for(let E=0;E<w;E++){c=Math.ceil(y/2),u=Math.ceil(A/2);const x=new OffscreenCanvas(c,u);x.getContext("2d").drawImage(t,0,0,y,A,0,0,c,u),y=c,A=u,t!==e&&t.close(),t=x.transferToImageBitmap()}const C=Math.min(o/c,o/u);c=Math.round(c*C),u=Math.round(u*C)}const f=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,c,u);const p=f.getImageData(0,0,c,u).data;return[this.#d(p),c,u]}static extractContoursFromText(t,{fontFamily:e,fontStyle:s,fontWeight:a},o,c,u,d){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const b=200,y=p.font=`${s} ${a} ${b}px ${e}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:w,actualBoundingBoxAscent:S,actualBoundingBoxDescent:C,fontBoundingBoxAscent:E,fontBoundingBoxDescent:x,width:T}=p.measureText(t),O=1.5,R=Math.ceil(Math.max(Math.abs(A)+Math.abs(w)||0,T)*O),L=Math.ceil(Math.max(Math.abs(S)+Math.abs(C)||b,Math.abs(E)+Math.abs(x)||b)*O);f=new OffscreenCanvas(R,L),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=y,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,R,L),p.fillStyle="black",p.fillText(t,R*(O-1)/2,L*(3-O)/2);const k=this.#d(p.getImageData(0,0,R,L).data),q=this.#l(k),X=this.#h(q),Z=this.#a(k,R,L,X);return this.processDrawnLines({lines:{curves:Z,width:R,height:L},pageWidth:o,pageHeight:c,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,s,a,o){const[c,u,d]=this.#f(t),[f,p]=this.#c(c,u,d,Math.hypot(u,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),b=this.#h(p),y=this.#a(f,u,d,b);return this.processDrawnLines({lines:{curves:y,width:u,height:d},pageWidth:e,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:c,areContours:u}){a%180!==0&&([e,s]=[s,e]);const{curves:d,width:f,height:p}=t,b=t.thickness??0,y=[],A=Math.min(e/f,s/p),w=A/e,S=A/s,C=[];for(const{points:x}of d){const T=c?this.#o(x):x;if(!T)continue;C.push(T);const O=T.length,R=new Float32Array(O),L=new Float32Array(3*(O===2?2:O-2));if(y.push({line:L,points:R}),O===2){R[0]=T[0]*w,R[1]=T[1]*S,L.set([NaN,NaN,NaN,NaN,R[0],R[1]],0);continue}let[k,q,X,Z]=T;k*=w,q*=S,X*=w,Z*=S,R.set([k,q,X,Z],0),L.set([NaN,NaN,NaN,NaN,k,q],0);for(let Q=4;Q<O;Q+=2){const at=R[Q]=T[Q]*w,pt=R[Q+1]=T[Q+1]*S;L.set(nt.createBezierPoints(k,q,X,Z,at,pt),(Q-2)*3),[k,q,X,Z]=[X,Z,at,pt]}}if(y.length===0)return null;const E=u?new cd:new ho;return E.build(y,e,s,1,a,u?0:b,o),{outline:E,newCurves:C,areContours:u,thickness:b,width:f,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:s,width:a,height:o}){let c=1/0,u=-1/0,d=0;for(const T of t){d+=T.length;for(let O=2,R=T.length;O<R;O++){const L=T[O]-T[O-2];c=Math.min(c,L),u=Math.max(u,L)}}let f;c>=-128&&u<=127?f=Int8Array:c>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const p=t.length,b=Ul+Pr*p,y=new Uint32Array(b);let A=0;y[A++]=b*Uint32Array.BYTES_PER_ELEMENT+(d-2*p)*f.BYTES_PER_ELEMENT,y[A++]=0,y[A++]=a,y[A++]=o,y[A++]=e?0:1,y[A++]=Math.max(0,Math.floor(s??0)),y[A++]=p,y[A++]=f.BYTES_PER_ELEMENT;for(const T of t)y[A++]=T.length-2,y[A++]=T[0],y[A++]=T[1];const w=new CompressionStream("deflate-raw"),S=w.writable.getWriter();await S.ready,S.write(y);const C=f.prototype.constructor;for(const T of t){const O=new C(T.length-2);for(let R=2,L=T.length;R<L;R++)O[R-2]=T[R]-T[R-2];S.write(O)}S.close();const E=await new Response(w.readable).arrayBuffer(),x=new Uint8Array(E);return ly(x)}static async decompressSignature(t){try{const e=E1(t),{readable:s,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let c=null,u=0;for await(const T of s)c||=new Uint8Array(new Uint32Array(T.buffer,0,4)[0]),c.set(T,u),u+=T.length;const d=new Uint32Array(c.buffer,0,c.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=d[2],b=d[3],y=d[4]===0,A=d[5],w=d[6],S=d[7],C=[],E=(Ul+Pr*w)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(S){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(c.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(c.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(c.buffer,E);break}u=0;for(let T=0;T<w;T++){const O=d[Pr*T+Ul],R=new Float32Array(O+2);C.push(R);for(let L=0;L<Pr-1;L++)R[L]=d[Pr*T+Ul+L+1];for(let L=0;L<O;L++)R[L+2]=R[L]+x[u++]}return{areContours:y,thickness:A,outlines:C,width:p,height:b}}catch(e){return bt(`decompressSignature: ${e}`),null}}}class Ld extends Py{constructor(){super(),super.updateProperties({fill:dt._defaultLineColor,"stroke-width":0})}clone(){const t=new Ld;return t.updateAll(this),t}}class Nd extends fc{constructor(t){super(t),super.updateProperties({stroke:dt._defaultLineColor,"stroke-width":1})}clone(){const t=new Nd(this._viewParameters);return t.updateAll(this),t}}class sn extends zt{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=vt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){dt.initialize(t,e),this._defaultDrawingOptions=new Ld,this._defaultDrawnSignatureOptions=new Nd(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return yt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:a,mustSmooth:o,areContours:c,description:u,uuid:d,heightInPage:f}=this.#n,{rawDims:{pageWidth:p,pageHeight:b},rotation:y}=this.parent.viewport,A=Ta.processDrawnLines({lines:a,pageWidth:p,pageHeight:b,rotation:y,innerMargin:sn._INNER_MARGIN,mustSmooth:o,areContours:c});this.addSignature(A,f,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:s,width:a,height:o}=this.#n,c=Math.max(a,o),u=Ta.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:s,width:a,height:o},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,s,a){const{x:o,y:c}=this,{outline:u}=this.#n=t;this.#t=u instanceof cd,this.description=s;let d;this.#t?d=sn.getDefaultDrawingOptions():(d=sn._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[,f]=this.pageDimensions;let p=e/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=o,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:s},rotation:a}=this.parent.viewport;return Ta.process(t,e,s,a,sn._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:s,pageHeight:a},rotation:o}=this.parent.viewport;return Ta.extractContoursFromText(t,e,s,a,o,sn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:s},rotation:a}=this.parent.viewport;return Ta.processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:a,innerMargin:sn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=sn.getDefaultDrawingOptions():(this._drawingOptions=sn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a});return this.addComment(o),t?(o.paths={lines:e,points:s},o.uuid=this.#i,o.isCopy=!0):o.lines=e,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,e,s,a,o,c){return c.areContours?cd.deserialize(t,e,s,a,o,c):ho.deserialize(t,e,s,a,o,c)}static async deserialize(t,e,s){const a=await super.deserialize(t,e,s);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#i=t.uuid,a}}class cE extends dt{#t=null;#e=null;#n=null;#i=null;#r=null;#a="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=vt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){dt.initialize(t,e)}static isHandlingMimeForPasting(t){return td.includes(t)}static paste(t,e){e.pasteEditor({mode:vt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#a=t.file.name),this.#p()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:c}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:a,width:o,height:c,channels:a.length/(o*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(a=>this.#h(a)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(a=>this.#h(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=td.join(",");const e=this._uiManager._signal;this.#n=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(a)}s()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#m()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:s,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,a&&(this.#t=a),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#g()},t)}#p(){const{div:t}=this;let{width:e,height:s}=this.#t;const[a,o]=this.pageDimensions,c=.75;if(this.width)e=this.width*a,s=this.height*o;else if(e>c*a||s>c*o){const d=Math.min(c*a/e,c*o/s);e*=d,s*=d}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=e/a,this.height=s/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#g(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,s=!1){t||(t=224);const{width:a,height:o}=this.#t,c=new rn;let u=this.#t,d=a,f=o,p=null;if(e){if(a>e||o>e){const L=Math.min(e/a,e/o);d=Math.floor(a*L),f=Math.floor(o*L)}p=document.createElement("canvas");const y=p.width=Math.ceil(d*c.sx),A=p.height=Math.ceil(f*c.sy);this.#l||(u=this.#u(y,A));const w=p.getContext("2d");w.filter=this._uiManager.hcmFilter;let S="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":M1.isDarkMode&&(S="#8f8f9d",C="#42414d");const E=15,x=E*c.sx,T=E*c.sy,O=new OffscreenCanvas(x*2,T*2),R=O.getContext("2d");R.fillStyle=S,R.fillRect(0,0,x*2,T*2),R.fillStyle=C,R.fillRect(0,0,x,T),R.fillRect(x,T,x,T),w.fillStyle=w.createPattern(O,"repeat"),w.fillRect(0,0,y,A),w.drawImage(u,0,0,u.width,u.height,0,0,y,A)}let b=null;if(s){let y,A;if(c.symmetric&&u.width<t&&u.height<t)y=u.width,A=u.height;else if(u=this.#t,a>t||o>t){const C=Math.min(t/a,t/o);y=Math.floor(a*C),A=Math.floor(o*C),this.#l||(u=this.#u(y,A))}const S=new OffscreenCanvas(y,A).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,y,A),b={width:y,height:A,data:S.getImageData(0,0,y,A).data}}return{canvas:p,width:d,height:f,imageData:b}}#u(t,e){const{width:s,height:a}=this.#t;let o=s,c=a,u=this.#t;for(;o>2*t||c>2*e;){const d=o,f=c;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const p=new OffscreenCanvas(o,c);p.getContext("2d").drawImage(u,0,0,d,f,0,0,o,c),u=p.transferToImageBitmap()}return u}#g(){const[t,e]=this.parentDimensions,{width:s,height:a}=this,o=new rn,c=Math.ceil(s*t*o.sx),u=Math.ceil(a*e*o.sy),d=this.#s;if(!d||d.width===c&&d.height===u)return;d.width=c,d.height=u;const f=this.#l?this.#t:this.#u(c,u),p=d.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,c,u)}#b(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,s]=this.pageDimensions,a=Math.round(this.width*e*za.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*za.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(a,o);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,o),c.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,s){let a=null,o=!1;if(t instanceof By){const{data:{rect:S,rotation:C,id:E,structParent:x,popupRef:T,richText:O,contentsObj:R,creationDate:L,modificationDate:k},container:q,parent:{page:{pageNumber:X}},canvas:Z}=t;let Q,at;Z?(delete t.canvas,{id:Q,bitmap:at}=s.imageManager.getFromCanvas(q.id,Z),Z.remove()):(o=!0,t._hasNoCanvas=!0);const pt=(await e._structTree.getAriaAttributes(`${xa}${E}`))?.get("aria-label")||"";a=t={annotationType:vt.STAMP,bitmapId:Q,bitmap:at,pageIndex:X-1,rect:S.slice(0),rotation:C,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:pt},isSvg:!1,structParent:x,popupRef:T,richText:O,comment:R?.str||null,creationDate:L,modificationDate:k}}const c=await super.deserialize(t,e,s),{rect:u,bitmap:d,bitmapUrl:f,bitmapId:p,isSvg:b,accessibilityData:y}=t;o?(s.addMissingCanvas(t.id,c),c.#o=!0):p&&s.imageManager.isValidId(p)?(c.#e=p,d&&(c.#t=d)):c.#i=f,c.#l=b;const[A,w]=c.pageDimensions;return c.width=(u[2]-u[0])/A,c.height=(u[3]-u[1])/w,y&&(c.altTextData=y),c._initialData=a,t.comment&&c.setCommentData(t),c.#d=!!a,c}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(s),t)return s.bitmapUrl=this.#b(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#v(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(e===null)return s;e.stamps||=new Map;const c=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:c,serialized:s}),s.bitmap=this.#b(!1);else if(this.#l){const u=e.stamps.get(this.#e);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#b(!1))}return s}#v(t){const{pageIndex:e,accessibilityData:{altText:s}}=this._initialData,a=t.pageIndex===e,o=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Mn{#t;#e=!1;#n=null;#i=null;#r=null;#a=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#p=-1;#u;static _initialized=!1;static#g=new Map([Te,Od,cE,le,sn].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:a,accessibilityManager:o,annotationLayer:c,drawLayer:u,textLayer:d,viewport:f,l10n:p}){const b=[...Mn.#g.values()];if(!Mn._initialized){Mn._initialized=!0;for(const y of b)y.initialize(p,t)}t.registerEditorTypes(b),this.#u=t,this.pageIndex=e,this.div=s,this.#t=o,this.#n=c,this.viewport=f,this.#h=d,this.drawLayer=u,this._structTree=a,this.#u.addLayer(this)}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===vt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#S(),t){case vt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case vt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case vt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===vt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const s of Mn.#g.values())e.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.togglePointerEvents(t)}get#b(){return this.#a.size!==0?this.#a.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const s of this.#b)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const e=this.#n;if(e)for(const s of e.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const a=await this.deserialize(s);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const a=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",o=>{const{clientX:u,clientY:d,timeStamp:f}=o,p=this.#p;if(f-p>500){this.#p=f;return}this.#p=-1;const{classList:b}=this.div;b.toggle("getElements",!0);const y=document.elementsFromPoint(u,d);if(b.toggle("getElements",!1),!this.div.contains(y[0]))return;let A;const w=new RegExp(`^${Qr}[0-9]+$`);for(const C of y)if(w.test(C.id)){A=C.id;break}if(!A)return;const S=this.#a.get(A);S?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),S.dblclick(o))},{signal:a,capture:!0})}const t=this.#n,e=[];if(t){const a=new Map,o=new Map;for(const u of this.#b){if(u.disableEditing(),!u.annotationElementId){e.push(u);continue}if(u.serialize()!==null){a.set(u.annotationElementId,u);continue}else o.set(u.annotationElementId,u);this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}const c=t.getEditableAnnotations();for(const u of c){const{id:d}=u.data;if(this.#u.isDeletedAnnotationElement(d)){u.updateEdited({deleted:!0});continue}let f=o.get(d);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=a.get(d),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}this.#S(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const a of Mn.#g.values())s.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(e),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:s}=Ae.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),le.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#a.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#a.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),dt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getEditorByUID(t){for(const e of this.#a.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#y(){return Mn.#g.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#C(t){const e=this.#y;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:a}=this.#E(),o=this.getNextId(),c=this.#C({parent:this,id:o,x:s,y:a,uiManager:this.#u,isCentered:!0,...e});c&&this.add(c)}async deserialize(t){return await Mn.#g.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,s={}){const a=this.getNextId(),o=this.#C({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...s});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#E(){const{x:t,y:e,width:s,height:a}=this.boundingClientRect,o=Math.max(0,t),c=Math.max(0,e),u=Math.min(window.innerWidth,t+s),d=Math.min(window.innerHeight,e+a),f=(o+u)/2-t,p=(c+d)/2-e,[b,y]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:b,offsetY:y}}addNewEditor(t={}){this.createAndAddNewEditor(this.#E(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=Ae.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#s||(this.#s=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===vt.STAMP||s===vt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===vt.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:e}=Ae.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#s=!0,this.#y?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#y.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#y.endDrawing(t)):null}findNewParent(t,e,s){const a=this.#u.findParent(e,s);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#a.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#a.clear(),this.#u.removeLayer(this)}#S(){for(const t of this.#a.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Ls(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#S();const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,Ls(this.div,{rotation:s}),e!==s)for(const a of this.#a.values())a.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class Ne{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return yt(this,"_svgFactory",new Zl)}static#r(t,[e,s,a,o]){const{style:c}=t;c.top=`${100*s}%`,c.left=`${100*e}%`,c.width=`${100*a}%`,c.height=`${100*o}%`}#a(){const t=Ne._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,e){const s=Ne._svgFactory.createElement("clipPath");t.append(s);const a=`clip_${e}`;s.setAttribute("id",a),s.setAttribute("clipPathUnits","objectBoundingBox");const o=Ne._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),a}#o(t,e){for(const[s,a]of Object.entries(e))a===null?t.removeAttribute(s):t.setAttribute(s,a)}draw(t,e=!1,s=!1){const a=Ne.#i++,o=this.#a(),c=Ne._svgFactory.createElement("defs");o.append(c);const u=Ne._svgFactory.createElement("path");c.append(u);const d=`path_p${this.pageIndex}_${a}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(a,u);const f=s?this.#s(c,d):null,p=Ne._svgFactory.createElement("use");return o.append(p),p.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(a,o),{id:a,clipPathId:`url(#${f})`}}drawOutline(t,e){const s=Ne.#i++,a=this.#a(),o=Ne._svgFactory.createElement("defs");a.append(o);const c=Ne._svgFactory.createElement("path");o.append(c);const u=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const b=Ne._svgFactory.createElement("mask");o.append(b),d=`mask_p${this.pageIndex}_${s}`,b.setAttribute("id",d),b.setAttribute("maskUnits","objectBoundingBox");const y=Ne._svgFactory.createElement("rect");b.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const A=Ne._svgFactory.createElement("use");b.append(A),A.setAttribute("href",`#${u}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=Ne._svgFactory.createElement("use");a.append(f),f.setAttribute("href",`#${u}`),d&&f.setAttribute("mask",`url(#${d})`);const p=f.cloneNode();return a.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(s,a),s}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:s,bbox:a,rootClass:o,path:c}=e,u=typeof t=="number"?this.#e.get(t):t;if(u){if(s&&this.#o(u,s),a&&Ne.#r(u,a),o){const{classList:d}=u;for(const[f,p]of Object.entries(o))d.toggle(f,p)}if(c){const f=u.firstElementChild.firstElementChild;this.#o(f,c)}}}updateParent(t,e){if(e===this)return;const s=this.#e.get(t);s&&(e.#t.append(s),this.#e.delete(t),e.#e.set(t,s))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:od};globalThis.pdfjsLib={AbortException:rs,AnnotationEditorLayer:Mn,AnnotationEditorParamsType:Ot,AnnotationEditorType:vt,AnnotationEditorUIManager:os,AnnotationLayer:Rd,AnnotationMode:ns,AnnotationType:ge,applyOpacity:O1,build:Uw,ColorPicker:ki,createValidAbsoluteUrl:sy,CSSConstants:R1,DOMSVGFactory:Zl,DrawLayer:Ne,FeatureTest:Ae,fetchData:ro,findContrastColor:L1,getDocument:xy,getFilenameFromUrl:_1,getPdfFilenameFromUrl:C1,getRGB:lo,getUuid:oy,getXfaPageViewport:x1,GlobalWorkerOptions:ka,ImageKind:Hl,InvalidPDFException:Zh,isDataScheme:uc,isPdfFile:Ad,isValidExplicitDest:G1,MathClamp:je,noContextMenu:zi,normalizeUnicode:S1,OPS:Wr,OutputScale:rn,PasswordResponses:d1,PDFDataRangeTransport:Dy,PDFDateString:Jh,PDFWorker:Jr,PermissionFlag:h1,PixelsPerInch:za,RenderingCancelledException:vd,renderRichText:uy,ResponseException:Ql,setLayerDimensions:Ls,shadow:yt,SignatureExtractor:Ta,stopEvent:ne,SupportedImageMimeTypes:td,TextLayer:gi,TouchManager:hc,updateUrlHash:ay,Util:it,VerbosityLevel:oc,version:Fw,XfaLayer:cy};ka.workerSrc="/MochiMaker/pdf.worker.min.mjs";const uE=async h=>{const t=await h.arrayBuffer();return xy({data:t}).promise},hE=async(h,t,e=2)=>{const s=await h.getPage(t),a=s.getViewport({scale:e}),o=document.createElement("canvas"),c=o.getContext("2d");if(o.height=a.height,o.width=a.width,!c)throw new Error("Could not get canvas context");const u={canvasContext:c,viewport:a};return await s.render(u).promise,{id:crypto.randomUUID(),pageNumber:t,canvas:o,width:a.width,height:a.height}},Fr={a4:{width:"210mm",height:"297mm"},a3:{width:"297mm",height:"420mm"},b5:{width:"176mm",height:"250mm"},b4:{width:"250mm",height:"353mm"},letter:{width:"216mm",height:"279mm"}};function dE(){const[h,t]=j.useState([]),[e,s]=j.useState([]),[a,o]=j.useState({rows:2,cols:2}),[c,u]=j.useState(10),[d,f]=j.useState("a4"),[p,b]=j.useState("portrait"),[y,A]=j.useState(!1),[w,S]=j.useState(0),[C,E]=j.useState(""),[x,T]=j.useState(null),O=NA(kh(Xb,{activationConstraint:{distance:10}}),kh(Yb,{activationConstraint:{delay:250,tolerance:5}}),kh(gd,{coordinateGetter:l1})),R=async P=>{t(tt=>[...tt,...P]),A(!0);const W=[];try{for(const tt of P)try{const ft=await uE(tt),D=ft.numPages;for(let F=1;F<=D;F++){const K=await hE(ft,F,2);W.push({...K,id:`${tt.name}-${F}-${crypto.randomUUID()}`}),S(J=>J+1)}}catch(ft){console.error(`Failed to load file ${tt.name}:`,ft),alert(`Error loading ${tt.name}. It might be corrupted or password protected.`)}s(tt=>[...tt,...W])}catch(tt){console.error("Critical error processing PDFs:",tt),alert("An unexpected error occurred. Please reload and try again.")}finally{A(!1)}},L=()=>{confirm("Are you sure you want to clear all pages?")&&(t([]),s([]),S(0),E(""))},k=P=>{s(W=>W.filter(tt=>tt.id!==P))},q=()=>{window.print()},X=P=>{T(P.active.id)},Z=P=>{const{active:W,over:tt}=P;tt&&W.id!==tt.id&&s(ft=>{const D=ft.findIndex(K=>K.id===W.id),F=ft.findIndex(K=>K.id===tt.id);return bd(ft,D,F)}),T(null)},at=(()=>{const P=Fr[d];return p==="landscape"?{width:P.height,height:P.width}:P})();j.useEffect(()=>{const P="dynamic-print-style";let W=document.getElementById(P);W||(W=document.createElement("style"),W.id=P,document.head.appendChild(W));const tt=p==="landscape"?`${Fr[d].height} ${Fr[d].width}`:`${Fr[d].width} ${Fr[d].height}`;W.innerHTML=`
      @media print {
        @page {
          size: ${tt};
          margin: 0;
        }
        /* Extra safety: override any bootstrap/browser styles */
        body { margin: 0; padding: 0; }
        
        /* STRICTLY FORCE DIMENSIONS */
        .a4-page {
           width: ${tt.split(" ")[0]} !important;
           height: ${tt.split(" ")[1]} !important;
           min-height: ${tt.split(" ")[1]} !important;
           max-height: ${tt.split(" ")[1]} !important;
        }
      }
    `},[d,p]);const pt=a.rows*a.cols,lt=e.length>0?Math.ceil(e.length/pt):0,St=x?e.find(P=>P.id===x):null,B=()=>{const P=[];for(let W=0;W<lt;W++){const tt=W*pt,ft=e.slice(tt,tt+pt).map(D=>et.jsx(u1,{id:D.id,className:"grid-item-container",children:et.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",overflow:"hidden"},children:[et.jsx(Jm,{canvas:D.canvas}),et.jsx("button",{onPointerDown:F=>F.stopPropagation(),onClick:F=>{F.stopPropagation(),k(D.id)},className:"delete-overlay",type:"button",style:{position:"absolute",top:"5px",right:"5px",background:"rgba(239, 68, 68, 0.9)",color:"white",border:"none",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:10,fontSize:"16px",lineHeight:1},title:"Remove Slide","aria-label":"Remove Slide",children:""})]})},D.id));P.push(et.jsxs("div",{className:"a4-page",style:{width:at.width,minHeight:at.height,height:at.height,display:"flex",flexDirection:"column",padding:"10mm",boxSizing:"border-box",backgroundColor:"white",position:"relative"},children:[C&&et.jsx("div",{style:{marginBottom:"5mm",textAlign:"center",fontWeight:"bold",fontSize:"18px",borderBottom:"2px solid #333",paddingBottom:"2mm",flexShrink:0},children:C}),et.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${a.cols}, minmax(0, 1fr))`,gridTemplateRows:`repeat(${a.rows}, minmax(0, 1fr))`,gap:`${c}px`,width:"100%",overflow:"hidden"},children:ft.map((D,F)=>et.jsx("div",{className:"grid-item",style:{position:"relative",width:"100%",height:"100%",overflow:"hidden"},children:D},F))}),et.jsxs("div",{style:{position:"absolute",bottom:"5mm",right:"10mm",fontSize:"10px",color:"#999",pointerEvents:"none"},children:["Page ",W+1]})]},W))}return P};return et.jsxs("div",{className:"app-container",children:[et.jsx(yA,{layout:a,setLayout:o,gap:c,setGap:u,paperSize:d,setPaperSize:f,orientation:p,setOrientation:b,onPrint:q,fileCount:h.length,onClearAll:L,title:C,setTitle:E}),et.jsx("main",{className:"main-content",children:et.jsxs(MS,{sensors:O,collisionDetection:zA,onDragStart:X,onDragEnd:Z,children:[et.jsx(ZS,{items:e.map(P=>P.id),strategy:yd,children:y?et.jsxs("div",{style:{marginTop:"5rem",textAlign:"center"},children:[et.jsx("div",{className:"loader",style:{marginBottom:"1rem",fontSize:"1.5rem",fontWeight:600},children:"Processing PDFs..."}),et.jsxs("p",{children:["Rendered ",w," pages"]})]}):e.length===0?et.jsx("div",{style:{marginTop:"5rem",width:"100%"},children:et.jsx(Fm,{onFilesSelect:R})}):et.jsxs("div",{className:"preview-area",children:[B(),et.jsx("div",{className:"dropzone-footer",style:{margin:"2rem 0",maxWidth:"600px",width:"100%"},children:et.jsx(Fm,{onFilesSelect:R})})]})}),et.jsx(KS,{adjustScale:!0,children:St?et.jsx("div",{className:"grid-item",style:{width:"150px",height:"auto",background:"white",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",border:"2px solid #2563eb",borderRadius:"0.5rem",overflow:"hidden",opacity:.9},children:et.jsx(Jm,{canvas:St.canvas})}):null})]})})]})}sA.createRoot(document.getElementById("root")).render(et.jsx(Zt.StrictMode,{children:et.jsx(dE,{})}));
